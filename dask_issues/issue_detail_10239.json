{
    "url": "https://api.github.com/repos/dask/dask/issues/10239",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/10239/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/10239/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/10239/events",
    "html_url": "https://github.com/dask/dask/issues/10239",
    "id": 1689526256,
    "node_id": "I_kwDOAbcwm85ktB_w",
    "number": 10239,
    "title": "The right way for a C extension to report CPU and GPU memory usage.",
    "user": {
        "login": "trivialfis",
        "id": 16746409,
        "node_id": "MDQ6VXNlcjE2NzQ2NDA5",
        "avatar_url": "https://avatars.githubusercontent.com/u/16746409?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/trivialfis",
        "html_url": "https://github.com/trivialfis",
        "followers_url": "https://api.github.com/users/trivialfis/followers",
        "following_url": "https://api.github.com/users/trivialfis/following{/other_user}",
        "gists_url": "https://api.github.com/users/trivialfis/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/trivialfis/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/trivialfis/subscriptions",
        "organizations_url": "https://api.github.com/users/trivialfis/orgs",
        "repos_url": "https://api.github.com/users/trivialfis/repos",
        "events_url": "https://api.github.com/users/trivialfis/events{/privacy}",
        "received_events_url": "https://api.github.com/users/trivialfis/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 3468123446,
            "node_id": "LA_kwDOAbcwm87Ot102",
            "url": "https://api.github.com/repos/dask/dask/labels/needs%20attention",
            "name": "needs attention",
            "color": "6d626c",
            "default": false,
            "description": "It's been a while since this was pushed on. Needs attention from the owner or a maintainer."
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2023-04-29T11:18:26Z",
    "updated_at": "2023-06-12T02:04:42Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Hi Dask! I'm working on scaling XGBoost with Dask to larger datasets, one of the issues I encountered is this warning:\r\n\r\n```\r\n2023-04-08 02:03:01,840 - distributed.worker.memory - WARNING - Unmanaged memory use is high. This may indicate a memory leak or the memory may not be released to the OS; see https://distributed.dask.org/en/latest/worker-memory.html#memory-not-released-back-to-the-os for more information. -- Unmanaged memory: 73.54 GiB -- Worker memory limit: 93.72 GiB\r\n2023-04-08 02:03:01,941 - distributed.worker.memory - WARNING - Unmanaged memory use is high. This may indicate a memory leak or the memory may not be released to the OS; see https://distributed.dask.org/en/latest/worker-memory.html#memory-not-released-back-to-the-os for more information. -- Unmanaged memory: 73.54 GiB -- Worker memory limit: 93.72 GiB\r\n```\r\nI think this is caused by XGBoost's data structures that don't report their memory usage to the Python interpretor nor Dask. I'm curious whether there are some protocals recommended by Dask for reporting memory usage for both CPU and GPU.\r\n\r\nDuring training, XGBoost needs a lot of allocations that are not managed by dask, and the allocation happens inside a task (training). Adding a simple `__sizeof__` with basic estimation to some of the large structures doesn't seem to help change the warning.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/10239/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/10239/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}