[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/523021924",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-523021924",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 523021924,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzAyMTkyNA==",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-20T13:45:21Z",
        "updated_at": "2019-08-20T13:45:21Z",
        "author_association": "MEMBER",
        "body": "@martindurant, if you are around, would you be able to take a look?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/523021924/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/523189473",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-523189473",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 523189473,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzE4OTQ3Mw==",
        "user": {
            "login": "TomAugspurger",
            "id": 1312546,
            "node_id": "MDQ6VXNlcjEzMTI1NDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1312546?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TomAugspurger",
            "html_url": "https://github.com/TomAugspurger",
            "followers_url": "https://api.github.com/users/TomAugspurger/followers",
            "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
            "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
            "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
            "repos_url": "https://api.github.com/users/TomAugspurger/repos",
            "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-20T20:51:20Z",
        "updated_at": "2019-08-20T20:51:20Z",
        "author_association": "MEMBER",
        "body": "@telferm57 it's unlikely that your exact CSV file is needed to reproduce the problem. Can you provide  minimal example? http://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports. Otherwise, it's hard to know where to start looking.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/523189473/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/523416248",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-523416248",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 523416248,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzQxNjI0OA==",
        "user": {
            "login": "telferm57",
            "id": 16674375,
            "node_id": "MDQ6VXNlcjE2Njc0Mzc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16674375?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/telferm57",
            "html_url": "https://github.com/telferm57",
            "followers_url": "https://api.github.com/users/telferm57/followers",
            "following_url": "https://api.github.com/users/telferm57/following{/other_user}",
            "gists_url": "https://api.github.com/users/telferm57/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/telferm57/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/telferm57/subscriptions",
            "organizations_url": "https://api.github.com/users/telferm57/orgs",
            "repos_url": "https://api.github.com/users/telferm57/repos",
            "events_url": "https://api.github.com/users/telferm57/events{/privacy}",
            "received_events_url": "https://api.github.com/users/telferm57/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-21T11:29:37Z",
        "updated_at": "2019-08-21T11:29:37Z",
        "author_association": "NONE",
        "body": "unfortunately minimum example is a file > 64M to provoke the behaviour - file is generated by parquet.dot-net , so I cannot generate it in code. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/523416248/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/523418143",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-523418143",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 523418143,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzQxODE0Mw==",
        "user": {
            "login": "telferm57",
            "id": 16674375,
            "node_id": "MDQ6VXNlcjE2Njc0Mzc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16674375?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/telferm57",
            "html_url": "https://github.com/telferm57",
            "followers_url": "https://api.github.com/users/telferm57/followers",
            "following_url": "https://api.github.com/users/telferm57/following{/other_user}",
            "gists_url": "https://api.github.com/users/telferm57/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/telferm57/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/telferm57/subscriptions",
            "organizations_url": "https://api.github.com/users/telferm57/orgs",
            "repos_url": "https://api.github.com/users/telferm57/repos",
            "events_url": "https://api.github.com/users/telferm57/events{/privacy}",
            "received_events_url": "https://api.github.com/users/telferm57/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-21T11:35:57Z",
        "updated_at": "2019-08-21T11:35:57Z",
        "author_association": "NONE",
        "body": "Unfortunately I cannot get the files compressed below 10MB, which seems to be the limit here \r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/523418143/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/523458090",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-523458090",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 523458090,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzQ1ODA5MA==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-21T13:31:36Z",
        "updated_at": "2019-08-21T13:31:36Z",
        "author_association": "MEMBER",
        "body": "You don't need to share a file (indeed, please don't share a file), but\nrather a minimal process to create such a file and generate the error.  You\nmight want to read through the blogpost linked to above.\n\nOn Wed, Aug 21, 2019 at 4:35 AM Malcolm <notifications@github.com> wrote:\n\n> Unfortunately I cannot get the files compressed below 10MB, which seems to\n> be the limit here\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/dask/dask/issues/5295?email_source=notifications&email_token=AACKZTDGYQJOQ2QQICFOPV3QFUSB7A5CNFSM4INDZGRKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD4ZLUHY#issuecomment-523418143>,\n> or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AACKZTDF5FMDGUOGWEIASDDQFUSB7ANCNFSM4INDZGRA>\n> .\n>\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/523458090/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/523488960",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-523488960",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 523488960,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyMzQ4ODk2MA==",
        "user": {
            "login": "telferm57",
            "id": 16674375,
            "node_id": "MDQ6VXNlcjE2Njc0Mzc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16674375?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/telferm57",
            "html_url": "https://github.com/telferm57",
            "followers_url": "https://api.github.com/users/telferm57/followers",
            "following_url": "https://api.github.com/users/telferm57/following{/other_user}",
            "gists_url": "https://api.github.com/users/telferm57/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/telferm57/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/telferm57/subscriptions",
            "organizations_url": "https://api.github.com/users/telferm57/orgs",
            "repos_url": "https://api.github.com/users/telferm57/repos",
            "events_url": "https://api.github.com/users/telferm57/events{/privacy}",
            "received_events_url": "https://api.github.com/users/telferm57/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-08-21T14:43:29Z",
        "updated_at": "2019-08-21T20:30:22Z",
        "author_association": "NONE",
        "body": "(unfortunately the process to create the file is happening in c#/.net) \r\n\r\nI have been debugging my end ... what seems to be happening is that by default fastparquet is setting the number of partitions to the number of row groups. The row group size  has been set very small in the file producing software (32k records per row group) . So for a file with only 2 columns in, the output file from the 3rd party  is producing 96 row groups for a 100MB file. When fastparquet reads this, it sets number of partitions to number of row groups.\r\n\r\n\r\nWhen I repartition to a more sensible partition size of 64MB , using npartitions = 8, The number of partitions is 8, but the  number of tasks is still 104 ... I'm guessing per row-group ? Ideally I assume we'd like 1 task per partition?\r\n\r\n(I'm not sure what pyarrow does yet, but it is producing 1 partition and 1 task when doing daskdataframe.read_parquet, and on re-partitioning to 8 dataframes, tasks goes up to only 10, compared to fastparquets 104))\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/523488960/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/527963656",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-527963656",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 527963656,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyNzk2MzY1Ng==",
        "user": {
            "login": "telferm57",
            "id": 16674375,
            "node_id": "MDQ6VXNlcjE2Njc0Mzc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16674375?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/telferm57",
            "html_url": "https://github.com/telferm57",
            "followers_url": "https://api.github.com/users/telferm57/followers",
            "following_url": "https://api.github.com/users/telferm57/following{/other_user}",
            "gists_url": "https://api.github.com/users/telferm57/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/telferm57/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/telferm57/subscriptions",
            "organizations_url": "https://api.github.com/users/telferm57/orgs",
            "repos_url": "https://api.github.com/users/telferm57/repos",
            "events_url": "https://api.github.com/users/telferm57/events{/privacy}",
            "received_events_url": "https://api.github.com/users/telferm57/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-09-04T15:51:19Z",
        "updated_at": "2019-09-04T15:51:19Z",
        "author_association": "NONE",
        "body": "When engine='pyarrow', the number of partitions in the dask dataframe is set to the number of divisions -1 . The number of divisions is the number of parts + 1. In this case, we have one file, so npartitions is set to (1 + 1 -1) = 1, whatever the size of the file. Both pyarrow and fastparquet engines induce undesirable behaviour, it seems to me. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/527963656/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/527964628",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-527964628",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 527964628,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyNzk2NDYyOA==",
        "user": {
            "login": "martindurant",
            "id": 6042212,
            "node_id": "MDQ6VXNlcjYwNDIyMTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6042212?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/martindurant",
            "html_url": "https://github.com/martindurant",
            "followers_url": "https://api.github.com/users/martindurant/followers",
            "following_url": "https://api.github.com/users/martindurant/following{/other_user}",
            "gists_url": "https://api.github.com/users/martindurant/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/martindurant/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/martindurant/subscriptions",
            "organizations_url": "https://api.github.com/users/martindurant/orgs",
            "repos_url": "https://api.github.com/users/martindurant/repos",
            "events_url": "https://api.github.com/users/martindurant/events{/privacy}",
            "received_events_url": "https://api.github.com/users/martindurant/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-09-04T15:53:17Z",
        "updated_at": "2019-09-04T15:53:17Z",
        "author_association": "MEMBER",
        "body": "@telferm57 , what do you think the behaviour ought to be? Remember, you can always repartition the dataframe before calling to_parquet.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/527964628/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/529439797",
        "html_url": "https://github.com/dask/dask/issues/5295#issuecomment-529439797",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5295",
        "id": 529439797,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUyOTQzOTc5Nw==",
        "user": {
            "login": "telferm57",
            "id": 16674375,
            "node_id": "MDQ6VXNlcjE2Njc0Mzc1",
            "avatar_url": "https://avatars.githubusercontent.com/u/16674375?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/telferm57",
            "html_url": "https://github.com/telferm57",
            "followers_url": "https://api.github.com/users/telferm57/followers",
            "following_url": "https://api.github.com/users/telferm57/following{/other_user}",
            "gists_url": "https://api.github.com/users/telferm57/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/telferm57/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/telferm57/subscriptions",
            "organizations_url": "https://api.github.com/users/telferm57/orgs",
            "repos_url": "https://api.github.com/users/telferm57/repos",
            "events_url": "https://api.github.com/users/telferm57/events{/privacy}",
            "received_events_url": "https://api.github.com/users/telferm57/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-09-09T12:02:55Z",
        "updated_at": "2019-09-09T15:34:42Z",
        "author_association": "NONE",
        "body": "I think there should be a consistent number of partitions using the same data ... at the moment csv, fastparquet and pyarrow produce different results , with csv the only 'sensible one'  ... ie.e. resulting in partitions of about 100MB\r\n\r\nrepartitioning - with fastparquet, even after repartitioning, this still leaves a vast number of tasks in the graph (1800 or so) , which when you attempt to write the file back using to_parquet, results in 1800 v. small files ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/529439797/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]