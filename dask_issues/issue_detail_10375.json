{
    "url": "https://api.github.com/repos/dask/dask/issues/10375",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/10375/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/10375/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/10375/events",
    "html_url": "https://github.com/dask/dask/issues/10375",
    "id": 1777203428,
    "node_id": "I_kwDOAbcwm85p7fjk",
    "number": 10375,
    "title": "tokenize is non-deterministic for scipy.sparse.{csr,csc}_array",
    "user": {
        "login": "ivirshup",
        "id": 8238804,
        "node_id": "MDQ6VXNlcjgyMzg4MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8238804?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ivirshup",
        "html_url": "https://github.com/ivirshup",
        "followers_url": "https://api.github.com/users/ivirshup/followers",
        "following_url": "https://api.github.com/users/ivirshup/following{/other_user}",
        "gists_url": "https://api.github.com/users/ivirshup/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ivirshup/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ivirshup/subscriptions",
        "organizations_url": "https://api.github.com/users/ivirshup/orgs",
        "repos_url": "https://api.github.com/users/ivirshup/repos",
        "events_url": "https://api.github.com/users/ivirshup/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ivirshup/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 3468123446,
            "node_id": "LA_kwDOAbcwm87Ot102",
            "url": "https://api.github.com/repos/dask/dask/labels/needs%20attention",
            "name": "needs attention",
            "color": "6d626c",
            "default": false,
            "description": "It's been a while since this was pushed on. Needs attention from the owner or a maintainer."
        },
        {
            "id": 3880424463,
            "node_id": "LA_kwDOAbcwm87nSpQP",
            "url": "https://api.github.com/repos/dask/dask/labels/needs%20triage",
            "name": "needs triage",
            "color": "eeeeee",
            "default": false,
            "description": "Needs a response from a contributor"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2023-06-27T15:11:20Z",
    "updated_at": "2023-07-31T01:52:12Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "**Describe the issue**:\r\n\r\n`tokenize` is non-deterministic for the new [scipy.sparse array classes](https://docs.scipy.org/doc/scipy/reference/sparse.html#sparse-array-classes). This is not the case for the older `_matrix` classes.\r\n\r\n**Minimal Complete Verifiable Example**:\r\n\r\n```python\r\nfrom scipy import sparse\r\nfrom dask.base import tokenize\r\n\r\nmtx = sparse.random(100, 100, format=\"csr\")\r\narr = sparse.csr_array(mtx)\r\n\r\nassert tokenize(mtx) == tokenize(mtx)\r\nassert tokenize(arr) == tokenize(arr)\r\n```\r\n\r\n```pytb\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\nCell In[1], line 8\r\n      5 arr = sparse.csr_array(mtx)\r\n      7 assert tokenize(mtx) == tokenize(mtx)\r\n----> 8 assert tokenize(arr) == tokenize(arr)\r\n\r\nAssertionError: \r\n```\r\n\r\nThe same result occurs for the `csc_array` class.\r\n\r\n**Anything else we need to know?**:\r\n\r\n**Environment**:\r\n\r\n- Dask version: 2023.6.1\r\n- Python version: 3.9.16\r\n- Operating System: macOS-13.4.1-x86_64-i386-64bit\r\n- Install method (conda, pip, source): pip\r\n\r\n<details>\r\n<summary> `session_info` output </summary>\r\n\r\n```python\r\n-----\r\nIPython             8.14.0\r\ndask                2023.6.1\r\nscipy               1.11.0\r\nsession_info        1.0.0\r\n-----\r\nasttokens           NA\r\nbackcall            0.2.0\r\ncloudpickle         2.0.0\r\ncolorama            0.4.4\r\ncython_runtime      NA\r\ncytoolz             0.10.1\r\ndecorator           5.1.0\r\nexecuting           0.8.2\r\ngoogle              NA\r\nimportlib_metadata  NA\r\njedi                0.18.1\r\njinja2              3.1.1\r\nmarkupsafe          2.1.1\r\nmpl_toolkits        NA\r\nnumpy               1.24.3\r\npackaging           23.0\r\nparso               0.8.2\r\npexpect             4.8.0\r\npickleshare         0.7.5\r\nprompt_toolkit      3.0.38\r\npsutil              5.9.0\r\nptyprocess          0.7.0\r\npure_eval           0.2.1\r\npygments            2.13.0\r\nruamel              NA\r\nsitecustomize       NA\r\nsix                 1.16.0\r\nsphinxcontrib       NA\r\nstack_data          0.1.4\r\ntblib               1.7.0\r\ntlz                 0.10.1\r\ntoolz               0.12.0\r\ntraitlets           5.6.0\r\ntyping_extensions   NA\r\nwcwidth             0.2.5\r\nxxhash              NA\r\nyaml                5.4.1\r\nzipp                NA\r\n-----\r\nPython 3.9.16 (main, Dec  7 2022, 10:15:13) [Clang 13.0.0 (clang-1300.0.29.30)]\r\nmacOS-13.4.1-x86_64-i386-64bit\r\n-----\r\nSession information updated at 2023-06-27 17:08\r\n```\r\n\r\n</details>\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/10375/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/10375/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}