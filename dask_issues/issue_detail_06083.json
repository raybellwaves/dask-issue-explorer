{
    "url": "https://api.github.com/repos/dask/dask/issues/6083",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/6083/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/6083/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/6083/events",
    "html_url": "https://github.com/dask/dask/issues/6083",
    "id": 597934939,
    "node_id": "MDU6SXNzdWU1OTc5MzQ5Mzk=",
    "number": 6083,
    "title": "Configure Optimization Pipeline",
    "user": {
        "login": "mrocklin",
        "id": 306380,
        "node_id": "MDQ6VXNlcjMwNjM4MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mrocklin",
        "html_url": "https://github.com/mrocklin",
        "followers_url": "https://api.github.com/users/mrocklin/followers",
        "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
        "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
        "organizations_url": "https://api.github.com/users/mrocklin/orgs",
        "repos_url": "https://api.github.com/users/mrocklin/repos",
        "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mrocklin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1342304743,
            "node_id": "MDU6TGFiZWwxMzQyMzA0NzQz",
            "url": "https://api.github.com/repos/dask/dask/labels/core",
            "name": "core",
            "color": "000000",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2020-04-10T15:04:04Z",
    "updated_at": "2021-10-13T04:08:19Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Currently the optimization pipeline for each collection is hardcoded into functions like `dask.array.optimization.optimization`.  In some applications people want to turn off various parts of this pipeline.  For example in https://github.com/napari/napari/issues/718 the Napari folks need to turn off task fusion so that they can get opportunistic caching to work well.  This has come up a few times in other cases as well.\r\n\r\nIt would be nice for users to be able to turn off and on various parts of the optimization pipeline (or even add parts) with some sort of configuration.  This might be some yaml config\r\n\r\n```yaml\r\narray:\r\n  optimization:\r\n  - optimize_blockwise\r\n  - fuse_roots\r\n  - cull\r\n  - hold_keys\r\n  - fuse\r\n  - inline\r\n  - optimize_slices\r\n```\r\n\r\nOr it might be by registering some custom module with hand-specified Python code\r\n\r\n```yaml\r\narray:\r\n  optimization: my_module.optimize\r\n```\r\n\r\nor in python\r\n\r\n```python\r\ndask.config.set(array__optimization=my_optimization_func)\r\n```\r\n\r\nMy guess is that the choice here depends on how easy it is to create a generic optimization pipeline and still keep things efficient.  Currently we're careful about avoiding recomputing dependencies (this can slow things down) but the optimization functions themselves aren't currently that uniform (some do and don't modify dependencies) so maybe we need to establish a more uniform interface so that things can be chained together more robustly.\r\n\r\ncc @jcrist and @eriknw for feedback",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/6083/reactions",
        "total_count": 3,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 1,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/6083/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}