{
    "url": "https://api.github.com/repos/dask/dask/issues/9804",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/9804/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/9804/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/9804/events",
    "html_url": "https://github.com/dask/dask/issues/9804",
    "id": 1519544438,
    "node_id": "I_kwDOAbcwm85akmh2",
    "number": 9804,
    "title": "test_tokenize_object_with_recursion_error() triggers stack overflow on Windows due to IPython imports",
    "user": {
        "login": "pfox89",
        "id": 61061722,
        "node_id": "MDQ6VXNlcjYxMDYxNzIy",
        "avatar_url": "https://avatars.githubusercontent.com/u/61061722?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pfox89",
        "html_url": "https://github.com/pfox89",
        "followers_url": "https://api.github.com/users/pfox89/followers",
        "following_url": "https://api.github.com/users/pfox89/following{/other_user}",
        "gists_url": "https://api.github.com/users/pfox89/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pfox89/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pfox89/subscriptions",
        "organizations_url": "https://api.github.com/users/pfox89/orgs",
        "repos_url": "https://api.github.com/users/pfox89/repos",
        "events_url": "https://api.github.com/users/pfox89/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pfox89/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1887344368,
            "node_id": "MDU6TGFiZWwxODg3MzQ0MzY4",
            "url": "https://api.github.com/repos/dask/dask/labels/tests",
            "name": "tests",
            "color": "a0f9b4",
            "default": false,
            "description": "Unit tests and/or continuous integration"
        },
        {
            "id": 3468123446,
            "node_id": "LA_kwDOAbcwm87Ot102",
            "url": "https://api.github.com/repos/dask/dask/labels/needs%20attention",
            "name": "needs attention",
            "color": "6d626c",
            "default": false,
            "description": "It's been a while since this was pushed on. Needs attention from the owner or a maintainer."
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2023-01-04T20:39:48Z",
    "updated_at": "2024-04-08T01:45:35Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "<!-- Please include a self-contained copy-pastable example that generates the issue if possible.\r\n\r\nPlease be concise with code posted. See guidelines below on how to provide a good bug report:\r\n\r\n- Craft Minimal Bug Reports http://matthewrocklin.com/blog/work/2018/02/28/minimal-bug-reports\r\n- Minimal Complete Verifiable Examples https://stackoverflow.com/help/mcve\r\n\r\nBug reports that follow these guidelines are easier to diagnose, and so are often handled much more quickly.\r\n-->\r\n\r\nRunning the following test:\r\n`py.test dask -k test_tokenize_object_with_recursion_error`\r\n\r\nTriggers the following error:\r\n\r\n```\r\nask/tests/test_base.py::test_tokenize_object_with_recursion_error Windows fatal exception: stack overflow\r\n\r\nThread 0x00005a34 (most recent call first):\r\n  File \"C:\\Program Files\\Python310\\lib\\concurrent\\futures\\thread.py\", line 81 in _worker\r\n  File \"C:\\Program Files\\Python310\\lib\\threading.py\", line 946 in run\r\n  File \"C:\\Program Files\\Python310\\lib\\threading.py\", line 1009 in _bootstrap_inner\r\n  File \"C:\\Program Files\\Python310\\lib\\threading.py\", line 966 in _bootstrap\r\n\r\nThread 0x00005de4 (most recent call first):\r\n  File \"C:\\Program Files\\Python310\\lib\\socket.py\", line 293 in accept\r\n  File \"C:\\Users\\pafox\\Code\\dask\\.venv\\lib\\site-packages\\pytest_rerunfailures.py\", line 457 in run_server\r\n  File \"C:\\Program Files\\Python310\\lib\\threading.py\", line 946 in run\r\n  File \"C:\\Program Files\\Python310\\lib\\threading.py\", line 1009 in _bootstrap_inner\r\n  File \"C:\\Program Files\\Python310\\lib\\threading.py\", line 966 in _bootstrap\r\n\r\nCurrent thread 0x00000b14 (most recent call first):\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 639 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 961 in normalize_dict\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 978 in _normalize_seq_func\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\base.py\", line 992 in normalize_seq\r\n  File \"C:\\Users\\pafox\\Code\\dask\\dask\\dask\\utils.py\", line 640 in __call__\r\n  ...\r\n```\r\n\r\nThis issue appears to be related to an increased recursion limit, set by an indirect import of jedi from IPython, which is imported in turn by test_typing.py:\r\n```from IPython.display import DisplayObject```\r\n\r\nThis can be fixed by resetting the recursion limit to the default of 1000 after this import.\r\n\r\nIn theory this could also be fixed by increasing the stack size of the pytest main thread, but there doesn't seem to be any easy way to do this.\r\n\r\n- Dask version: dask-2022.12.1+16.gf721de65f\r\n- Python version: 3.10.4\r\n- Operating System: Windows 11\r\n- Install method (conda, pip, source): source\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/9804/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/9804/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}