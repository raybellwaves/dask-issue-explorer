[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/311371462",
        "html_url": "https://github.com/dask/dask/issues/2488#issuecomment-311371462",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2488",
        "id": 311371462,
        "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTM3MTQ2Mg==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2017-06-27T14:14:31Z",
        "updated_at": "2017-06-27T14:14:31Z",
        "author_association": "MEMBER",
        "body": "If you haven't already you may want to read the conversation here: https://github.com/pydata/xarray/issues/798",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/311371462/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/311379719",
        "html_url": "https://github.com/dask/dask/issues/2488#issuecomment-311379719",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2488",
        "id": 311379719,
        "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTM3OTcxOQ==",
        "user": {
            "login": "martindurant",
            "id": 6042212,
            "node_id": "MDQ6VXNlcjYwNDIyMTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6042212?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/martindurant",
            "html_url": "https://github.com/martindurant",
            "followers_url": "https://api.github.com/users/martindurant/followers",
            "following_url": "https://api.github.com/users/martindurant/following{/other_user}",
            "gists_url": "https://api.github.com/users/martindurant/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/martindurant/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/martindurant/subscriptions",
            "organizations_url": "https://api.github.com/users/martindurant/orgs",
            "repos_url": "https://api.github.com/users/martindurant/repos",
            "events_url": "https://api.github.com/users/martindurant/events{/privacy}",
            "received_events_url": "https://api.github.com/users/martindurant/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2017-06-27T14:40:55Z",
        "updated_at": "2017-06-27T14:40:55Z",
        "author_association": "MEMBER",
        "body": "That is quite a path; but I wasn't sure whether the brief mention of writing had been solved or not. Certainly it's not in dask.array:\r\n```\r\nIn [1]: from dask.distributed import Client\r\nIn [2]: c = Client(n_workers=4)\r\nIn [3]: import dask.array as da\r\nIn [4]: x = da.random.random(1000, chunks=(100, ))\r\nIn [5]: x.to_hdf5('out.hd5', '/data')\r\ndistributed.protocol.core - CRITICAL - Failed to Serialize\r\nTraceback (most recent call last):\r\n  File \"/Users/mdurant/Downloads/distributed/distributed/protocol/pickle.py\", line 38, in dumps\r\n    result = pickle.dumps(x, protocol=pickle.HIGHEST_PROTOCOL)\r\nAttributeError: Can't pickle local object 'insert_to_ooc.<locals>.store'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/Users/mdurant/Downloads/distributed/distributed/protocol/core.py\", line 43, in dumps\r\n    for key, value in data.items()\r\n  File \"/Users/mdurant/Downloads/distributed/distributed/protocol/core.py\", line 44, in <dictcomp>\r\n    if type(value) is Serialize}\r\n  File \"/Users/mdurant/Downloads/distributed/distributed/protocol/serialize.py\", line 138, in serialize\r\n    header, frames = {}, [pickle.dumps(x)]\r\n  File \"/Users/mdurant/Downloads/distributed/distributed/protocol/pickle.py\", line 51, in dumps\r\n    return cloudpickle.dumps(x, protocol=pickle.HIGHEST_PROTOCOL)\r\n  File \"/Users/mdurant/anaconda/lib/python3.5/site-packages/cloudpickle/cloudpickle.py\", line 706, in dumps\r\n    cp.dump(obj)\r\n  File \"/Users/mdurant/anaconda/lib/python3.5/site-packages/cloudpickle/cloudpickle.py\", line 146, in dump\r\n    return Pickler.dump(self, obj)\r\n  File \"/Users/mdurant/anaconda/lib/python3.5/pickle.py\", line 408, in dump\r\n    self.save(obj)\r\n  File \"/Users/mdurant/anaconda/lib/python3.5/pickle.py\", line 475, in save\r\n    f(self, obj) # Call unbound method with explicit self\r\n  File \"/Users/mdurant/anaconda/lib/python3.5/pickle.py\", line 740, in save_tuple\r\n    save(element)\r\n  File \"/Users/mdurant/anaconda/lib/python3.5/pickle.py\", line 495, in save\r\n    rv = reduce(self.proto)\r\nTypeError: can't pickle _thread.lock objects\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/311379719/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/311395178",
        "html_url": "https://github.com/dask/dask/issues/2488#issuecomment-311395178",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2488",
        "id": 311395178,
        "node_id": "MDEyOklzc3VlQ29tbWVudDMxMTM5NTE3OA==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2017-06-27T15:29:58Z",
        "updated_at": "2017-06-27T15:29:58Z",
        "author_association": "MEMBER",
        "body": "No, this hasn't been resolved.  Mostly I wanted to make sure that you were aware of the other challenges here, like performance issues when opening/closing hdf files repeatedly.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/311395178/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/358206909",
        "html_url": "https://github.com/dask/dask/issues/2488#issuecomment-358206909",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2488",
        "id": 358206909,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODIwNjkwOQ==",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-01-17T06:06:11Z",
        "updated_at": "2018-01-17T06:06:11Z",
        "author_association": "MEMBER",
        "body": "Just leaving this note here, it appears [this is the relevant locking code]( https://github.com/dask/dask/blob/0.16.1/dask/dataframe/io/hdf.py#L163-L180 ) that `dask.dataframe` uses, which `dask.array` would need for `to_hdf5`. It's unclear to me whether that `get` needs to be used beyond lock determination for `dask.array` or whether `store` can simply take over at that point.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/358206909/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/358207070",
        "html_url": "https://github.com/dask/dask/issues/2488#issuecomment-358207070",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2488",
        "id": 358207070,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM1ODIwNzA3MA==",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-01-17T06:07:12Z",
        "updated_at": "2018-01-17T06:07:12Z",
        "author_association": "MEMBER",
        "body": "Also linking issue ( https://github.com/dask/dask/issues/3074 ) in case anyone here as other thoughts or suggestions to add to the proposals there.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/358207070/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]