{
    "url": "https://api.github.com/repos/dask/dask/issues/3587",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/3587/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/3587/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/3587/events",
    "html_url": "https://github.com/dask/dask/issues/3587",
    "id": 331007078,
    "node_id": "MDU6SXNzdWUzMzEwMDcwNzg=",
    "number": 3587,
    "title": "Convention for automatic rechunking",
    "user": {
        "login": "mrocklin",
        "id": 306380,
        "node_id": "MDQ6VXNlcjMwNjM4MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mrocklin",
        "html_url": "https://github.com/mrocklin",
        "followers_url": "https://api.github.com/users/mrocklin/followers",
        "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
        "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
        "organizations_url": "https://api.github.com/users/mrocklin/orgs",
        "repos_url": "https://api.github.com/users/mrocklin/repos",
        "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mrocklin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 242862305,
            "node_id": "MDU6TGFiZWwyNDI4NjIzMDU=",
            "url": "https://api.github.com/repos/dask/dask/labels/array",
            "name": "array",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2018-06-10T22:12:52Z",
    "updated_at": "2018-06-18T13:36:34Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "There are a few operations where we can (and possibly should) meaningfully rechunk arrays for users:\r\n\r\n1.  atop operations that include outer products, like tensordot\r\n2.  linear algebra operations like qr and svd\r\n3.  fft, where we need active dimensions to have a single chunk\r\n4.  apply_gufunc, where we need core dimensions to have a single chunk\r\n5.  from_array ?\r\n6.  ...\r\n\r\nIn all of these cases we generally want to make a few dimensions have as few chunks as possible (often one) and then sometimes make other dimensions as large as possible while respecting chunk size memory limits, while still enabling some parallelism.  This can strongly affect performance.\r\n\r\nFor some operations like `fft` we currently raise informative errors that encourage users to do the right thing.  For other operations like `atop` we don't necessarily want to err, but do want to encourage users to do the right thing.  We might choose to do some of this automatically.  If so, we should do it consistently across all operations in order to avoid API diversity.\r\n\r\nI'll propose a `rechunk=` keyword with the following semantics:\r\n\r\n1. `rechunk=False` does no rechunking.\r\n2.  `rechunk=True` tells the operation to do whatever it wants to perform automatic rechunking\r\n3.  `rechunk='10MB'` or other string tells the operation to do whatever it wants to perform automatic rechunking, targetting chunk sizes of 10MB.  Otherwise we default to `dask.config.get('array.chunk-size')` as is done now.\r\n\r\nI'll also suggest that we leave it to the operations whether or not they choose to do automatic rechunking.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/3587/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/3587/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}