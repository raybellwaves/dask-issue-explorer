{
    "url": "https://api.github.com/repos/dask/dask/issues/4386",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/4386/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/4386/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/4386/events",
    "html_url": "https://github.com/dask/dask/issues/4386",
    "id": 399212646,
    "node_id": "MDU6SXNzdWUzOTkyMTI2NDY=",
    "number": 4386,
    "title": "Issue when pass filtered dask DataFrame to sklearn.metrics mean_absolute_error",
    "user": {
        "login": "quickpanda",
        "id": 9373761,
        "node_id": "MDQ6VXNlcjkzNzM3NjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9373761?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/quickpanda",
        "html_url": "https://github.com/quickpanda",
        "followers_url": "https://api.github.com/users/quickpanda/followers",
        "following_url": "https://api.github.com/users/quickpanda/following{/other_user}",
        "gists_url": "https://api.github.com/users/quickpanda/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/quickpanda/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/quickpanda/subscriptions",
        "organizations_url": "https://api.github.com/users/quickpanda/orgs",
        "repos_url": "https://api.github.com/users/quickpanda/repos",
        "events_url": "https://api.github.com/users/quickpanda/events{/privacy}",
        "received_events_url": "https://api.github.com/users/quickpanda/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2019-01-15T07:02:33Z",
    "updated_at": "2019-01-18T17:06:11Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "issue when pass filtered dask DataFrame to sklearn.metrccs\r\nwhen use delayed, the result is not correct\r\nsee the following minimal example \r\n```\r\nimport dask\r\nimport sklearn\r\nprint(dask.__version__) # 1.0.0\r\nprint(sklearn.__version__) # 0.20.2\r\nfrom sklearn.metrics import mean_absolute_error\r\nimport pandas as pd\r\nimport dask.dataframe as dd\r\ns1 = pd.DataFrame({\"y1\": [1,2,3,4,5,6,7,8,9,10]})\r\ns2 = pd.DataFrame({\"y2\": [4,5,6,7,8,9,10,11,12,13]})\r\ns3 = pd.DataFrame({\"y3\": [0,0,0,1,1,0,0,1,1,1]})\r\nd1 = dd.from_pandas(s1, npartitions=3)\r\nd2 = dd.from_pandas(s2, npartitions=2)\r\nd3 = dd.from_pandas(s3, npartitions=5)\r\nfrom dask import delayed\r\nd=d1.merge(d2,how='inner',left_index=True,right_index=True).merge(d3,how='inner',left_index=True,right_index=True)\r\np=d[d['y3']==1]\r\ntask=delayed(mean_absolute_error)(p['y1'],p['y2'])\r\nprint(task.compute()) # return 0.0 which is wrong\r\nprint(mean_absolute_error(p['y1'],p['y2'])) # return 3.0\r\n```",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/4386/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/4386/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}