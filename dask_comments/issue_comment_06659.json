[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/696662077",
        "html_url": "https://github.com/dask/dask/issues/6659#issuecomment-696662077",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6659",
        "id": 696662077,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5NjY2MjA3Nw==",
        "user": {
            "login": "TomAugspurger",
            "id": 1312546,
            "node_id": "MDQ6VXNlcjEzMTI1NDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1312546?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TomAugspurger",
            "html_url": "https://github.com/TomAugspurger",
            "followers_url": "https://api.github.com/users/TomAugspurger/followers",
            "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
            "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
            "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
            "repos_url": "https://api.github.com/users/TomAugspurger/repos",
            "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-22T11:28:21Z",
        "updated_at": "2020-09-22T11:28:36Z",
        "author_association": "MEMBER",
        "body": "This is by design. When you join on a column rather than an index the index is reset. Dask doesn't know the sizes of the partitions so there's no way to get a consecutive index without computation.\r\n\r\nAdding a note in this in the docs at https://docs.dask.org/en/latest/dataframe-joins.html and the docstrings would be welcome, if you're interested in helping.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/696662077/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/699478787",
        "html_url": "https://github.com/dask/dask/issues/6659#issuecomment-699478787",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6659",
        "id": 699478787,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY5OTQ3ODc4Nw==",
        "user": {
            "login": "chouhanaryan",
            "id": 46817791,
            "node_id": "MDQ6VXNlcjQ2ODE3Nzkx",
            "avatar_url": "https://avatars.githubusercontent.com/u/46817791?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/chouhanaryan",
            "html_url": "https://github.com/chouhanaryan",
            "followers_url": "https://api.github.com/users/chouhanaryan/followers",
            "following_url": "https://api.github.com/users/chouhanaryan/following{/other_user}",
            "gists_url": "https://api.github.com/users/chouhanaryan/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/chouhanaryan/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/chouhanaryan/subscriptions",
            "organizations_url": "https://api.github.com/users/chouhanaryan/orgs",
            "repos_url": "https://api.github.com/users/chouhanaryan/repos",
            "events_url": "https://api.github.com/users/chouhanaryan/events{/privacy}",
            "received_events_url": "https://api.github.com/users/chouhanaryan/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-26T10:51:55Z",
        "updated_at": "2020-09-26T11:38:04Z",
        "author_association": "NONE",
        "body": "Hi, I'd like to take this up.\r\n\r\nSo I've been trying to experiment with join & merge a bit and what I'm seeing is that the behavior described in this issue is only seen in `merge` and not in `join`.\r\nFor reference, say I run the following -\r\n```python\r\n>>> import pandas as pd\r\n>>> import dask.dataframe as dd\r\n\n>>> a =\u200b\u00a0\u200bdd\u200b.\u200bfrom_pandas\u200b(\u200bpd\u200b.\u200bDataFrame\u200b({\u200b'a'\u200b:\u00a0[\u200b1\u200b,\u200b 2\u200b,\u200b 3\u200b,\u200b 4\u200b]}),\u00a0\u200bnpartitions\u200b=\u200b2\u200b)\n>>> \u200bb\u200b\u00a0\u200b=\u200b\u00a0\u200bpd\u200b.\u200bDataFrame\u200b({\u200b'a'\u200b:\u00a0[\u200b1\u200b,\u200b 2\u200b,\u200b 3\u200b,\u200b 4\u200b],\u00a0\u200b'b'\u200b:\u00a0[\u200b2\u200b,\u200b 3\u200b,\u200b 4\u200b,\u200b 5\u200b]})\n\r\n>>> a.join(b, rsuffix='r').compute()\r\n   a  ar  b\r\n0  1   1  2\r\n1  2   2  3\r\n2  3   3  4\r\n3  4   4  5\r\n\r\n>>> a.join(b, on='a', rsuffix='r').compute()\r\n   a   ar    b\r\n0  1  2.0  3.0\r\n1  2  3.0  4.0\r\n2  3  4.0  5.0\r\n3  4  NaN  NaN\r\n```\r\n\r\nNeither of the last two results result in the behavior described in this issue (indices being reset). Since this is to be described in the documentation of [Joins](https://docs.dask.org/en/latest/dataframe-joins.html) (as mentioned above), I'm a bit confused as to how it fits there. Wouldn't documenting it in [Merge](https://docs.dask.org/en/latest/dataframe-api.html#dask.dataframe.DataFrame.merge) be more appropriate - or am I missing something? \ud83d\ude05\r\nDo let me know, thanks.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/699478787/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/700757780",
        "html_url": "https://github.com/dask/dask/issues/6659#issuecomment-700757780",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6659",
        "id": 700757780,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcwMDc1Nzc4MA==",
        "user": {
            "login": "TomAugspurger",
            "id": 1312546,
            "node_id": "MDQ6VXNlcjEzMTI1NDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1312546?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TomAugspurger",
            "html_url": "https://github.com/TomAugspurger",
            "followers_url": "https://api.github.com/users/TomAugspurger/followers",
            "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
            "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
            "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
            "repos_url": "https://api.github.com/users/TomAugspurger/repos",
            "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-29T14:48:52Z",
        "updated_at": "2020-09-29T14:48:52Z",
        "author_association": "MEMBER",
        "body": "It's possible that there's different (buggy?) behavior when joining dask dataframes with pandas ones.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/700757780/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/749380391",
        "html_url": "https://github.com/dask/dask/issues/6659#issuecomment-749380391",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6659",
        "id": 749380391,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc0OTM4MDM5MQ==",
        "user": {
            "login": "Sushil-Deore",
            "id": 69260855,
            "node_id": "MDQ6VXNlcjY5MjYwODU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/69260855?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sushil-Deore",
            "html_url": "https://github.com/Sushil-Deore",
            "followers_url": "https://api.github.com/users/Sushil-Deore/followers",
            "following_url": "https://api.github.com/users/Sushil-Deore/following{/other_user}",
            "gists_url": "https://api.github.com/users/Sushil-Deore/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Sushil-Deore/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Sushil-Deore/subscriptions",
            "organizations_url": "https://api.github.com/users/Sushil-Deore/orgs",
            "repos_url": "https://api.github.com/users/Sushil-Deore/repos",
            "events_url": "https://api.github.com/users/Sushil-Deore/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Sushil-Deore/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-12-22T06:54:25Z",
        "updated_at": "2020-12-22T06:54:25Z",
        "author_association": "NONE",
        "body": "Hi, we can use merge here, \r\n```\r\nimport pandas as pd\r\nimport dask.dataframe as dd\r\n\r\na = dd.from_pandas(pd.DataFrame({'a': [1,2,3,4]}), npartitions=2)\r\nb = pd.DataFrame({'a': [1,2,3,4], 'b': [2,3,4,5]})\r\n\r\na.merge(b, on='a').compute()\r\n\r\n\ta\tb\r\n0\t1\t2\r\n1\t2\t3\r\n0\t3\t4\r\n1\t4\t5\r\n\r\n# To solving index problem we can use reset_index from Pandas\r\n\r\n(a.merge(b, on='a').compute()).reset_index(drop=True)\r\n\r\n\ta\tb\r\n0\t1\t2\r\n1\t2\t3\r\n2\t3\t4\r\n3\t4\t5\r\n\r\n```\r\nPlease let me know if it's useful. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/749380391/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/774104262",
        "html_url": "https://github.com/dask/dask/issues/6659#issuecomment-774104262",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6659",
        "id": 774104262,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3NDEwNDI2Mg==",
        "user": {
            "login": "SultanOrazbayev",
            "id": 20208402,
            "node_id": "MDQ6VXNlcjIwMjA4NDAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/20208402?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SultanOrazbayev",
            "html_url": "https://github.com/SultanOrazbayev",
            "followers_url": "https://api.github.com/users/SultanOrazbayev/followers",
            "following_url": "https://api.github.com/users/SultanOrazbayev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SultanOrazbayev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SultanOrazbayev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SultanOrazbayev/subscriptions",
            "organizations_url": "https://api.github.com/users/SultanOrazbayev/orgs",
            "repos_url": "https://api.github.com/users/SultanOrazbayev/repos",
            "events_url": "https://api.github.com/users/SultanOrazbayev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SultanOrazbayev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-05T15:30:50Z",
        "updated_at": "2021-02-05T15:30:50Z",
        "author_association": "CONTRIBUTOR",
        "body": "> This is by design. When you join on a column rather than an index the index is reset. Dask doesn't know the sizes of the partitions so there's no way to get a consecutive index without computation.\r\n> \r\n> Adding a note in this in the docs at https://docs.dask.org/en/latest/dataframe-joins.html and the docstrings would be welcome, if you're interested in helping.\r\n\r\n@TomAugspurger , if possible, could you take a look at the answer in this link https://stackoverflow.com/questions/65832338/process-dask-dataframe-by-chunks-of-rows. Do you think this is something that could be integrated into the code to modify the behaviour of `.reset_index()` to assign consecutive indices? I'm happy to start a PR, but not sure if this is still a hack (and won't scale) or if it can qualify for a commit.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/774104262/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/774107227",
        "html_url": "https://github.com/dask/dask/issues/6659#issuecomment-774107227",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6659",
        "id": 774107227,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3NDEwNzIyNw==",
        "user": {
            "login": "TomAugspurger",
            "id": 1312546,
            "node_id": "MDQ6VXNlcjEzMTI1NDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1312546?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TomAugspurger",
            "html_url": "https://github.com/TomAugspurger",
            "followers_url": "https://api.github.com/users/TomAugspurger/followers",
            "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
            "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
            "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
            "repos_url": "https://api.github.com/users/TomAugspurger/repos",
            "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-05T15:35:38Z",
        "updated_at": "2021-02-05T15:35:38Z",
        "author_association": "MEMBER",
        "body": "I won\u2019t be able to take a look anytime soon.\n\nBut I would guess that\n\n\n  *   We probably don\u2019t want to change the default behavior\n  *   We consider an option to `reset_index` that would ensure an ascending index, at the cost of computation of the graph up till that point\n\nNote that there\u2019s some interest / effort around adding partition sizes to the dask dataframe metadata, which would sometimes make this cheap to do (though not in the common case of reading from CSV).\n\n\nFrom: Sultan Orazbayev<mailto:notifications@github.com>\nSent: Friday, February 5, 2021 9:31 AM\nTo: dask/dask<mailto:dask@noreply.github.com>\nCc: Tom Augspurger<mailto:tom.augspurger88+dask@gmail.com>; Mention<mailto:mention@noreply.github.com>\nSubject: Re: [dask/dask] Merge returns duplicate indices (#6659)\n\n\nThis is by design. When you join on a column rather than an index the index is reset. Dask doesn't know the sizes of the partitions so there's no way to get a consecutive index without computation.\n\nAdding a note in this in the docs at https://docs.dask.org/en/latest/dataframe-joins.html<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fdocs.dask.org%2Fen%2Flatest%2Fdataframe-joins.html&data=04%7C01%7Ctaugspurger%40microsoft.com%7C4d7a3bb2a20a4f9754d008d8c9eb1169%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637481358737176597%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=elDxsw0h39sT0BTvT3MkAd81ynuow7PitFkzCCW73Iw%3D&reserved=0> and the docstrings would be welcome, if you're interested in helping.\n\n@TomAugspurger<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FTomAugspurger&data=04%7C01%7Ctaugspurger%40microsoft.com%7C4d7a3bb2a20a4f9754d008d8c9eb1169%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637481358737176597%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=%2BlezxspU8ycBLE344rIk6nEz2iMFQPWp6irNyiUEwHU%3D&reserved=0> , if possible, could you take a look at the answer in this link https://stackoverflow.com/questions/65832338/process-dask-dataframe-by-chunks-of-rows<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F65832338%2Fprocess-dask-dataframe-by-chunks-of-rows&data=04%7C01%7Ctaugspurger%40microsoft.com%7C4d7a3bb2a20a4f9754d008d8c9eb1169%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637481358737186552%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=uQ%2FdZo2nI6413ukPQbkFo93Y%2BQD1tklHR1CdxsvnbjY%3D&reserved=0>. Do you think this is something that could be integrated into the code to modify the behaviour of .reset_index() to assign consecutive indices? I'm happy to start a PR, but not sure if this is still a hack (and won't scale) or if it can qualify for a commit.\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fdask%2Fdask%2Fissues%2F6659%23issuecomment-774104262&data=04%7C01%7Ctaugspurger%40microsoft.com%7C4d7a3bb2a20a4f9754d008d8c9eb1169%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637481358737186552%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=lGzFedpu5quoZNcOTeEgi8Cd4FJWw1T5tXfOgJtkj6o%3D&reserved=0>, or unsubscribe<https://nam06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fnotifications%2Funsubscribe-auth%2FAAKAOIS4ATS5QICDPCXR3VLS5QFLXANCNFSM4RVRTN2A&data=04%7C01%7Ctaugspurger%40microsoft.com%7C4d7a3bb2a20a4f9754d008d8c9eb1169%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C637481358737196510%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=srfy1HaycH6Vy7j58ugSr8EstavwC3uxP0a963lbjhY%3D&reserved=0>.\n\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/774107227/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]