{
    "url": "https://api.github.com/repos/dask/dask/issues/10019",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/10019/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/10019/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/10019/events",
    "html_url": "https://github.com/dask/dask/issues/10019",
    "id": 1609118512,
    "node_id": "I_kwDOAbcwm85f6TMw",
    "number": 10019,
    "title": "Annotate HLG with line of user code that created each layer",
    "user": {
        "login": "gjoseph92",
        "id": 3309802,
        "node_id": "MDQ6VXNlcjMzMDk4MDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3309802?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gjoseph92",
        "html_url": "https://github.com/gjoseph92",
        "followers_url": "https://api.github.com/users/gjoseph92/followers",
        "following_url": "https://api.github.com/users/gjoseph92/following{/other_user}",
        "gists_url": "https://api.github.com/users/gjoseph92/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/gjoseph92/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gjoseph92/subscriptions",
        "organizations_url": "https://api.github.com/users/gjoseph92/orgs",
        "repos_url": "https://api.github.com/users/gjoseph92/repos",
        "events_url": "https://api.github.com/users/gjoseph92/events{/privacy}",
        "received_events_url": "https://api.github.com/users/gjoseph92/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 2156573524,
            "node_id": "MDU6TGFiZWwyMTU2NTczNTI0",
            "url": "https://api.github.com/repos/dask/dask/labels/highlevelgraph",
            "name": "highlevelgraph",
            "color": "8c24d6",
            "default": false,
            "description": "Issues relating to HighLevelGraphs."
        },
        {
            "id": 3468123446,
            "node_id": "LA_kwDOAbcwm87Ot102",
            "url": "https://api.github.com/repos/dask/dask/labels/needs%20attention",
            "name": "needs attention",
            "color": "6d626c",
            "default": false,
            "description": "It's been a while since this was pushed on. Needs attention from the owner or a maintainer."
        },
        {
            "id": 3798450420,
            "node_id": "LA_kwDOAbcwm87iZ8D0",
            "url": "https://api.github.com/repos/dask/dask/labels/feature",
            "name": "feature",
            "color": "b0f0fa",
            "default": false,
            "description": "Something is missing"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 1,
    "created_at": "2023-03-03T19:04:20Z",
    "updated_at": "2024-03-04T01:47:58Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "`Computation`s on the scheduler currently capture the user code that called `compute`, for diagnostic purposes. This often misses the important part though, if the code that called `compute` and the code that actually generated the graph are in different places/functions/Jupyter notebook cells.\r\n\r\nWhat might be more useful would be to track which line of user code created each layer in the HLG. This could be used for all sorts of purposes to help users better understand what's going on:\r\n* Showing a \"line-profiler-style\" flamegraph about what lines of _user code_ are contributing the most to runtime or memory use; see https://github.com/dask/community/issues/301#issuecomment-1398668675.\r\n* Mapping errors in tasks back to the line of user code that created the task\r\n* \"Query-plan-style\" visualization of the HLG, showing progress, parallelism, and (a snippet of) the line of user code running?\r\n\r\nOpen question whether we'd want to capture:\r\n* just the line number and file\r\n* partial stack trace (line number and file of prev N frames)\r\n* full stack trace\r\n* any of the above, but also with the actual text of the code\r\n\r\nxref https://github.com/dask/dask/issues/7933",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/10019/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/10019/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}