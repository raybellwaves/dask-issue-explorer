{
    "url": "https://api.github.com/repos/dask/dask/issues/6385",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/6385/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/6385/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/6385/events",
    "html_url": "https://github.com/dask/dask/issues/6385",
    "id": 654043957,
    "node_id": "MDU6SXNzdWU2NTQwNDM5NTc=",
    "number": 6385,
    "title": "What should define a \"duck Dask Array\"?",
    "user": {
        "login": "jthielen",
        "id": 3460034,
        "node_id": "MDQ6VXNlcjM0NjAwMzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3460034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jthielen",
        "html_url": "https://github.com/jthielen",
        "followers_url": "https://api.github.com/users/jthielen/followers",
        "following_url": "https://api.github.com/users/jthielen/following{/other_user}",
        "gists_url": "https://api.github.com/users/jthielen/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jthielen/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jthielen/subscriptions",
        "organizations_url": "https://api.github.com/users/jthielen/orgs",
        "repos_url": "https://api.github.com/users/jthielen/repos",
        "events_url": "https://api.github.com/users/jthielen/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jthielen/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 242862305,
            "node_id": "MDU6TGFiZWwyNDI4NjIzMDU=",
            "url": "https://api.github.com/repos/dask/dask/labels/array",
            "name": "array",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 1372867996,
            "node_id": "MDU6TGFiZWwxMzcyODY3OTk2",
            "url": "https://api.github.com/repos/dask/dask/labels/discussion",
            "name": "discussion",
            "color": "bebaf4",
            "default": false,
            "description": "Discussing a topic with no specific actions yet"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 11,
    "created_at": "2020-07-09T13:03:36Z",
    "updated_at": "2021-10-13T05:52:11Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "As a part of supporting units with Dask in xarray, [work is being undertaken](https://github.com/hgrecco/pint/pull/1129) to implement the Dask collections interface on Pint Quantities to allow them to act as a \"duck Dask Array\" or \"Dask Array-like\" so that xarray can perform all its usual Dask-related functionality with a Pint Quantity in-between the xarray data structure and Dask Array (since, in the [generally accepted typecasting heirachy](https://pint.readthedocs.io/en/latest/numpy.html#Technical-Commentary), xarray wraps Pint and Pint wraps Dask, which allows for unit calculation at the construction rather than compute step). \r\n\r\nGiven that most if not all of xarray's current Dask support is special cased based on checking for instances of Dask Arrays, the question that has arisen is [how should xarray check for a duck Dask Array](https://github.com/pydata/xarray/issues/4208)? @crusaderky [suggested](https://github.com/pydata/xarray/issues/4208#issuecomment-656068407) asking the Dask team for a formalized answer that xarray (and really any other library that would have types above Dask Array on the type casting hierarchy) could implement, so I wish to do so here.\r\n\r\nIdeas that have been brought up in https://github.com/pydata/xarray/issues/4208 and other past xarray/pint issues include\r\n- [having a non-None `chunks` attribute](https://github.com/pydata/xarray/issues/4208#issuecomment-655810311)\r\n- [numpy-array-like AND has a chunks method AND the chunks method returns a tuple](https://github.com/pydata/xarray/issues/4208#issuecomment-656068407)\r\n- [Having specifically `__array_function__` and `__dask_graph__`](https://github.com/pydata/xarray/issues/525#issuecomment-531603357)\r\n- Having some amount of the Dask collection interface dunder methods (https://github.com/pydata/xarray/issues/4208#issuecomment-655820797, https://github.com/hgrecco/pint/issues/883#issuecomment-531691097)\r\n\r\nxref https://github.com/pydata/xarray/issues/4208\r\n\r\ncc @shoyer, @crusaderky, @keewis, @rpmanser",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/6385/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/6385/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}