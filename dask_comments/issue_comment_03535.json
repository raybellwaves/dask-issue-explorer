[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/392296055",
        "html_url": "https://github.com/dask/dask/issues/3535#issuecomment-392296055",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3535",
        "id": 392296055,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjI5NjA1NQ==",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-05-27T00:11:39Z",
        "updated_at": "2018-05-27T00:11:39Z",
        "author_association": "MEMBER",
        "body": "IIUC we want `roll` to not split a chunk if that chunk fills the axis being rolled, but instead we want it to perform the `roll` operation within the chunks to keep the chunks intact? If so, that sounds reasonable. Any interest in doing a PR?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/392296055/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/392897540",
        "html_url": "https://github.com/dask/dask/issues/3535#issuecomment-392897540",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3535",
        "id": 392897540,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM5Mjg5NzU0MA==",
        "user": {
            "login": "rabernat",
            "id": 1197350,
            "node_id": "MDQ6VXNlcjExOTczNTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1197350?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rabernat",
            "html_url": "https://github.com/rabernat",
            "followers_url": "https://api.github.com/users/rabernat/followers",
            "following_url": "https://api.github.com/users/rabernat/following{/other_user}",
            "gists_url": "https://api.github.com/users/rabernat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rabernat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rabernat/subscriptions",
            "organizations_url": "https://api.github.com/users/rabernat/orgs",
            "repos_url": "https://api.github.com/users/rabernat/repos",
            "events_url": "https://api.github.com/users/rabernat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rabernat/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-05-29T18:55:07Z",
        "updated_at": "2018-05-29T18:55:07Z",
        "author_association": "MEMBER",
        "body": "> IIUC we want roll to not split a chunk if that chunk fills the axis being rolled, but instead we want it to perform the roll operation within the chunks to keep the chunks intact? If so, that sounds reasonable. Any interest in doing a PR?\r\n\r\nYes this is what I meant. But I was suggesting something more ambitious that just modifying roll; I am suggesting to automatically detect such cases where the operations all occur on contiguous chunks and then fusing them into a single task. I recognize this may be too vague and complex to be actionable.\r\n\r\nUpdating roll will not help xarray or xgcm, which instead implement their own slightly different but fundamentally similar versions of roll. But automatic fusing of such operations would.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/392897540/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/392906986",
        "html_url": "https://github.com/dask/dask/issues/3535#issuecomment-392906986",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3535",
        "id": 392906986,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM5MjkwNjk4Ng==",
        "user": {
            "login": "rabernat",
            "id": 1197350,
            "node_id": "MDQ6VXNlcjExOTczNTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1197350?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rabernat",
            "html_url": "https://github.com/rabernat",
            "followers_url": "https://api.github.com/users/rabernat/followers",
            "following_url": "https://api.github.com/users/rabernat/following{/other_user}",
            "gists_url": "https://api.github.com/users/rabernat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rabernat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rabernat/subscriptions",
            "organizations_url": "https://api.github.com/users/rabernat/orgs",
            "repos_url": "https://api.github.com/users/rabernat/repos",
            "events_url": "https://api.github.com/users/rabernat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rabernat/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-05-29T19:15:36Z",
        "updated_at": "2018-05-29T19:15:36Z",
        "author_association": "MEMBER",
        "body": "To be more concrete, look at this graph:\r\n```python\r\nroll_with_dask(data, 1).rechunk(data.chunks).visualize(optimize_graph=True)\r\n```\r\n![image](https://user-images.githubusercontent.com/1197350/40680028-d2250d42-6352-11e8-841b-1c2d9430ec1c.png)\r\n\r\nI would like to fuse the whole `getitem-concatenate-rechunk` part into a pure-numpy single task operating on each original chunk. And I would like dask to do this *automatically*, without having to change `roll` or other downstream code.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/392906986/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/395788189",
        "html_url": "https://github.com/dask/dask/issues/3535#issuecomment-395788189",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3535",
        "id": 395788189,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTc4ODE4OQ==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-06-08T14:59:59Z",
        "updated_at": "2018-06-08T14:59:59Z",
        "author_association": "MEMBER",
        "body": "Using map_blocks when we roll over single-chunked dimensions cdwould be a welcome change.\r\n\r\nIf you're looking for fusion then you probably want to set `dask.config.set(fuse_ave_width=5)` or something similar.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/395788189/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]