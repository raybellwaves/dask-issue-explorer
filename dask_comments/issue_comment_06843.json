[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/729063743",
        "html_url": "https://github.com/dask/dask/pull/6843#issuecomment-729063743",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6843",
        "id": 729063743,
        "node_id": "MDEyOklzc3VlQ29tbWVudDcyOTA2Mzc0Mw==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-11-17T17:00:27Z",
        "updated_at": "2020-11-17T17:00:27Z",
        "author_association": "MEMBER",
        "body": "Thanks for submitting this @maartenbreddels .  Some comments/questions\r\n\r\n1.  How long does it take to import `blake3`?  Does this affect dask import time?\r\n2.  Is there a way to specify how many threads to use?  I wonder if using max threads every time might conflict with computation that is happening in the background\r\n3.  Presumably you've used this in Vaex happily, and so it's a good choice overall.  Are there workloads where you've noticed a good positive effect relative to other hashes like `cityhash`?  Are there workloads where you've noticed a negative effect?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/729063743/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/730236356",
        "html_url": "https://github.com/dask/dask/pull/6843#issuecomment-730236356",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6843",
        "id": 730236356,
        "node_id": "MDEyOklzc3VlQ29tbWVudDczMDIzNjM1Ng==",
        "user": {
            "login": "maartenbreddels",
            "id": 1765949,
            "node_id": "MDQ6VXNlcjE3NjU5NDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1765949?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maartenbreddels",
            "html_url": "https://github.com/maartenbreddels",
            "followers_url": "https://api.github.com/users/maartenbreddels/followers",
            "following_url": "https://api.github.com/users/maartenbreddels/following{/other_user}",
            "gists_url": "https://api.github.com/users/maartenbreddels/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/maartenbreddels/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/maartenbreddels/subscriptions",
            "organizations_url": "https://api.github.com/users/maartenbreddels/orgs",
            "repos_url": "https://api.github.com/users/maartenbreddels/repos",
            "events_url": "https://api.github.com/users/maartenbreddels/events{/privacy}",
            "received_events_url": "https://api.github.com/users/maartenbreddels/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-11-19T09:13:46Z",
        "updated_at": "2020-11-19T09:13:46Z",
        "author_association": "CONTRIBUTOR",
        "body": "> * How long does it take to import `blake3`?  Does this affect dask import time?\r\n\r\nboth cityhash and blake3 seem to take 2ms.\r\n\r\n \r\n\r\n> 2\\. Is there a way to specify how many threads to use?  I wonder if using max threads every time might conflict with computation that is happening in the background\r\n\r\nblake3 uses rayon, which can be specified using the env var `RAYON_NUM_THREADS` https://github.com/rayon-rs/rayon/blob/master/FAQ.md#how-many-threads-will-rayon-spawn \r\n\r\n\r\n> 3\\. Presumably you've used this in Vaex happily, and so it's a good choice overall.  Are there workloads where you've noticed a good positive effect relative to other hashes like `cityhash`?  Are there workloads where you've noticed a negative effect?\r\n\r\nMostly larger arrays are good, and on multicore, the following plot gives a nice summary:\r\n\r\n![image](https://user-images.githubusercontent.com/1765949/99645231-3ed71c80-2a4f-11eb-970e-af037cfb9a4b.png)\r\n\r\n\r\nTakeaways, on this machine using 4 cores the performance for both cityhash and blake3 is about the same (using docker with --cpus argument). Above ~1 MB of data is where it seems to do well.\r\n\r\ncc @oconnor663 ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/730236356/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/730433047",
        "html_url": "https://github.com/dask/dask/pull/6843#issuecomment-730433047",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6843",
        "id": 730433047,
        "node_id": "MDEyOklzc3VlQ29tbWVudDczMDQzMzA0Nw==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-11-19T15:01:51Z",
        "updated_at": "2020-11-19T15:01:51Z",
        "author_association": "MEMBER",
        "body": "Right, to be clear my question is \"how much impact does this have on full\nvaex/dask workflows\".  I'm curious if this causes an improvement in\npractice.  I could imagine, for example, that the increased contention for\nCPU could cause slowdowns.  I don't really expect this to happen, but it\nwould be reassuring to see improvement in more comprehensive situations.\n\nOn Thu, Nov 19, 2020 at 1:14 AM Maarten Breddels <notifications@github.com>\nwrote:\n\n>\n>    - How long does it take to import blake3? Does this affect dask import\n>    time?\n>\n> both cityhash and blake3 seem to take 2ms.\n>\n> 2. Is there a way to specify how many threads to use? I wonder if using\n> max threads every time might conflict with computation that is happening in\n> the background\n>\n> blake3 uses rayon, which can be specified using the env var\n> RAYON_NUM_THREADS\n> https://github.com/rayon-rs/rayon/blob/master/FAQ.md#how-many-threads-will-rayon-spawn\n>\n> 3. Presumably you've used this in Vaex happily, and so it's a good choice\n> overall. Are there workloads where you've noticed a good positive effect\n> relative to other hashes like cityhash? Are there workloads where you've\n> noticed a negative effect?\n>\n> Mostly larger arrays are good, and on multicore, the following plot gives\n> a nice summary:\n>\n> [image: image]\n> <https://user-images.githubusercontent.com/1765949/99645231-3ed71c80-2a4f-11eb-970e-af037cfb9a4b.png>\n>\n> Takeaways, on this machine using 4 cores the performance for both cityhash\n> and blake3 is about the same (using docker with --cpus argument). Above ~1\n> MB of data is where it seems to do well.\n>\n> cc @oconnor663 <https://github.com/oconnor663>\n>\n> \u2014\n> You are receiving this because you commented.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/dask/dask/pull/6843#issuecomment-730236356>, or\n> unsubscribe\n> <https://github.com/notifications/unsubscribe-auth/AACKZTDWE25LTCD7MYSETVTSQTOV3ANCNFSM4TWGFW5Q>\n> .\n>\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/730433047/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/730477748",
        "html_url": "https://github.com/dask/dask/pull/6843#issuecomment-730477748",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/6843",
        "id": 730477748,
        "node_id": "MDEyOklzc3VlQ29tbWVudDczMDQ3Nzc0OA==",
        "user": {
            "login": "maartenbreddels",
            "id": 1765949,
            "node_id": "MDQ6VXNlcjE3NjU5NDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1765949?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maartenbreddels",
            "html_url": "https://github.com/maartenbreddels",
            "followers_url": "https://api.github.com/users/maartenbreddels/followers",
            "following_url": "https://api.github.com/users/maartenbreddels/following{/other_user}",
            "gists_url": "https://api.github.com/users/maartenbreddels/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/maartenbreddels/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/maartenbreddels/subscriptions",
            "organizations_url": "https://api.github.com/users/maartenbreddels/orgs",
            "repos_url": "https://api.github.com/users/maartenbreddels/repos",
            "events_url": "https://api.github.com/users/maartenbreddels/events{/privacy}",
            "received_events_url": "https://api.github.com/users/maartenbreddels/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-11-19T16:10:23Z",
        "updated_at": "2020-11-19T16:10:23Z",
        "author_association": "CONTRIBUTOR",
        "body": "Maybe it is best to leave this PR hanging until that can be better answered with some concrete experiences, or put it after cityhash, so it's not the default. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/730477748/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]