[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1118760984",
        "html_url": "https://github.com/dask/dask/issues/9034#issuecomment-1118760984",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9034",
        "id": 1118760984,
        "node_id": "IC_kwDOAbcwm85CrvAY",
        "user": {
            "login": "jrbourbeau",
            "id": 11656932,
            "node_id": "MDQ6VXNlcjExNjU2OTMy",
            "avatar_url": "https://avatars.githubusercontent.com/u/11656932?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrbourbeau",
            "html_url": "https://github.com/jrbourbeau",
            "followers_url": "https://api.github.com/users/jrbourbeau/followers",
            "following_url": "https://api.github.com/users/jrbourbeau/following{/other_user}",
            "gists_url": "https://api.github.com/users/jrbourbeau/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jrbourbeau/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jrbourbeau/subscriptions",
            "organizations_url": "https://api.github.com/users/jrbourbeau/orgs",
            "repos_url": "https://api.github.com/users/jrbourbeau/repos",
            "events_url": "https://api.github.com/users/jrbourbeau/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jrbourbeau/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-05T16:17:24Z",
        "updated_at": "2022-05-05T16:17:24Z",
        "author_association": "MEMBER",
        "body": "Thanks for raising an issue @phobson. `dd.from_delayed` has a `verify_meta=` keyword that is True by default. Does setting `verify_meta=False` help here? \r\n\r\nAs a side note, @rjzamora recently added a new `dd.from_map` method (xref https://github.com/dask/dask/pull/8911) that might be more convenient for some `from_delayed` cases",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1118760984/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1118782158",
        "html_url": "https://github.com/dask/dask/issues/9034#issuecomment-1118782158",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9034",
        "id": 1118782158,
        "node_id": "IC_kwDOAbcwm85Cr0LO",
        "user": {
            "login": "jcrist",
            "id": 2783717,
            "node_id": "MDQ6VXNlcjI3ODM3MTc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2783717?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jcrist",
            "html_url": "https://github.com/jcrist",
            "followers_url": "https://api.github.com/users/jcrist/followers",
            "following_url": "https://api.github.com/users/jcrist/following{/other_user}",
            "gists_url": "https://api.github.com/users/jcrist/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jcrist/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jcrist/subscriptions",
            "organizations_url": "https://api.github.com/users/jcrist/orgs",
            "repos_url": "https://api.github.com/users/jcrist/repos",
            "events_url": "https://api.github.com/users/jcrist/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jcrist/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-05T16:33:54Z",
        "updated_at": "2022-05-05T16:33:54Z",
        "author_association": "MEMBER",
        "body": "Setting `verify_meta=False` will silence these errors, but will lead to issues downstream since some of the partitions don't match the metadata.\r\n\r\nI asked Paul to raise this issue, since I think we can do something better here in the case of empty partitions.\r\n\r\nAssuming `from_delayed` is wrapping data being read from something (and most readers don't result in proper metadata for empty files), automatically handling empty partitions seems reasonable. Two options:\r\n\r\n- If a partition is empty, use the inferred metadata instead. We always do this, only if `verify_meta=True`, or gate it with a new flag (defaulting to on). My worry with this one is that it might mask issues where an empty file also has different dtypes/column names, which would be silently ignored. However, I think the ergonomic benefits of doing this would outweigh that downside.\r\n- Similar to the above, but only do this if the column names match and are all present (but in the wrong order/incorrect dtypes). This seems less useful to me, but can show up for certain readers still.\r\n\r\nMy current thought is that we do option 1. I think we should do this even if `verify_meta` is false, but am not sure if we'll want to add a new flag to disable this behavior as well (and if so, what that flag should be called).",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1118782158/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1122684519",
        "html_url": "https://github.com/dask/dask/issues/9034#issuecomment-1122684519",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9034",
        "id": 1122684519,
        "node_id": "IC_kwDOAbcwm85C6s5n",
        "user": {
            "login": "SultanOrazbayev",
            "id": 20208402,
            "node_id": "MDQ6VXNlcjIwMjA4NDAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/20208402?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SultanOrazbayev",
            "html_url": "https://github.com/SultanOrazbayev",
            "followers_url": "https://api.github.com/users/SultanOrazbayev/followers",
            "following_url": "https://api.github.com/users/SultanOrazbayev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SultanOrazbayev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SultanOrazbayev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SultanOrazbayev/subscriptions",
            "organizations_url": "https://api.github.com/users/SultanOrazbayev/orgs",
            "repos_url": "https://api.github.com/users/SultanOrazbayev/repos",
            "events_url": "https://api.github.com/users/SultanOrazbayev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SultanOrazbayev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-05-10T17:37:29Z",
        "updated_at": "2022-05-10T17:37:29Z",
        "author_association": "CONTRIBUTOR",
        "body": "This is a somewhat related problem (https://stackoverflow.com/questions/72171471/order-of-metadata-in-dask-groupby-apply) providing meta as a dict, appears to enforce specific column ordering and this leads to potential downstream errors.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1122684519/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]