{
    "url": "https://api.github.com/repos/dask/dask/issues/2431",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/2431/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/2431/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/2431/events",
    "html_url": "https://github.com/dask/dask/issues/2431",
    "id": 234263515,
    "node_id": "MDU6SXNzdWUyMzQyNjM1MTU=",
    "number": 2431,
    "title": "Swapping getitem and elementwise operations via graph opimization, redux?",
    "user": {
        "login": "shoyer",
        "id": 1217238,
        "node_id": "MDQ6VXNlcjEyMTcyMzg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1217238?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shoyer",
        "html_url": "https://github.com/shoyer",
        "followers_url": "https://api.github.com/users/shoyer/followers",
        "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
        "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
        "organizations_url": "https://api.github.com/users/shoyer/orgs",
        "repos_url": "https://api.github.com/users/shoyer/repos",
        "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
        "received_events_url": "https://api.github.com/users/shoyer/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 10,
    "created_at": "2017-06-07T16:10:55Z",
    "updated_at": "2017-06-07T17:26:45Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "@jcrist did some work back in https://github.com/dask/dask/pull/755 on swapping getitem and elementwise operations. We didn't end up merging this work, because we were unable to come up with a solution that worked across the board without slowing down every dask array operations (by forcing broadcasting).\r\n\r\nHowever, this is still a vital optimization for climate/weather data analysis use cases (where arrays are often currently loaded with one chunk/file, as described in https://github.com/pydata/xarray/issues/1440), and would be extremely valuable for xarray (allowing us to remove our legacy system for deferred array computation). It would be great to pursue it in some more limited form.\r\n\r\nAny of the following would solve xarray's use cases:\r\n\r\n1. Optimization that only works on elementwise operations with a single array argument, e.g., of the form `x + 1`.\r\n2. Optimization that only works on elementwise operations with pre-broadcast arguments. These would need some sort of special indication in the dask graph, likely via some custom API, e.g., `da.swappable_elementwise()`.\r\n3. A new (optional) elementwise operation that always explicitly broadcasts, for cases when optimization is essential and some overhead is acceptable.\r\n\r\nThe optimization pass itself could also be optional, but we would always want to use it on dask.array objects wrapped with xarray.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/2431/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/2431/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}