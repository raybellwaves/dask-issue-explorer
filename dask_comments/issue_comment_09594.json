[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1291036203",
        "html_url": "https://github.com/dask/dask/issues/9594#issuecomment-1291036203",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9594",
        "id": 1291036203,
        "node_id": "IC_kwDOAbcwm85M86Yr",
        "user": {
            "login": "gjoseph92",
            "id": 3309802,
            "node_id": "MDQ6VXNlcjMzMDk4MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3309802?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gjoseph92",
            "html_url": "https://github.com/gjoseph92",
            "followers_url": "https://api.github.com/users/gjoseph92/followers",
            "following_url": "https://api.github.com/users/gjoseph92/following{/other_user}",
            "gists_url": "https://api.github.com/users/gjoseph92/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gjoseph92/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gjoseph92/subscriptions",
            "organizations_url": "https://api.github.com/users/gjoseph92/orgs",
            "repos_url": "https://api.github.com/users/gjoseph92/repos",
            "events_url": "https://api.github.com/users/gjoseph92/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gjoseph92/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-25T19:28:32Z",
        "updated_at": "2022-10-25T19:28:32Z",
        "author_association": "MEMBER",
        "body": "One thing to be aware of is https://github.com/dask/dask/issues/7036. For DataFrames, currently fusion is off by default https://github.com/dask/dask/pull/7620, but there are reasons why we might want to turn it back on (https://github.com/dask/dask/issues/8447). And if anyone loads data in a DataFrame, then turns it into an Array/Bag down the line, then they'll silently lose the retries.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1291036203/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1291059358",
        "html_url": "https://github.com/dask/dask/issues/9594#issuecomment-1291059358",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9594",
        "id": 1291059358,
        "node_id": "IC_kwDOAbcwm85M9ACe",
        "user": {
            "login": "jrbourbeau",
            "id": 11656932,
            "node_id": "MDQ6VXNlcjExNjU2OTMy",
            "avatar_url": "https://avatars.githubusercontent.com/u/11656932?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jrbourbeau",
            "html_url": "https://github.com/jrbourbeau",
            "followers_url": "https://api.github.com/users/jrbourbeau/followers",
            "following_url": "https://api.github.com/users/jrbourbeau/following{/other_user}",
            "gists_url": "https://api.github.com/users/jrbourbeau/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jrbourbeau/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jrbourbeau/subscriptions",
            "organizations_url": "https://api.github.com/users/jrbourbeau/orgs",
            "repos_url": "https://api.github.com/users/jrbourbeau/repos",
            "events_url": "https://api.github.com/users/jrbourbeau/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jrbourbeau/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-25T19:50:41Z",
        "updated_at": "2022-10-25T19:50:41Z",
        "author_association": "MEMBER",
        "body": "Totally agree there are some known issues. I still think it's worth adding auto-retries, we just know there are some known issues. Worst case scenario, users will have the current behavior on `main` (i.e. retries will be lost) ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1291059358/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1291069995",
        "html_url": "https://github.com/dask/dask/issues/9594#issuecomment-1291069995",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9594",
        "id": 1291069995,
        "node_id": "IC_kwDOAbcwm85M9Cor",
        "user": {
            "login": "gjoseph92",
            "id": 3309802,
            "node_id": "MDQ6VXNlcjMzMDk4MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3309802?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gjoseph92",
            "html_url": "https://github.com/gjoseph92",
            "followers_url": "https://api.github.com/users/gjoseph92/followers",
            "following_url": "https://api.github.com/users/gjoseph92/following{/other_user}",
            "gists_url": "https://api.github.com/users/gjoseph92/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gjoseph92/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gjoseph92/subscriptions",
            "organizations_url": "https://api.github.com/users/gjoseph92/orgs",
            "repos_url": "https://api.github.com/users/gjoseph92/repos",
            "events_url": "https://api.github.com/users/gjoseph92/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gjoseph92/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-10-25T20:00:47Z",
        "updated_at": "2022-10-25T20:00:47Z",
        "author_association": "MEMBER",
        "body": "Agreed. It would probably just be good to 1) document the auto-retries and 2) mention this caveat in those docs.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1291069995/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1301194375",
        "html_url": "https://github.com/dask/dask/issues/9594#issuecomment-1301194375",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9594",
        "id": 1301194375,
        "node_id": "IC_kwDOAbcwm85NjqaH",
        "user": {
            "login": "ncclementi",
            "id": 7526622,
            "node_id": "MDQ6VXNlcjc1MjY2MjI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7526622?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ncclementi",
            "html_url": "https://github.com/ncclementi",
            "followers_url": "https://api.github.com/users/ncclementi/followers",
            "following_url": "https://api.github.com/users/ncclementi/following{/other_user}",
            "gists_url": "https://api.github.com/users/ncclementi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ncclementi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ncclementi/subscriptions",
            "organizations_url": "https://api.github.com/users/ncclementi/orgs",
            "repos_url": "https://api.github.com/users/ncclementi/repos",
            "events_url": "https://api.github.com/users/ncclementi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ncclementi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-11-02T20:33:49Z",
        "updated_at": "2022-11-02T20:33:49Z",
        "author_association": "MEMBER",
        "body": "When trying to implement retries over at #9601 the initial approach was to annotate read_bytes around here https://github.com/dask/dask/blob/e5b27eb2037e79ff31b935ba89976ab52b946605/dask/bytes/core.py#L145-L159\r\n\r\nthose annotations were not carried over, in other words when running a test that look like this \r\n\r\n```python\r\n    def test_read_csv_retries(tmpdir):\r\n\r\n    fn = str(tmpdir)\r\n    remote_fn = f\"simplecache://{tmpdir}\"\r\n    storage_options = {\"target_protocol\": \"file\"}\r\n    \r\n    ddf2 = dd.read_csv(f\"{remote_fn}/*.part\", storage_options=storage_options)\r\n    layer = hlg_layer(ddf2.dask, \"read-csv\")\r\n    assert layer.annotations\r\n    assert layer.annotations[\"retries\"] == 5\r\n```\r\n\r\nThere were no annotations. We know that the annotations were created on read_bytes because we checked with breakpoints at that level. \r\n\r\nFound a workaround, see PR which requires Adding storage options to text_blocks_to_pandas is breaking other tests because I'm not passing it into those tests, I want to make sure there is no way around this before I start touching all the other tests. It seems this way it'll be just a bandaid. Thoughts? \r\n\r\ncc: @mrocklin ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1301194375/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1305856326",
        "html_url": "https://github.com/dask/dask/issues/9594#issuecomment-1305856326",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9594",
        "id": 1305856326,
        "node_id": "IC_kwDOAbcwm85N1clG",
        "user": {
            "login": "ncclementi",
            "id": 7526622,
            "node_id": "MDQ6VXNlcjc1MjY2MjI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7526622?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ncclementi",
            "html_url": "https://github.com/ncclementi",
            "followers_url": "https://api.github.com/users/ncclementi/followers",
            "following_url": "https://api.github.com/users/ncclementi/following{/other_user}",
            "gists_url": "https://api.github.com/users/ncclementi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/ncclementi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/ncclementi/subscriptions",
            "organizations_url": "https://api.github.com/users/ncclementi/orgs",
            "repos_url": "https://api.github.com/users/ncclementi/repos",
            "events_url": "https://api.github.com/users/ncclementi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/ncclementi/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-11-07T16:20:45Z",
        "updated_at": "2022-11-07T16:20:45Z",
        "author_association": "MEMBER",
        "body": "https://github.com/dask/dask/pull/9601#issuecomment-1304141674 for visibity",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1305856326/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]