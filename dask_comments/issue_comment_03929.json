[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/417945001",
        "html_url": "https://github.com/dask/dask/issues/3929#issuecomment-417945001",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3929",
        "id": 417945001,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQxNzk0NTAwMQ==",
        "user": {
            "login": "TAdeJong",
            "id": 6816964,
            "node_id": "MDQ6VXNlcjY4MTY5NjQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6816964?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TAdeJong",
            "html_url": "https://github.com/TAdeJong",
            "followers_url": "https://api.github.com/users/TAdeJong/followers",
            "following_url": "https://api.github.com/users/TAdeJong/following{/other_user}",
            "gists_url": "https://api.github.com/users/TAdeJong/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TAdeJong/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TAdeJong/subscriptions",
            "organizations_url": "https://api.github.com/users/TAdeJong/orgs",
            "repos_url": "https://api.github.com/users/TAdeJong/repos",
            "events_url": "https://api.github.com/users/TAdeJong/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TAdeJong/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-09-02T17:09:39Z",
        "updated_at": "2018-09-02T17:09:39Z",
        "author_association": "CONTRIBUTOR",
        "body": "[`da.random._wrap()`](https://github.com/dask/dask/blob/5eae4f08a2d01e0ab6a5026c2c5400ab202e44ba/dask/array/random.py#L52), fundamentally handles `list`'s differently from `np.ndarray`'s and Dask arrays, trying to broadcast array shapes, but ignoring lists for that, instead relying on the `extra_chunks` argument to extend.\r\nAs such even the following trips:\r\n```\r\ndx = da.random.multinomial(1, np.array([1/6.]*6), 10, chunks=2)\r\n```\r\nwhile this works:\r\n```\r\ndx = da.random.multinomial(1, [1/6.]*6, 10, chunks=2)\r\n```\r\nI feel like there should be a nice way to solve this, but the best quick fix I can come up with is to always cast `pvals` to a list, which seems very undesirable.\r\nBut I have a feeling this broadcasting problem where we add a dimension is not a unique problem and there should already be a solution floating around somewhere in the codebase...",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/417945001/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/508467864",
        "html_url": "https://github.com/dask/dask/issues/3929#issuecomment-508467864",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3929",
        "id": 508467864,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUwODQ2Nzg2NA==",
        "user": {
            "login": "dlovell",
            "id": 1074774,
            "node_id": "MDQ6VXNlcjEwNzQ3NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1074774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dlovell",
            "html_url": "https://github.com/dlovell",
            "followers_url": "https://api.github.com/users/dlovell/followers",
            "following_url": "https://api.github.com/users/dlovell/following{/other_user}",
            "gists_url": "https://api.github.com/users/dlovell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dlovell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dlovell/subscriptions",
            "organizations_url": "https://api.github.com/users/dlovell/orgs",
            "repos_url": "https://api.github.com/users/dlovell/repos",
            "events_url": "https://api.github.com/users/dlovell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dlovell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-04T12:38:15Z",
        "updated_at": "2019-07-04T12:38:15Z",
        "author_association": "NONE",
        "body": "@TAdeJong , why does casting `pvals` to a list seem undesirable?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/508467864/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/508479141",
        "html_url": "https://github.com/dask/dask/issues/3929#issuecomment-508479141",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3929",
        "id": 508479141,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUwODQ3OTE0MQ==",
        "user": {
            "login": "TAdeJong",
            "id": 6816964,
            "node_id": "MDQ6VXNlcjY4MTY5NjQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6816964?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TAdeJong",
            "html_url": "https://github.com/TAdeJong",
            "followers_url": "https://api.github.com/users/TAdeJong/followers",
            "following_url": "https://api.github.com/users/TAdeJong/following{/other_user}",
            "gists_url": "https://api.github.com/users/TAdeJong/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TAdeJong/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TAdeJong/subscriptions",
            "organizations_url": "https://api.github.com/users/TAdeJong/orgs",
            "repos_url": "https://api.github.com/users/TAdeJong/repos",
            "events_url": "https://api.github.com/users/TAdeJong/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TAdeJong/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-04T13:16:41Z",
        "updated_at": "2019-07-04T13:16:41Z",
        "author_association": "CONTRIBUTOR",
        "body": "> @TAdeJong , why does casting `pvals` to a list seem undesirable?\r\n\r\nBecause in general this might be a rather large array. Furthermore, in the case of a dask array, it might cause all kind of intermediate computation when calling the function instead of when calling `.compute()`, which is undesirable.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/508479141/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/508483212",
        "html_url": "https://github.com/dask/dask/issues/3929#issuecomment-508483212",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3929",
        "id": 508483212,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUwODQ4MzIxMg==",
        "user": {
            "login": "dlovell",
            "id": 1074774,
            "node_id": "MDQ6VXNlcjEwNzQ3NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1074774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dlovell",
            "html_url": "https://github.com/dlovell",
            "followers_url": "https://api.github.com/users/dlovell/followers",
            "following_url": "https://api.github.com/users/dlovell/following{/other_user}",
            "gists_url": "https://api.github.com/users/dlovell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dlovell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dlovell/subscriptions",
            "organizations_url": "https://api.github.com/users/dlovell/orgs",
            "repos_url": "https://api.github.com/users/dlovell/repos",
            "events_url": "https://api.github.com/users/dlovell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dlovell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-04T13:29:57Z",
        "updated_at": "2019-07-04T13:29:57Z",
        "author_association": "NONE",
        "body": "It seems like the` pvals` need to be concrete inside of `_wrap` for use in `_apply_random` to generate `meta` and `vals`\r\n\r\n```\r\nshape = (2, 2)\r\nv = [.5, .5]\r\np = dask.delayed(toolz.identity)(v)\r\n# works\r\nnp.random.geometric(v, shape)\r\n# ValueError: shape mismatch: objects cannot be broadcast to a single shape\r\nda.random.geometric(v, shape)\r\n# ValueError: setting an array element with a sequence.\r\nnp.random.geometric(p, shape)\r\n# ValueError: setting an array element with a sequence.\r\nda.random.geometric(p, shape)\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/508483212/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/508483765",
        "html_url": "https://github.com/dask/dask/issues/3929#issuecomment-508483765",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3929",
        "id": 508483765,
        "node_id": "MDEyOklzc3VlQ29tbWVudDUwODQ4Mzc2NQ==",
        "user": {
            "login": "dlovell",
            "id": 1074774,
            "node_id": "MDQ6VXNlcjEwNzQ3NzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1074774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dlovell",
            "html_url": "https://github.com/dlovell",
            "followers_url": "https://api.github.com/users/dlovell/followers",
            "following_url": "https://api.github.com/users/dlovell/following{/other_user}",
            "gists_url": "https://api.github.com/users/dlovell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dlovell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dlovell/subscriptions",
            "organizations_url": "https://api.github.com/users/dlovell/orgs",
            "repos_url": "https://api.github.com/users/dlovell/repos",
            "events_url": "https://api.github.com/users/dlovell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dlovell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-07-04T13:31:42Z",
        "updated_at": "2019-07-04T13:31:42Z",
        "author_association": "NONE",
        "body": "I'm looking to see if `p` is always the first argument to all the functions, in which case maybe it can be excluded from the `args_shapes` collection.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/508483765/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]