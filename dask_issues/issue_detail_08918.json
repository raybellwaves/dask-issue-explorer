{
    "url": "https://api.github.com/repos/dask/dask/issues/8918",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/8918/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/8918/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/8918/events",
    "html_url": "https://github.com/dask/dask/pull/8918",
    "id": 1202243636,
    "node_id": "PR_kwDOAbcwm842H3NI",
    "number": 8918,
    "title": "parametrize tests over Zarr protocol versions 2 and 3",
    "user": {
        "login": "grlee77",
        "id": 6528957,
        "node_id": "MDQ6VXNlcjY1Mjg5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6528957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/grlee77",
        "html_url": "https://github.com/grlee77",
        "followers_url": "https://api.github.com/users/grlee77/followers",
        "following_url": "https://api.github.com/users/grlee77/following{/other_user}",
        "gists_url": "https://api.github.com/users/grlee77/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/grlee77/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/grlee77/subscriptions",
        "organizations_url": "https://api.github.com/users/grlee77/orgs",
        "repos_url": "https://api.github.com/users/grlee77/repos",
        "events_url": "https://api.github.com/users/grlee77/events{/privacy}",
        "received_events_url": "https://api.github.com/users/grlee77/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 242862305,
            "node_id": "MDU6TGFiZWwyNDI4NjIzMDU=",
            "url": "https://api.github.com/repos/dask/dask/labels/array",
            "name": "array",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2022-04-12T18:34:08Z",
    "updated_at": "2022-04-29T04:01:49Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "draft": true,
    "pull_request": {
        "url": "https://api.github.com/repos/dask/dask/pulls/8918",
        "html_url": "https://github.com/dask/dask/pull/8918",
        "diff_url": "https://github.com/dask/dask/pull/8918.diff",
        "patch_url": "https://github.com/dask/dask/pull/8918.patch",
        "merged_at": null
    },
    "body": "This PR parametrizes the Zarr-based tests to test both the current v2 protocol as well as the [draft v3 spec](https://zarr-specs.readthedocs.io/en/core-protocol-v3.0-dev/protocol/core/v3.0.html). The v3 spec is still in development, so this PR will need to stay a WIP until there is a release we can test against on CI.\r\n\r\nThe two changes needed to use v3 are:\r\n- `dask.array.to_zarr`/`dask.array.from_zarr` **must** specify the `component` (aka a `path` in Zarr terms).\r\n- If a file path string rather than an existing zarr store (mapper) is being used to create/open an array, then a `zarr_version` kwarg must be passed so that Zarr knows which version of the protocol to use (the default is currently version 2).\r\n\r\nNote that all changes in this PR are purely to the tests. It is possible to use v3 support as long as the `component` kwarg and `zarr_version` kwarg are specified.\r\n\r\nThis is not yet ready to merge as there is not an upstream Zarr release with v3 support to test against. I did test locally against the zarr `main` branch (after commenting out the `> parse_version('3.0')` version check) and all tests pass for both v2 and v3 stores. The only test case that involves a difference in the tested behavior between the two protocol versions is `test_zarr_group` (see \"Note: \" comments in that test case). If any difference in behavior is problematic, please bring it up to discuss! \r\n\r\ncc @joshmoore, @jakirkham, @rabernat, @MSanKeys963\r\n\r\n\r\n- [ ] Closes #xxxx\r\n- [x] Tests added / passed\r\n- [x] Passes `pre-commit run --all-files`\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/8918/reactions",
        "total_count": 2,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 2,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/8918/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}