[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/408133062",
        "html_url": "https://github.com/dask/dask/issues/3815#issuecomment-408133062",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3815",
        "id": 408133062,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQwODEzMzA2Mg==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-07-26T15:18:33Z",
        "updated_at": "2018-07-26T15:18:33Z",
        "author_association": "MEMBER",
        "body": "At first glance I can see how this would be useful.  My inclination would\nbe for someone to build this externally to Dask first and see how it works\nin practice before adding it to the package.  My hope is that this is a few\nlines of code to do.  Would you be willing to experiment with this on your\nown workload (which sounds like it would be useful anyway) and report back\nwhat you find?\n\nOn Thu, Jul 26, 2018 at 2:52 AM, crusaderky <notifications@github.com>\nwrote:\n\n> I've been spending quite a lot of time recently debugging the dask\n> distributed scheduler being unexpectedly invoked in the middle of defining\n> the dask.array graph, both by xarray and by my own application code. If the\n> distributed client and scheduler are on opposite ends of a high-latency\n> network, this can easily compound into hours of overhead in some cases.\n> Another, worse situation that I'm fighting against is when the dask graph\n> definition is performed inside a process pool - a dire necessity for\n> particularly large graphs. In this case, an accidental invocation of the\n> threaded scheduler from inside the subprocess will cause a random and\n> complete deadlock of the Python interpreter, and an inexperienced developer\n> will never figure out what's going on.\n>\n> To debug this, so far I have been starting a distributed scheduler without\n> workers and watched for my code getting stuck when it accidentally tries\n> submitting stuff to it. This approach however is impractical when writing\n> unit tests.\n> I'd like to propose writing a new scheduler, crash (I'm open to\n> suggestions for a better name), that raises Exception as soon as anybody\n> tries computing anything with it.\n>\n> Mock up:\n>\n> import dask\n> from dask.array.utils import assert_eq\n>\n> dask.config.set(scheduler='crash')\n>\n>\n> def test1():\n>     # graph definition. scheduler='crash' verifies parts of the graph are not\n>     # silently computed under the hood\n>     a = dask.array.arange(4, chunks=2)\n>     # internally invokes compute(scheduler='sync')\n>     assert_eq(a, dask.array.from_array([0, 1,2, 3], chunks]=2)\n>\n> \u2014\n> You are receiving this because you are subscribed to this thread.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/dask/dask/issues/3815>, or mute the thread\n> <https://github.com/notifications/unsubscribe-auth/AASszEb8sg-EzgJvq5SKVmhqBmOL-fNxks5uKZFVgaJpZM4VhhDD>\n> .\n>\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/408133062/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/487576854",
        "html_url": "https://github.com/dask/dask/issues/3815#issuecomment-487576854",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3815",
        "id": 487576854,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NzU3Njg1NA==",
        "user": {
            "login": "crusaderky",
            "id": 6213168,
            "node_id": "MDQ6VXNlcjYyMTMxNjg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6213168?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/crusaderky",
            "html_url": "https://github.com/crusaderky",
            "followers_url": "https://api.github.com/users/crusaderky/followers",
            "following_url": "https://api.github.com/users/crusaderky/following{/other_user}",
            "gists_url": "https://api.github.com/users/crusaderky/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/crusaderky/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/crusaderky/subscriptions",
            "organizations_url": "https://api.github.com/users/crusaderky/orgs",
            "repos_url": "https://api.github.com/users/crusaderky/repos",
            "events_url": "https://api.github.com/users/crusaderky/events{/privacy}",
            "received_events_url": "https://api.github.com/users/crusaderky/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-04-29T13:21:00Z",
        "updated_at": "2019-04-29T13:21:00Z",
        "author_association": "MEMBER",
        "body": "Sorry - this is still valid but very deep in the backlog",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/487576854/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]