{
    "url": "https://api.github.com/repos/dask/dask/issues/10654",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/10654/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/10654/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/10654/events",
    "html_url": "https://github.com/dask/dask/issues/10654",
    "id": 2014376310,
    "node_id": "I_kwDOAbcwm854EPF2",
    "number": 10654,
    "title": "Mechanism to indicate a task is only executed for side-effects to prevent re-execution upon worker restart",
    "user": {
        "login": "benjeffery",
        "id": 8552,
        "node_id": "MDQ6VXNlcjg1NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8552?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/benjeffery",
        "html_url": "https://github.com/benjeffery",
        "followers_url": "https://api.github.com/users/benjeffery/followers",
        "following_url": "https://api.github.com/users/benjeffery/following{/other_user}",
        "gists_url": "https://api.github.com/users/benjeffery/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/benjeffery/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/benjeffery/subscriptions",
        "organizations_url": "https://api.github.com/users/benjeffery/orgs",
        "repos_url": "https://api.github.com/users/benjeffery/repos",
        "events_url": "https://api.github.com/users/benjeffery/events{/privacy}",
        "received_events_url": "https://api.github.com/users/benjeffery/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 3880424463,
            "node_id": "LA_kwDOAbcwm87nSpQP",
            "url": "https://api.github.com/repos/dask/dask/labels/needs%20triage",
            "name": "needs triage",
            "color": "eeeeee",
            "default": false,
            "description": "Needs a response from a contributor"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 6,
    "created_at": "2023-11-28T12:54:20Z",
    "updated_at": "2023-11-29T14:20:03Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "I have a function `parse_chunk` which writes it's output to disk and returns `None`. Running this function in the classic dask way:\r\n\r\n```python\r\ntasks = []\r\nfor c in chunks:\r\n  tasks.append(dask.delayed(parse_chunk)(c))\r\ndask.compute(*tasks)\r\n```\r\nOn the dashboard I see the progress bar move forward as chunks are processed, but when a worker is rotated out (they have to be due to cluster time limits) the progress bar skips backward as all the results of the tasks done by that worker are lost. The results are not needed as the function just returns `None`.\r\n\r\nOne solution I have tried is this:\r\n\r\n```python\r\nfutures = []\r\nfor c in chunks:\r\n    futures.append(client.submit(parse_chunk,c))\r\nfor future in distributed.as_completed(futures):\r\n        future.result()\r\n        client.cancel(future)\r\n```\r\nWhich works  - the work is no longer redone. But now the progress bar is very confusing for users as it stays at zero, but the work left to be done slowly decreases to zero.\r\n\r\nCould there be a way to indicate that the results of a task are not needed and don't need to be held in cluster memory to the end of the `compute` call?\r\n\r\nMany thanks!",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/10654/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/10654/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}