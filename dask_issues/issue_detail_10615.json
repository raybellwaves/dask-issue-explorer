{
    "url": "https://api.github.com/repos/dask/dask/issues/10615",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/10615/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/10615/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/10615/events",
    "html_url": "https://github.com/dask/dask/issues/10615",
    "id": 1981036482,
    "node_id": "I_kwDOAbcwm852FDfC",
    "number": 10615,
    "title": "Indicate variable chunking for dask arrays in string repr",
    "user": {
        "login": "ivirshup",
        "id": 8238804,
        "node_id": "MDQ6VXNlcjgyMzg4MDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8238804?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ivirshup",
        "html_url": "https://github.com/ivirshup",
        "followers_url": "https://api.github.com/users/ivirshup/followers",
        "following_url": "https://api.github.com/users/ivirshup/following{/other_user}",
        "gists_url": "https://api.github.com/users/ivirshup/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/ivirshup/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/ivirshup/subscriptions",
        "organizations_url": "https://api.github.com/users/ivirshup/orgs",
        "repos_url": "https://api.github.com/users/ivirshup/repos",
        "events_url": "https://api.github.com/users/ivirshup/events{/privacy}",
        "received_events_url": "https://api.github.com/users/ivirshup/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 242862305,
            "node_id": "MDU6TGFiZWwyNDI4NjIzMDU=",
            "url": "https://api.github.com/repos/dask/dask/labels/array",
            "name": "array",
            "color": "006b75",
            "default": false,
            "description": null
        },
        {
            "id": 3798602129,
            "node_id": "LA_kwDOAbcwm87iahGR",
            "url": "https://api.github.com/repos/dask/dask/labels/enhancement",
            "name": "enhancement",
            "color": "C2E0C6",
            "default": true,
            "description": "Improve existing functionality or make things work better"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2023-11-07T10:31:02Z",
    "updated_at": "2024-02-27T14:52:42Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "When dask arrays have variable chunking along a dimension, the string repr doesn't reflect this. As an example,\r\n\r\n```python\r\nimport dask.array as da\r\n\r\n# Fixed chunking\r\nx = da.ones(100, chunks=5)\r\nx\r\n```\r\n\r\n```\r\ndask.array<ones_like, shape=(100,), dtype=float64, chunksize=(5,), chunktype=numpy.ndarray>\r\n```\r\n\r\nThe `chunksize` reported here is `(5,)`, which is accurate. However if we rechunk to have variable sizes:\r\n\r\n\r\n```python\r\nx.rechunk(((20, 30, 50),))\r\n```\r\n\r\n```\r\ndask.array<rechunk-merge, shape=(100,), dtype=float64, chunksize=(50,), chunktype=numpy.ndarray>\r\n```\r\n\r\nThe reported chunk size is `(50,)` which isn't accurate for all chunks. AFAICT, this just reports the maximum chunksize for each dimension. \r\n\r\nIt can be confusing that there is no indication in the string repr that these arrays are different:\r\n\r\n```python\r\nx.rechunk((10, 20, 20, 50,))\r\nx.rechunk((50,))\r\n```\r\n\r\nI think it would be nice if there was some indication the chunks were variable along a particular dimension. Not sure what the best solution here would be, but some thoughts:\r\n\r\n* It could be that it was just `.chunks`, but that can get quite long for some cases. Maybe this can be auto-ellipsed? `chunksize=((10, ..., 50),)`\r\n* Special `var` character, similar to `nan` for unknown `chunksize=(var,)` \u2013 though this loses any size info\r\n* Special modifier to indicate the value is a max `chunksize=(var(50),)` or `chunksize=(max(50),)`",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/10615/reactions",
        "total_count": 1,
        "+1": 1,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/10615/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}