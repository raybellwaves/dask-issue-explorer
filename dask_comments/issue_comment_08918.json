[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1097091816",
        "html_url": "https://github.com/dask/dask/pull/8918#issuecomment-1097091816",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/8918",
        "id": 1097091816,
        "node_id": "IC_kwDOAbcwm85BZEro",
        "user": {
            "login": "grlee77",
            "id": 6528957,
            "node_id": "MDQ6VXNlcjY1Mjg5NTc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6528957?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/grlee77",
            "html_url": "https://github.com/grlee77",
            "followers_url": "https://api.github.com/users/grlee77/followers",
            "following_url": "https://api.github.com/users/grlee77/following{/other_user}",
            "gists_url": "https://api.github.com/users/grlee77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/grlee77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/grlee77/subscriptions",
            "organizations_url": "https://api.github.com/users/grlee77/orgs",
            "repos_url": "https://api.github.com/users/grlee77/repos",
            "events_url": "https://api.github.com/users/grlee77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/grlee77/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-12T18:49:08Z",
        "updated_at": "2022-04-12T18:51:03Z",
        "author_association": "CONTRIBUTOR",
        "body": "To get an idea of the difference in file structure for v3 vs. v2 stores, there is a listing of the files created in both cases for the 3 arrays written by `test_zarr_group` (each 2D array has 3 chunks along each axis).\r\n\r\n### directory listing for v2 spec\r\n\r\n```\r\n+$ tree /tmp/v2\r\n/tmp/v2\r\n\u251c\u2500\u2500 nested\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 test\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 0.0\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 0.1\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 0.2\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 1.0\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 1.1\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 1.2\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 2.0\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 2.1\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 2.2\r\n\u251c\u2500\u2500 test\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 0.0\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 0.1\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 0.2\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 1.0\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 1.1\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 1.2\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 2.0\r\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 2.1\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 2.2\r\n\u2514\u2500\u2500 test2\r\n    \u251c\u2500\u2500 0.0\r\n    \u251c\u2500\u2500 0.1\r\n    \u251c\u2500\u2500 0.2\r\n    \u251c\u2500\u2500 1.0\r\n    \u251c\u2500\u2500 1.1\r\n    \u251c\u2500\u2500 1.2\r\n    \u251c\u2500\u2500 2.0\r\n    \u251c\u2500\u2500 2.1\r\n    \u2514\u2500\u2500 2.2\r\n```\r\n\r\nThe primary differences for v3 are that the data chunks and the metadata are in separate directory trees. Also, directory stores default to nested rather than flat storage of chunks. The third difference are in the metadata itself as [detailed in the spec](https://zarr-specs.readthedocs.io/en/core-protocol-v3.0-dev/protocol/core/v3.0.html#metadata).\r\n\r\n### directory listing for v3 spec\r\n```\r\n+$ tree /tmp/v3\r\n/tmp/v3\r\n\u251c\u2500\u2500 data\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 root\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 nested\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 test\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u251c\u2500\u2500 c0\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 2\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u251c\u2500\u2500 c1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 2\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 c2\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0         \u2514\u2500\u2500 2\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 test\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 c0\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 2\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 c1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 2\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 c2\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0     \u2514\u2500\u2500 2\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 test2\r\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 c0\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 2\r\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 c1\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0         \u2502\u00a0\u00a0 \u2514\u2500\u2500 2\r\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 c2\r\n\u2502\u00a0\u00a0             \u251c\u2500\u2500 0\r\n\u2502\u00a0\u00a0             \u251c\u2500\u2500 1\r\n\u2502\u00a0\u00a0             \u2514\u2500\u2500 2\r\n\u251c\u2500\u2500 meta\r\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 root\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 nested\r\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 test.array.json\r\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 test2.array.json\r\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 test.array.json\r\n\u2514\u2500\u2500 zarr.json\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1097091816/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1097136819",
        "html_url": "https://github.com/dask/dask/pull/8918#issuecomment-1097136819",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/8918",
        "id": 1097136819,
        "node_id": "IC_kwDOAbcwm85BZPqz",
        "user": {
            "login": "grlee77",
            "id": 6528957,
            "node_id": "MDQ6VXNlcjY1Mjg5NTc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6528957?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/grlee77",
            "html_url": "https://github.com/grlee77",
            "followers_url": "https://api.github.com/users/grlee77/followers",
            "following_url": "https://api.github.com/users/grlee77/following{/other_user}",
            "gists_url": "https://api.github.com/users/grlee77/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/grlee77/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/grlee77/subscriptions",
            "organizations_url": "https://api.github.com/users/grlee77/orgs",
            "repos_url": "https://api.github.com/users/grlee77/repos",
            "events_url": "https://api.github.com/users/grlee77/events{/privacy}",
            "received_events_url": "https://api.github.com/users/grlee77/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-12T19:35:49Z",
        "updated_at": "2022-04-12T19:35:49Z",
        "author_association": "CONTRIBUTOR",
        "body": "One possibility we discussed, but is not part of the spec would be to have zarr-python automatically set `zarr_version=3` whenever a file path ends in a version-specific extension such as '.zarr3' or '.zr3' (see https://github.com/zarr-developers/zarr-specs/issues/137).\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1097136819/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1097137994",
        "html_url": "https://github.com/dask/dask/pull/8918#issuecomment-1097137994",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/8918",
        "id": 1097137994,
        "node_id": "IC_kwDOAbcwm85BZP9K",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-12T19:37:10Z",
        "updated_at": "2022-04-12T19:37:10Z",
        "author_association": "MEMBER",
        "body": "cc @martindurant",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1097137994/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1112855357",
        "html_url": "https://github.com/dask/dask/pull/8918#issuecomment-1112855357",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/8918",
        "id": 1112855357,
        "node_id": "IC_kwDOAbcwm85CVNM9",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-04-29T04:01:49Z",
        "updated_at": "2022-04-29T04:01:49Z",
        "author_association": "MEMBER",
        "body": "Is there anything else still needed here from your perspective @grlee77? Is this ready for review?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1112855357/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]