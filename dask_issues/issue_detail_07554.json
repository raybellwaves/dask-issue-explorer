{
    "url": "https://api.github.com/repos/dask/dask/issues/7554",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/7554/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/7554/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/7554/events",
    "html_url": "https://github.com/dask/dask/issues/7554",
    "id": 857007924,
    "node_id": "MDU6SXNzdWU4NTcwMDc5MjQ=",
    "number": 7554,
    "title": "Blockwise chunk alignment metadata incorrect",
    "user": {
        "login": "jsignell",
        "id": 4806877,
        "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jsignell",
        "html_url": "https://github.com/jsignell",
        "followers_url": "https://api.github.com/users/jsignell/followers",
        "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
        "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
        "organizations_url": "https://api.github.com/users/jsignell/orgs",
        "repos_url": "https://api.github.com/users/jsignell/repos",
        "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
        "received_events_url": "https://api.github.com/users/jsignell/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 242862305,
            "node_id": "MDU6TGFiZWwyNDI4NjIzMDU=",
            "url": "https://api.github.com/repos/dask/dask/labels/array",
            "name": "array",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 5,
    "created_at": "2021-04-13T14:16:39Z",
    "updated_at": "2021-04-15T21:00:33Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "The shapes of `z` and `z.compute()` don't match. This leads to lots of other strange behavior like slicing not working properly.\r\n\r\n```python\r\nimport operator\r\nimport numpy as np\r\nimport dask.array as da\r\n\u200b\r\na = da.from_array([0, 1, 2], chunks=1)\r\nb = da.from_array([10, 50, 100], chunks=3)\r\nz = da.blockwise(np.outer, 'ji', a, 'i', b, 'j')\r\nda.utils.assert_eq(z, z)\r\n```\r\n```python-traceback\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-18-034a387c96f6> in <module>\r\n----> 1 da.utils.assert_eq(z, z)\r\n\r\n~/conda/envs/dask-dev/lib/python3.8/site-packages/dask/array/utils.py in assert_eq(a, b, check_shape, check_graph, check_meta, **kwargs)\r\n    259     b_original = b\r\n    260 \r\n--> 261     a, adt, a_meta, a_computed = _get_dt_meta_computed(\r\n    262         a, check_shape=check_shape, check_graph=check_graph\r\n    263     )\r\n\r\n~/conda/envs/dask-dev/lib/python3.8/site-packages/dask/array/utils.py in _get_dt_meta_computed(x, check_shape, check_graph)\r\n    246             assert x.dtype == x_original.dtype\r\n    247         if check_shape:\r\n--> 248             assert_eq_shape(x_original.shape, x.shape, check_nan=False)\r\n    249     else:\r\n    250         if not hasattr(x, \"dtype\"):\r\n\r\n~/conda/envs/dask-dev/lib/python3.8/site-packages/dask/array/utils.py in assert_eq_shape(a, b, check_nan)\r\n    223                 assert math.isnan(aa) == math.isnan(bb)\r\n    224         else:\r\n--> 225             assert aa == bb\r\n    226 \r\n    227 \r\n\r\nAssertionError: \r\n```",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/7554/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/7554/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}