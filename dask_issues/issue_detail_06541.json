{
    "url": "https://api.github.com/repos/dask/dask/issues/6541",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/6541/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/6541/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/6541/events",
    "html_url": "https://github.com/dask/dask/issues/6541",
    "id": 683959882,
    "node_id": "MDU6SXNzdWU2ODM5NTk4ODI=",
    "number": 6541,
    "title": "Partitions after `set_index`",
    "user": {
        "login": "nils-braun",
        "id": 6116188,
        "node_id": "MDQ6VXNlcjYxMTYxODg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6116188?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nils-braun",
        "html_url": "https://github.com/nils-braun",
        "followers_url": "https://api.github.com/users/nils-braun/followers",
        "following_url": "https://api.github.com/users/nils-braun/following{/other_user}",
        "gists_url": "https://api.github.com/users/nils-braun/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/nils-braun/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/nils-braun/subscriptions",
        "organizations_url": "https://api.github.com/users/nils-braun/orgs",
        "repos_url": "https://api.github.com/users/nils-braun/repos",
        "events_url": "https://api.github.com/users/nils-braun/events{/privacy}",
        "received_events_url": "https://api.github.com/users/nils-braun/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 4,
    "created_at": "2020-08-22T08:52:07Z",
    "updated_at": "2020-08-22T20:47:12Z",
    "closed_at": null,
    "author_association": "CONTRIBUTOR",
    "active_lock_reason": null,
    "body": "Needless to say, thanks for this great package :-)\r\nI am very sorry if this question was already asked - at least I could not find it (in this way):\r\n\r\nI am using `set_index` to sort a dask dataframe. However, the generated partitions are not what I expected:\r\n\r\n```python\r\nimport dask.dataframe as dd\r\nimport pandas as pd\r\n\r\n# This is what I would expect\r\ndf = dd.from_pandas(pd.DataFrame({\"a\": [1]*10 + [2]*10 + [3]*10}), npartitions=3)\r\ndf_sorted = df.set_index(\"a\", drop=False)\r\n\r\nfor i in range(df_sorted.npartitions):\r\n    print(df_sorted.get_partition(i).compute()) # prints [1...] [2...] [3...]\r\n\r\n# This is not what I expected\r\ndf = dd.from_pandas(pd.DataFrame({\"a\": [3]*10 + [2]*10 + [1]*10}), npartitions=3)\r\ndf_sorted = df.set_index(\"a\", drop=False)\r\n\r\nfor i in range(df_sorted.npartitions):\r\n    print(df_sorted.get_partition(i).compute()) # prints [ ] [1...] [2... 3...]\r\n```\r\n**What happened**:\r\n\r\nThe first part is as I expected: the resulting dataframe has partitions for the 1s, the 2s and the 3s after the sorting. They all have size 10.\r\nIn the second part however (after sorting), the first partition is empty, the second contains all the 1s (size 10) and the third all the 2s and 3s (size 20). \r\n\r\nI just would like to understand if this is expected behavior (and if yes, if you could give me a hint why this is preferred).\r\n\r\n**Environment**:\r\n\r\n- Dask version: current master\r\n- Python version: 3.7.6\r\n- Operating System: Ubuntu\r\n- Install method (conda, pip, source): source\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/6541/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/6541/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}