{
    "url": "https://api.github.com/repos/dask/dask/issues/2883",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/2883/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/2883/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/2883/events",
    "html_url": "https://github.com/dask/dask/issues/2883",
    "id": 273261092,
    "node_id": "MDU6SXNzdWUyNzMyNjEwOTI=",
    "number": 2883,
    "title": "Explicitly handle array indexing types in dask.array.from_array",
    "user": {
        "login": "shoyer",
        "id": 1217238,
        "node_id": "MDQ6VXNlcjEyMTcyMzg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1217238?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shoyer",
        "html_url": "https://github.com/shoyer",
        "followers_url": "https://api.github.com/users/shoyer/followers",
        "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
        "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
        "organizations_url": "https://api.github.com/users/shoyer/orgs",
        "repos_url": "https://api.github.com/users/shoyer/repos",
        "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
        "received_events_url": "https://api.github.com/users/shoyer/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 242862305,
            "node_id": "MDU6TGFiZWwyNDI4NjIzMDU=",
            "url": "https://api.github.com/repos/dask/dask/labels/array",
            "name": "array",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 0,
    "created_at": "2017-11-12T20:16:29Z",
    "updated_at": "2017-11-18T23:44:01Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Over in https://github.com/dask/dask/pull/1776, @laliberte tried to fix a bug resulting from a combination between array optimization and inconsistencies with how different types of wrapped arrays handle indexing.\r\n\r\nThe immediate issue was fixed by disabling some optimizations. However, I still think it would be a good idea to explicitly indicate the types of indexing allowed by wrapped arrays. This would allow us to optimize more of these cases, and avoid bugs due to unclear behavior (see, e.g., https://github.com/pydata/xarray/pull/1705 for some corresponding clean-up in xarray).\r\n\r\nBased on our experience with xarray, there are three main cases that need to be considered:\r\n- \"Basic\" indexing that only supports integers and slices. This is common for simple array types, but probably doesn't need explicit support in dask.\r\n- \"Outer\" indexing (xref https://github.com/dask/dask/issues/2882 for support in dask). This includes netCDF4-Python, h5py (for one list-like indexer) and now zarr (https://github.com/alimanfoo/zarr/pull/172). Any combination of multiple outer and basic indexing calls can be optimized into a single outer indexer.\r\n- \"Vectorized\" or \"Fancy\" indexing of some form. This includes NumPy and zarr, and for dask would be an indication that optimization consolidating indexing calls is probably not feasible.\r\n\r\nI see two possible solutions:\r\n- An additional argument of some sort to `from_array` that allows for explicitly indicating that an argument supports a particular form of indexing. This is what was implemented in #1776. However, it requires knowing the type of indexing that will be done on an object before the indexing actually happens, which is not always possible or convenient.\r\n- Some way of passing *multiple* indexable objects to `from_array`, exposing different ways of indexing the same data. For example, `outer_indexable` and `vectorized_indexable` keywords arguments could be used to expose the multiple ways in which a NumPy array or zarr array can be indexed. Dask's indexing routines would be updated to index the appropriate array based on how they were called.\r\n\r\nCC @alimanfoo, @fujiisoup ",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/2883/reactions",
        "total_count": 2,
        "+1": 2,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/2883/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}