[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/841125037",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-841125037",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 841125037,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg0MTEyNTAzNw==",
        "user": {
            "login": "GenevieveBuckley",
            "id": 30920819,
            "node_id": "MDQ6VXNlcjMwOTIwODE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30920819?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GenevieveBuckley",
            "html_url": "https://github.com/GenevieveBuckley",
            "followers_url": "https://api.github.com/users/GenevieveBuckley/followers",
            "following_url": "https://api.github.com/users/GenevieveBuckley/following{/other_user}",
            "gists_url": "https://api.github.com/users/GenevieveBuckley/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GenevieveBuckley/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GenevieveBuckley/subscriptions",
            "organizations_url": "https://api.github.com/users/GenevieveBuckley/orgs",
            "repos_url": "https://api.github.com/users/GenevieveBuckley/repos",
            "events_url": "https://api.github.com/users/GenevieveBuckley/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GenevieveBuckley/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-14T09:20:56Z",
        "updated_at": "2021-05-14T09:20:56Z",
        "author_association": "MEMBER",
        "body": "Perhaps what's needed here is better culling of tasks for masked arrays?\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/841125037/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/841138323",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-841138323",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 841138323,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg0MTEzODMyMw==",
        "user": {
            "login": "system123",
            "id": 91509,
            "node_id": "MDQ6VXNlcjkxNTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/91509?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/system123",
            "html_url": "https://github.com/system123",
            "followers_url": "https://api.github.com/users/system123/followers",
            "following_url": "https://api.github.com/users/system123/following{/other_user}",
            "gists_url": "https://api.github.com/users/system123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/system123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/system123/subscriptions",
            "organizations_url": "https://api.github.com/users/system123/orgs",
            "repos_url": "https://api.github.com/users/system123/repos",
            "events_url": "https://api.github.com/users/system123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/system123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-14T09:47:31Z",
        "updated_at": "2021-05-14T09:47:31Z",
        "author_association": "NONE",
        "body": "That would probably be the easier approach, just check if the entire chunk is masked and if so then cull it.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/841138323/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/848179881",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-848179881",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 848179881,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg0ODE3OTg4MQ==",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-25T18:57:10Z",
        "updated_at": "2021-05-25T18:57:10Z",
        "author_association": "MEMBER",
        "body": "This seems vaguely similar to your work in #7655 right @GenevieveBuckley?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/848179881/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/848499691",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-848499691",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 848499691,
        "node_id": "MDEyOklzc3VlQ29tbWVudDg0ODQ5OTY5MQ==",
        "user": {
            "login": "GenevieveBuckley",
            "id": 30920819,
            "node_id": "MDQ6VXNlcjMwOTIwODE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/30920819?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GenevieveBuckley",
            "html_url": "https://github.com/GenevieveBuckley",
            "followers_url": "https://api.github.com/users/GenevieveBuckley/followers",
            "following_url": "https://api.github.com/users/GenevieveBuckley/following{/other_user}",
            "gists_url": "https://api.github.com/users/GenevieveBuckley/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/GenevieveBuckley/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/GenevieveBuckley/subscriptions",
            "organizations_url": "https://api.github.com/users/GenevieveBuckley/orgs",
            "repos_url": "https://api.github.com/users/GenevieveBuckley/repos",
            "events_url": "https://api.github.com/users/GenevieveBuckley/events{/privacy}",
            "received_events_url": "https://api.github.com/users/GenevieveBuckley/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-05-26T06:27:00Z",
        "updated_at": "2021-05-26T06:27:00Z",
        "author_association": "MEMBER",
        "body": "I don't think they're very similar. Right now https://github.com/dask/dask/pull/7655 is targeted only at low level slicing, not fancy indexing or masking. I'll see what Ian & Gabe think about it when I talk to them next.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/848499691/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1207939313",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1207939313",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1207939313,
        "node_id": "IC_kwDOAbcwm85H_7Dx",
        "user": {
            "login": "SultanOrazbayev",
            "id": 20208402,
            "node_id": "MDQ6VXNlcjIwMjA4NDAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/20208402?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SultanOrazbayev",
            "html_url": "https://github.com/SultanOrazbayev",
            "followers_url": "https://api.github.com/users/SultanOrazbayev/followers",
            "following_url": "https://api.github.com/users/SultanOrazbayev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SultanOrazbayev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SultanOrazbayev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SultanOrazbayev/subscriptions",
            "organizations_url": "https://api.github.com/users/SultanOrazbayev/orgs",
            "repos_url": "https://api.github.com/users/SultanOrazbayev/repos",
            "events_url": "https://api.github.com/users/SultanOrazbayev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SultanOrazbayev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-08T10:22:43Z",
        "updated_at": "2022-08-08T10:22:43Z",
        "author_association": "CONTRIBUTOR",
        "body": "I would like to express interest in this feature also. To give more context, I am interested in performing some operations on large sparse arrays, however given the scale of the matrices the number of tasks grows excessively even though most of those tasks are useless (e.g. adding a block of zeros to another block of zeros).\r\n\r\nOne strategy is removing tasks from `.dask` graph based on the chunks/blocks that are known to contain zeros, but there might be a better way of dealing with this and avoid creating tasks that are known to be unnecessary.\r\n\r\nDo you think it's feasible to add a block-level boolean attribute to designate if the block is `empty` (or all zeros), e.g. `self.block_is_empty` (True/False/None for empty, non-empty, unknown)? Then, the status of each block can be used to reduce tasks or pre-compute them (e.g. element-wise multiplication of an empty block with a non-empty block is an empty block). If there is interest in this, I can work on a PR with some guidance.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1207939313/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1207945850",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1207945850",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1207945850,
        "node_id": "IC_kwDOAbcwm85H_8p6",
        "user": {
            "login": "SultanOrazbayev",
            "id": 20208402,
            "node_id": "MDQ6VXNlcjIwMjA4NDAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/20208402?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SultanOrazbayev",
            "html_url": "https://github.com/SultanOrazbayev",
            "followers_url": "https://api.github.com/users/SultanOrazbayev/followers",
            "following_url": "https://api.github.com/users/SultanOrazbayev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SultanOrazbayev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SultanOrazbayev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SultanOrazbayev/subscriptions",
            "organizations_url": "https://api.github.com/users/SultanOrazbayev/orgs",
            "repos_url": "https://api.github.com/users/SultanOrazbayev/repos",
            "events_url": "https://api.github.com/users/SultanOrazbayev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SultanOrazbayev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-08T10:29:22Z",
        "updated_at": "2022-08-09T13:28:01Z",
        "author_association": "CONTRIBUTOR",
        "body": "This is a small example, but with some awareness about emptiness in the graph below only 3 tasks would be needed:\r\n\r\n```python\r\nfrom dask.array import eye\r\n\r\nI = eye(3, chunks=1)\r\n\r\nprint(\"Number of tasks:\", len((2 * I).dask))\r\n# Number of tasks: 18\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1207945850/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1209375363",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1209375363",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1209375363,
        "node_id": "IC_kwDOAbcwm85IFZqD",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-09T13:21:49Z",
        "updated_at": "2022-08-09T13:21:49Z",
        "author_association": "MEMBER",
        "body": "> Do you think it's feasible to add a block-level boolean attribute to designate if the block is `empty` (or all zeros), e.g. `self.block_is_empty` (True/False/None for empty, non-empty, unknown)?\r\n\r\nThis feels equivalent to `sum(self.block.shape) == 0`, if you agree then I think the challenge is less how to tell which chunks are empty and more how to pluck those chunks out of the array and get rid of any dependencies on them. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1209375363/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1209381177",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1209381177",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1209381177,
        "node_id": "IC_kwDOAbcwm85IFbE5",
        "user": {
            "login": "SultanOrazbayev",
            "id": 20208402,
            "node_id": "MDQ6VXNlcjIwMjA4NDAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/20208402?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SultanOrazbayev",
            "html_url": "https://github.com/SultanOrazbayev",
            "followers_url": "https://api.github.com/users/SultanOrazbayev/followers",
            "following_url": "https://api.github.com/users/SultanOrazbayev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SultanOrazbayev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SultanOrazbayev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SultanOrazbayev/subscriptions",
            "organizations_url": "https://api.github.com/users/SultanOrazbayev/orgs",
            "repos_url": "https://api.github.com/users/SultanOrazbayev/repos",
            "events_url": "https://api.github.com/users/SultanOrazbayev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SultanOrazbayev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-09T13:26:49Z",
        "updated_at": "2022-08-09T13:26:49Z",
        "author_association": "CONTRIBUTOR",
        "body": "I'm not sure I understand this approach correctly... shape of a block containing zeros is non-zero, right?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1209381177/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1209386990",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1209386990",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1209386990,
        "node_id": "IC_kwDOAbcwm85IFcfu",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-09T13:31:38Z",
        "updated_at": "2022-08-09T13:31:38Z",
        "author_association": "MEMBER",
        "body": "Oh I missed that you are talking about zero-filled chunks. You are right. I think the term `empty` threw me because in dask.dataframe that refers to a dataframe with no rows. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1209386990/reactions",
            "total_count": 1,
            "+1": 1,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1209391643",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1209391643",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1209391643,
        "node_id": "IC_kwDOAbcwm85IFdob",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-09T13:35:35Z",
        "updated_at": "2022-08-09T13:35:35Z",
        "author_association": "MEMBER",
        "body": "I think the approach that you have makes sense and if you plan to put it at the block-level then I think you won't get complaints. So it would be like `self.blocks[0,1].is_empty`?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1209391643/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1209426985",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1209426985",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1209426985,
        "node_id": "IC_kwDOAbcwm85IFmQp",
        "user": {
            "login": "SultanOrazbayev",
            "id": 20208402,
            "node_id": "MDQ6VXNlcjIwMjA4NDAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/20208402?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SultanOrazbayev",
            "html_url": "https://github.com/SultanOrazbayev",
            "followers_url": "https://api.github.com/users/SultanOrazbayev/followers",
            "following_url": "https://api.github.com/users/SultanOrazbayev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SultanOrazbayev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SultanOrazbayev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SultanOrazbayev/subscriptions",
            "organizations_url": "https://api.github.com/users/SultanOrazbayev/orgs",
            "repos_url": "https://api.github.com/users/SultanOrazbayev/repos",
            "events_url": "https://api.github.com/users/SultanOrazbayev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SultanOrazbayev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-09T14:04:30Z",
        "updated_at": "2022-08-09T14:04:30Z",
        "author_association": "CONTRIBUTOR",
        "body": "Yes, except given your comment, perhaps a better name is `.is_all_zeros` (or something that emphasizes zeros). The reason `zeros` is good to emphasize is because the implemented logic should be special to the case of zero-filled matrix (so if someone had a `sparse` matrix with non-zero fill value, the optimizations would not necessarily apply).\r\n\r\nSome of the optimizations possible for blocks that contain only zero values:\r\n- no need to multiply with the other block (both elementwise and dot), can return block of zeros (with exceptions if the other block has nan/inf)\r\n- no need to add with the other block, can return the other block\r\n- no need to transpose\r\n- can apply ufunc to a single zero block and re-use the result for all zero blocks (maybe this is too much optimization)\r\n\r\nThere's probably more... for very large sparse arrays, this can lead to a substantial reduction in computational graph (these computations are fast, it's more a question of not burdening the scheduler), I hope however this doesn't too add much overhead for dense arrays with few zero-only blocks.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1209426985/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1209808717",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1209808717",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1209808717,
        "node_id": "IC_kwDOAbcwm85IHDdN",
        "user": {
            "login": "system123",
            "id": 91509,
            "node_id": "MDQ6VXNlcjkxNTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/91509?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/system123",
            "html_url": "https://github.com/system123",
            "followers_url": "https://api.github.com/users/system123/followers",
            "following_url": "https://api.github.com/users/system123/following{/other_user}",
            "gists_url": "https://api.github.com/users/system123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/system123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/system123/subscriptions",
            "organizations_url": "https://api.github.com/users/system123/orgs",
            "repos_url": "https://api.github.com/users/system123/repos",
            "events_url": "https://api.github.com/users/system123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/system123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-09T19:51:23Z",
        "updated_at": "2022-08-09T19:51:23Z",
        "author_association": "NONE",
        "body": "I'd suggest `is_nodata` or something along those lines to abstract it further away from any specific value (for instance, in my application, these values are often `nan`). \r\n\r\nTo avoid any impact to dense arrays, perhaps we want to subclass this into a `sparse_array` so that there is no performance hit for standard arrays (which I'd assume are a large percentage of use cases)",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1209808717/reactions",
            "total_count": 3,
            "+1": 3,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1219758741",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1219758741",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1219758741,
        "node_id": "IC_kwDOAbcwm85ItAqV",
        "user": {
            "login": "hansmohrmann",
            "id": 99441529,
            "node_id": "U_kgDOBe1beQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/99441529?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hansmohrmann",
            "html_url": "https://github.com/hansmohrmann",
            "followers_url": "https://api.github.com/users/hansmohrmann/followers",
            "following_url": "https://api.github.com/users/hansmohrmann/following{/other_user}",
            "gists_url": "https://api.github.com/users/hansmohrmann/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hansmohrmann/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hansmohrmann/subscriptions",
            "organizations_url": "https://api.github.com/users/hansmohrmann/orgs",
            "repos_url": "https://api.github.com/users/hansmohrmann/repos",
            "events_url": "https://api.github.com/users/hansmohrmann/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hansmohrmann/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-18T17:38:11Z",
        "updated_at": "2022-08-18T17:38:11Z",
        "author_association": "NONE",
        "body": "I am also registering my interest in such a feature! I have been trying both by using the `sparse ` library (per [this ](https://docs.dask.org/en/latest/array-sparse.html)reference) and by using `da.masked_array`, but it does not appear that either reduces computation in the case of very sparse array operations (even just the example on the `array-sparse` page above runs slower on using `sparse`).\r\n\r\nAs for `is_zero `vs `is_nodata`, I am not sure these are entirely equivalent; in the case of elementwise multiplication, for instance, optimizing over an entire block of `zeros `is perfectly legitimate, and the result is mathematically zero; if that block is instead all `nan`, the desired result might be `nan `instead of `zero`, so I'm not sure if it should be generalized from zero to nan.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1219758741/reactions",
            "total_count": 2,
            "+1": 2,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1220447883",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1220447883",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1220447883,
        "node_id": "IC_kwDOAbcwm85Ivo6L",
        "user": {
            "login": "SultanOrazbayev",
            "id": 20208402,
            "node_id": "MDQ6VXNlcjIwMjA4NDAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/20208402?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SultanOrazbayev",
            "html_url": "https://github.com/SultanOrazbayev",
            "followers_url": "https://api.github.com/users/SultanOrazbayev/followers",
            "following_url": "https://api.github.com/users/SultanOrazbayev/following{/other_user}",
            "gists_url": "https://api.github.com/users/SultanOrazbayev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/SultanOrazbayev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/SultanOrazbayev/subscriptions",
            "organizations_url": "https://api.github.com/users/SultanOrazbayev/orgs",
            "repos_url": "https://api.github.com/users/SultanOrazbayev/repos",
            "events_url": "https://api.github.com/users/SultanOrazbayev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/SultanOrazbayev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-19T09:17:38Z",
        "updated_at": "2022-08-19T09:17:38Z",
        "author_association": "CONTRIBUTOR",
        "body": "Thanks, @hansmohrmann ! I got in touch with @system123 and promised to tag him once I get a meaningful progress on a PR. I can tag you also, or if you want to work on it in sync (or any other action plan) kindly get in touch by email or LinkedIn and we can coordinate on a call.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1220447883/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1220532894",
        "html_url": "https://github.com/dask/dask/issues/7652#issuecomment-1220532894",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7652",
        "id": 1220532894,
        "node_id": "IC_kwDOAbcwm85Iv9qe",
        "user": {
            "login": "system123",
            "id": 91509,
            "node_id": "MDQ6VXNlcjkxNTA5",
            "avatar_url": "https://avatars.githubusercontent.com/u/91509?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/system123",
            "html_url": "https://github.com/system123",
            "followers_url": "https://api.github.com/users/system123/followers",
            "following_url": "https://api.github.com/users/system123/following{/other_user}",
            "gists_url": "https://api.github.com/users/system123/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/system123/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/system123/subscriptions",
            "organizations_url": "https://api.github.com/users/system123/orgs",
            "repos_url": "https://api.github.com/users/system123/repos",
            "events_url": "https://api.github.com/users/system123/events{/privacy}",
            "received_events_url": "https://api.github.com/users/system123/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2022-08-19T10:50:30Z",
        "updated_at": "2022-08-19T10:50:30Z",
        "author_association": "NONE",
        "body": "@hansmohrmann fair point. I think taking that into account we could design this to optimize both for the case where all values are `zero` as this continues to hold mathematically, as well as for the case were all values are `masked` as the mask is essentially telling us that there are no guarentees about the data points underneath. This way in a case such as mine I can convert my `nan` points to a data mask (as I tried before) and work from there. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1220532894/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]