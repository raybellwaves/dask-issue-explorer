[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1398760780",
        "html_url": "https://github.com/dask/dask/issues/9859#issuecomment-1398760780",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9859",
        "id": 1398760780,
        "node_id": "IC_kwDOAbcwm85TX2VM",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-20T18:11:11Z",
        "updated_at": "2023-01-20T18:11:23Z",
        "author_association": "MEMBER",
        "body": "I really like this idea. It gets at an issue that I have struggled with before: https://github.com/dask/dask/discussions/7202 \r\n\r\nThere is also the similar sounding https://distributed.dask.org/en/stable/api.html#distributed.print which is different, but we should know how to explain that difference. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1398760780/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1404082158",
        "html_url": "https://github.com/dask/dask/issues/9859#issuecomment-1404082158",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9859",
        "id": 1404082158,
        "node_id": "IC_kwDOAbcwm85TsJfu",
        "user": {
            "login": "gjoseph92",
            "id": 3309802,
            "node_id": "MDQ6VXNlcjMzMDk4MDI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3309802?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gjoseph92",
            "html_url": "https://github.com/gjoseph92",
            "followers_url": "https://api.github.com/users/gjoseph92/followers",
            "following_url": "https://api.github.com/users/gjoseph92/following{/other_user}",
            "gists_url": "https://api.github.com/users/gjoseph92/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/gjoseph92/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/gjoseph92/subscriptions",
            "organizations_url": "https://api.github.com/users/gjoseph92/orgs",
            "repos_url": "https://api.github.com/users/gjoseph92/repos",
            "events_url": "https://api.github.com/users/gjoseph92/events{/privacy}",
            "received_events_url": "https://api.github.com/users/gjoseph92/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-01-25T18:53:17Z",
        "updated_at": "2023-01-25T18:53:17Z",
        "author_association": "MEMBER",
        "body": "> There is also the similar sounding https://distributed.dask.org/en/stable/api.html#distributed.print which is different, but we should know how to explain that difference.\r\n\r\nYeah, not sure about naming (that's why I didn't pick one yet). Maybe `dask.log`, `dask.record`, `dask.debug`?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1404082158/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1559694893",
        "html_url": "https://github.com/dask/dask/issues/9859#issuecomment-1559694893",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9859",
        "id": 1559694893,
        "node_id": "IC_kwDOAbcwm85c9w4t",
        "user": {
            "login": "fjetter",
            "id": 8629629,
            "node_id": "MDQ6VXNlcjg2Mjk2Mjk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8629629?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjetter",
            "html_url": "https://github.com/fjetter",
            "followers_url": "https://api.github.com/users/fjetter/followers",
            "following_url": "https://api.github.com/users/fjetter/following{/other_user}",
            "gists_url": "https://api.github.com/users/fjetter/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fjetter/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fjetter/subscriptions",
            "organizations_url": "https://api.github.com/users/fjetter/orgs",
            "repos_url": "https://api.github.com/users/fjetter/repos",
            "events_url": "https://api.github.com/users/fjetter/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fjetter/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-23T15:41:57Z",
        "updated_at": "2023-05-23T15:41:57Z",
        "author_association": "MEMBER",
        "body": "A think a simple way to achieve this is to just wrap the calling function with something like\r\n\r\n```python\r\ndef _remote_print_results(func, format_string=\"\", *args, **kwargs):\r\n    from distributed import print\r\n    res = func(*args, **kwargs)\r\n    if format_string:\r\n        print(format_string)\r\n    else:\r\n        print(res)\r\n    return res\r\n```\r\n\r\nsee https://distributed.dask.org/en/stable/api.html#distributed.print\r\n\r\nWe should ensure that the function name of a wrapped function is the same as before to not throw off the dashboard, etc.\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1559694893/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1559699493",
        "html_url": "https://github.com/dask/dask/issues/9859#issuecomment-1559699493",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9859",
        "id": 1559699493,
        "node_id": "IC_kwDOAbcwm85c9yAl",
        "user": {
            "login": "fjetter",
            "id": 8629629,
            "node_id": "MDQ6VXNlcjg2Mjk2Mjk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8629629?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjetter",
            "html_url": "https://github.com/fjetter",
            "followers_url": "https://api.github.com/users/fjetter/followers",
            "following_url": "https://api.github.com/users/fjetter/following{/other_user}",
            "gists_url": "https://api.github.com/users/fjetter/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fjetter/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fjetter/subscriptions",
            "organizations_url": "https://api.github.com/users/fjetter/orgs",
            "repos_url": "https://api.github.com/users/fjetter/repos",
            "events_url": "https://api.github.com/users/fjetter/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fjetter/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-23T15:44:16Z",
        "updated_at": "2023-05-23T15:44:16Z",
        "author_association": "MEMBER",
        "body": "Re: name. I don't think we'll want to call this `print`. Maybe `log` as suggested above or even something verbose as `log_result`, etc. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1559699493/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1563213693",
        "html_url": "https://github.com/dask/dask/issues/9859#issuecomment-1563213693",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9859",
        "id": 1563213693,
        "node_id": "IC_kwDOAbcwm85dLL99",
        "user": {
            "login": "hendrikmakait",
            "id": 2699097,
            "node_id": "MDQ6VXNlcjI2OTkwOTc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2699097?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hendrikmakait",
            "html_url": "https://github.com/hendrikmakait",
            "followers_url": "https://api.github.com/users/hendrikmakait/followers",
            "following_url": "https://api.github.com/users/hendrikmakait/following{/other_user}",
            "gists_url": "https://api.github.com/users/hendrikmakait/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/hendrikmakait/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/hendrikmakait/subscriptions",
            "organizations_url": "https://api.github.com/users/hendrikmakait/orgs",
            "repos_url": "https://api.github.com/users/hendrikmakait/repos",
            "events_url": "https://api.github.com/users/hendrikmakait/events{/privacy}",
            "received_events_url": "https://api.github.com/users/hendrikmakait/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-25T16:47:26Z",
        "updated_at": "2023-05-25T16:47:26Z",
        "author_association": "MEMBER",
        "body": "> Re: name. I don't think we'll want to call this `print`. Maybe `log` as suggested above or even something verbose as `log_result`, etc.\r\n\r\nFWIW, I would rather not use `log*` for something unrelated to actual logging but more of a delayed `distributed.print` callback.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1563213693/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1565101739",
        "html_url": "https://github.com/dask/dask/issues/9859#issuecomment-1565101739",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9859",
        "id": 1565101739,
        "node_id": "IC_kwDOAbcwm85dSY6r",
        "user": {
            "login": "j-bennet",
            "id": 637013,
            "node_id": "MDQ6VXNlcjYzNzAxMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/637013?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/j-bennet",
            "html_url": "https://github.com/j-bennet",
            "followers_url": "https://api.github.com/users/j-bennet/followers",
            "following_url": "https://api.github.com/users/j-bennet/following{/other_user}",
            "gists_url": "https://api.github.com/users/j-bennet/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/j-bennet/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/j-bennet/subscriptions",
            "organizations_url": "https://api.github.com/users/j-bennet/orgs",
            "repos_url": "https://api.github.com/users/j-bennet/repos",
            "events_url": "https://api.github.com/users/j-bennet/events{/privacy}",
            "received_events_url": "https://api.github.com/users/j-bennet/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-05-27T00:25:33Z",
        "updated_at": "2023-05-27T00:25:33Z",
        "author_association": "MEMBER",
        "body": "POC here: https://github.com/dask/dask/pull/10321",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1565101739/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1593304649",
        "html_url": "https://github.com/dask/dask/issues/9859#issuecomment-1593304649",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9859",
        "id": 1593304649,
        "node_id": "IC_kwDOAbcwm85e9-ZJ",
        "user": {
            "login": "fjetter",
            "id": 8629629,
            "node_id": "MDQ6VXNlcjg2Mjk2Mjk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8629629?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjetter",
            "html_url": "https://github.com/fjetter",
            "followers_url": "https://api.github.com/users/fjetter/followers",
            "following_url": "https://api.github.com/users/fjetter/following{/other_user}",
            "gists_url": "https://api.github.com/users/fjetter/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/fjetter/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/fjetter/subscriptions",
            "organizations_url": "https://api.github.com/users/fjetter/orgs",
            "repos_url": "https://api.github.com/users/fjetter/repos",
            "events_url": "https://api.github.com/users/fjetter/events{/privacy}",
            "received_events_url": "https://api.github.com/users/fjetter/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-15T15:35:41Z",
        "updated_at": "2023-06-15T15:35:41Z",
        "author_association": "MEMBER",
        "body": "I thought about this problem again and my earlier suggestion was quite nonsense. @gjoseph92 already had a proper suggestion about the \"future on a stack and compute pops this off, etc.\". Implementing this is rather straight forward and looks like this\r\n\r\n```diff\r\ndiff --git a/dask/base.py b/dask/base.py\r\nindex c9e0491b7..ac5b9b8a6 100644\r\n--- a/dask/base.py\r\n+++ b/dask/base.py\r\n@@ -575,10 +575,13 @@ def compute(\r\n     >>> dask.compute({'a': a, 'b': b, 'c': 1})\r\n     ({'a': 45, 'b': 4.5, 'c': 1},)\r\n     \"\"\"\r\n-\r\n     collections, repack = unpack_collections(*args, traverse=traverse)\r\n     if not collections:\r\n         return args\r\n+    global _PRINT_QUEUE\r\n+    if _PRINT_QUEUE:\r\n+        collections.extend(_PRINT_QUEUE)\r\n+        _PRINT_QUEUE = []\r\n\r\n     schedule = get_scheduler(\r\n         scheduler=scheduler,\r\n@@ -1532,3 +1535,21 @@ def clone_key(key, seed):\r\n         prefix = key_split(key)\r\n         return prefix + \"-\" + tokenize(key, seed)\r\n     raise TypeError(f\"Expected str or tuple[str, Hashable, ...]; got {key}\")\r\n+\r\n+\r\n+_PRINT_QUEUE = []\r\n+\r\n+\r\n+def print_on_compute(msg=\"%s\", val=None):\r\n+    from dask import delayed\r\n+\r\n+    @delayed\r\n+    def _print_future(res):\r\n+        try:\r\n+            from distributed.worker import print\r\n+        except ImportError:\r\n+            pass\r\n+        print(msg % res)\r\n+\r\n+    _PRINT_QUEUE.append(_print_future(val))\r\n+    return val\r\n```\r\n\r\nIn this example implementation I haven't looked into any kind of edge cases and I expect there to be a few (e.g. the print futures should likely only be popped off if we're actually computing the result).\r\n\r\nThis looks quite promising. It would still impact graph optimization and such but for _content_ debugging this would still be very powerful.\r\n\r\n@j-bennet care to pick this up again and hammer out the details?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1593304649/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/1593335715",
        "html_url": "https://github.com/dask/dask/issues/9859#issuecomment-1593335715",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/9859",
        "id": 1593335715,
        "node_id": "IC_kwDOAbcwm85e-F-j",
        "user": {
            "login": "j-bennet",
            "id": 637013,
            "node_id": "MDQ6VXNlcjYzNzAxMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/637013?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/j-bennet",
            "html_url": "https://github.com/j-bennet",
            "followers_url": "https://api.github.com/users/j-bennet/followers",
            "following_url": "https://api.github.com/users/j-bennet/following{/other_user}",
            "gists_url": "https://api.github.com/users/j-bennet/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/j-bennet/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/j-bennet/subscriptions",
            "organizations_url": "https://api.github.com/users/j-bennet/orgs",
            "repos_url": "https://api.github.com/users/j-bennet/repos",
            "events_url": "https://api.github.com/users/j-bennet/events{/privacy}",
            "received_events_url": "https://api.github.com/users/j-bennet/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2023-06-15T15:56:43Z",
        "updated_at": "2023-06-15T15:56:43Z",
        "author_association": "MEMBER",
        "body": "@fjetter Sure, I'll take it.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/1593335715/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]