[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/299303258",
        "html_url": "https://github.com/dask/dask/issues/2299#issuecomment-299303258",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2299",
        "id": 299303258,
        "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTMwMzI1OA==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2017-05-04T20:43:16Z",
        "updated_at": "2017-05-04T20:43:16Z",
        "author_association": "MEMBER",
        "body": "What are the performance implications of this?  Both for graph construction and for graph serialization?\r\n\r\nI think that this problem is much less today than it was a few years ago (when you were doing most of the XArray work) because most non-core code is now written with dask.delayed, which helps users to avoid these issues.  \r\n\r\nToday I experience much more user-pressure about making graph construction and manipulation more efficient rather than about making it more safe.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/299303258/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/299320131",
        "html_url": "https://github.com/dask/dask/issues/2299#issuecomment-299320131",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2299",
        "id": 299320131,
        "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTMyMDEzMQ==",
        "user": {
            "login": "shoyer",
            "id": 1217238,
            "node_id": "MDQ6VXNlcjEyMTcyMzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1217238?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shoyer",
            "html_url": "https://github.com/shoyer",
            "followers_url": "https://api.github.com/users/shoyer/followers",
            "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
            "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
            "organizations_url": "https://api.github.com/users/shoyer/orgs",
            "repos_url": "https://api.github.com/users/shoyer/repos",
            "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shoyer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2017-05-04T21:54:29Z",
        "updated_at": "2017-05-04T21:54:29Z",
        "author_association": "MEMBER",
        "body": "> What are the performance implications of this? Both for graph construction and for graph serialization?\r\n\r\nThrowing out some educated guesses:\r\n\r\nGraph construction will be slightly slower, but not enough to be noticeable in most cases:\r\n```\r\n%timeit [Key(1, 2, 3) for _ in xrange(1000)]\r\n# 1000 loops, best of 3: 649 \u00b5s per loop\r\n%timeit [(1, 2, 3) for _ in xrange(1000)]\r\n# 10000 loops, best of 3: 44.8 \u00b5s per loop\r\n```\r\nThat's less than 1 ns of overhead (could be even less if we wrote the class in Cython).\r\n\r\nGraph serialization (with pickle) will also be slower and use more space. I measure about 10x slower and increased storage with cPickle and `protocol=pickle.HIGHEST_PROTOCOL`. Pickle has same case logic for tuples, but this could probably be optimized somewhat. I'm not entirely sure how performance critical this part is.\r\n\r\nGraph execution should be slightly faster, though again maybe not in a meaningful way (it's hard to beat `isinstance` for speed). I measure about a 50% speed increase for `isinstance(x, (Task, Key))` vs `dask.core.has_tasks`.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/299320131/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/299321074",
        "html_url": "https://github.com/dask/dask/issues/2299#issuecomment-299321074",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2299",
        "id": 299321074,
        "node_id": "MDEyOklzc3VlQ29tbWVudDI5OTMyMTA3NA==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2017-05-04T21:58:59Z",
        "updated_at": "2017-05-04T21:58:59Z",
        "author_association": "MEMBER",
        "body": "To give a sense of the level of attention this is getting now, we're at the point where `isinstance` is considered slow in inner loops.  We rarely call `has_tasks` or `is_task` anymore because of the function call cost.  We almost always start with `if type(x) is tuple`, just because this is significantly faster.  This isn't an argument against using classes (`if type(x) is Task1` is likely the same speed), but is just here to show that speed manipulating the graph matters greatly.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/299321074/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/349807573",
        "html_url": "https://github.com/dask/dask/issues/2299#issuecomment-349807573",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2299",
        "id": 349807573,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM0OTgwNzU3Mw==",
        "user": {
            "login": "shoyer",
            "id": 1217238,
            "node_id": "MDQ6VXNlcjEyMTcyMzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1217238?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shoyer",
            "html_url": "https://github.com/shoyer",
            "followers_url": "https://api.github.com/users/shoyer/followers",
            "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
            "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
            "organizations_url": "https://api.github.com/users/shoyer/orgs",
            "repos_url": "https://api.github.com/users/shoyer/repos",
            "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shoyer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2017-12-06T23:18:24Z",
        "updated_at": "2017-12-06T23:18:24Z",
        "author_association": "MEMBER",
        "body": "I just hit another internal bug in dask.array which was slow to debug because of literal/task confusion. Unrelated runtime errors (typically `TypeError` or `ValueError`) make this tricky to diagnose.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/349807573/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/353800983",
        "html_url": "https://github.com/dask/dask/issues/2299#issuecomment-353800983",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2299",
        "id": 353800983,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM1MzgwMDk4Mw==",
        "user": {
            "login": "shoyer",
            "id": 1217238,
            "node_id": "MDQ6VXNlcjEyMTcyMzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1217238?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shoyer",
            "html_url": "https://github.com/shoyer",
            "followers_url": "https://api.github.com/users/shoyer/followers",
            "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
            "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
            "organizations_url": "https://api.github.com/users/shoyer/orgs",
            "repos_url": "https://api.github.com/users/shoyer/repos",
            "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shoyer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2017-12-24T20:02:07Z",
        "updated_at": "2017-12-24T20:02:07Z",
        "author_association": "MEMBER",
        "body": "One way to handle this would be to write an optional extension module in Cython, which I recall @mrocklin has already considered for speeding up dask's guts.\r\n\r\nActually, I suppose the distribution story for extension modules without additional dependencies is good enough these days that we may not even need to make it optional.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/353800983/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/372363062",
        "html_url": "https://github.com/dask/dask/issues/2299#issuecomment-372363062",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2299",
        "id": 372363062,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjM2MzA2Mg==",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-03-12T16:02:18Z",
        "updated_at": "2018-03-12T16:02:18Z",
        "author_association": "MEMBER",
        "body": "> ...an optional extension module in Cython...\r\n\r\nAre you think of CyToolz or were there different operations that you were thinking about?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/372363062/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/372379105",
        "html_url": "https://github.com/dask/dask/issues/2299#issuecomment-372379105",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2299",
        "id": 372379105,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM3MjM3OTEwNQ==",
        "user": {
            "login": "shoyer",
            "id": 1217238,
            "node_id": "MDQ6VXNlcjEyMTcyMzg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1217238?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/shoyer",
            "html_url": "https://github.com/shoyer",
            "followers_url": "https://api.github.com/users/shoyer/followers",
            "following_url": "https://api.github.com/users/shoyer/following{/other_user}",
            "gists_url": "https://api.github.com/users/shoyer/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/shoyer/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/shoyer/subscriptions",
            "organizations_url": "https://api.github.com/users/shoyer/orgs",
            "repos_url": "https://api.github.com/users/shoyer/repos",
            "events_url": "https://api.github.com/users/shoyer/events{/privacy}",
            "received_events_url": "https://api.github.com/users/shoyer/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-03-12T16:46:07Z",
        "updated_at": "2018-03-12T16:46:07Z",
        "author_association": "MEMBER",
        "body": "> Are you think of CyToolz or were there different operations that you were thinking about?\r\n\r\nI was thinking specifically for defining `Task` and `Key` extension types. Writing these in Cython brings the overhead of using a custom type down to near zero (vs reusing a builtin type like tuple).",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/372379105/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]