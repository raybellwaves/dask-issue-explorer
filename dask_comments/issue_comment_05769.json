[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/571672049",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-571672049",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 571672049,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTY3MjA0OQ==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-07T16:48:41Z",
        "updated_at": "2020-01-07T16:48:41Z",
        "author_association": "MEMBER",
        "body": "I wonder if some of the Xarray folks like @jhamman know people that would be able to help here.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/571672049/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/571699722",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-571699722",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 571699722,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTY5OTcyMg==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-07T17:57:18Z",
        "updated_at": "2020-01-07T17:57:18Z",
        "author_association": "MEMBER",
        "body": "Maybe Dask Array should grow a `read_hdf` function?  Also cc'ing @shoyer ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/571699722/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/571706640",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-571706640",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 571706640,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTcwNjY0MA==",
        "user": {
            "login": "jhamman",
            "id": 2443309,
            "node_id": "MDQ6VXNlcjI0NDMzMDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2443309?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jhamman",
            "html_url": "https://github.com/jhamman",
            "followers_url": "https://api.github.com/users/jhamman/followers",
            "following_url": "https://api.github.com/users/jhamman/following{/other_user}",
            "gists_url": "https://api.github.com/users/jhamman/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jhamman/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jhamman/subscriptions",
            "organizations_url": "https://api.github.com/users/jhamman/orgs",
            "repos_url": "https://api.github.com/users/jhamman/repos",
            "events_url": "https://api.github.com/users/jhamman/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jhamman/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-07T18:15:45Z",
        "updated_at": "2020-01-07T18:15:45Z",
        "author_association": "MEMBER",
        "body": "Xarray essentially uses the `da.from_array` syntax shown above. We also (optionally) enable using delayed functions to parallelize opening many datasets at once (sharding the initial file IO like you are doing here). The main difference though is that we don't wait until the end to do both computations -- instead computing (creating) the dask arrays after looping through all files. This let's us start working with full arrays (and their metadata in our case) earlier while still deferring the final computation until the user requests it. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/571706640/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/571706821",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-571706821",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 571706821,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3MTcwNjgyMQ==",
        "user": {
            "login": "jhamman",
            "id": 2443309,
            "node_id": "MDQ6VXNlcjI0NDMzMDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2443309?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jhamman",
            "html_url": "https://github.com/jhamman",
            "followers_url": "https://api.github.com/users/jhamman/followers",
            "following_url": "https://api.github.com/users/jhamman/following{/other_user}",
            "gists_url": "https://api.github.com/users/jhamman/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jhamman/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jhamman/subscriptions",
            "organizations_url": "https://api.github.com/users/jhamman/orgs",
            "repos_url": "https://api.github.com/users/jhamman/repos",
            "events_url": "https://api.github.com/users/jhamman/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jhamman/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-07T18:16:15Z",
        "updated_at": "2020-01-07T18:16:15Z",
        "author_association": "MEMBER",
        "body": "I also feel like @martindurant will have good ideas on this one.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/571706821/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/572351756",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-572351756",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 572351756,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3MjM1MTc1Ng==",
        "user": {
            "login": "chrisroat",
            "id": 1053153,
            "node_id": "MDQ6VXNlcjEwNTMxNTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1053153?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/chrisroat",
            "html_url": "https://github.com/chrisroat",
            "followers_url": "https://api.github.com/users/chrisroat/followers",
            "following_url": "https://api.github.com/users/chrisroat/following{/other_user}",
            "gists_url": "https://api.github.com/users/chrisroat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/chrisroat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/chrisroat/subscriptions",
            "organizations_url": "https://api.github.com/users/chrisroat/orgs",
            "repos_url": "https://api.github.com/users/chrisroat/repos",
            "events_url": "https://api.github.com/users/chrisroat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/chrisroat/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-09T02:23:52Z",
        "updated_at": "2020-01-09T02:23:52Z",
        "author_association": "CONTRIBUTOR",
        "body": "@jhamman Can you point me to what you do?  In my code example, if I go with the `da.from_array` option, and have to do two computes: `result.compute().compute()`.  Do you manage to avoid that?  Or how do you work around it?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/572351756/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/573193150",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-573193150",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 573193150,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3MzE5MzE1MA==",
        "user": {
            "login": "jhamman",
            "id": 2443309,
            "node_id": "MDQ6VXNlcjI0NDMzMDk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2443309?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jhamman",
            "html_url": "https://github.com/jhamman",
            "followers_url": "https://api.github.com/users/jhamman/followers",
            "following_url": "https://api.github.com/users/jhamman/following{/other_user}",
            "gists_url": "https://api.github.com/users/jhamman/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jhamman/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jhamman/subscriptions",
            "organizations_url": "https://api.github.com/users/jhamman/orgs",
            "repos_url": "https://api.github.com/users/jhamman/repos",
            "events_url": "https://api.github.com/users/jhamman/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jhamman/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-10T20:28:31Z",
        "updated_at": "2020-01-10T20:28:31Z",
        "author_association": "MEMBER",
        "body": "@chrisroat -\r\n\r\nWe wrap our open function in delayed here:\r\n\r\nhttps://github.com/pydata/xarray/blob/ff75081304eb2e2784dcb229cc48a532da557896/xarray/backends/api.py#L888-L908\r\n\r\nUnfortunately, the `from_array` pieces are buried pretty deep in Xarray's indexing wrapper's. \r\n\r\n> if I go with the da.from_array option, and have to do two computes: result.compute().compute(). Do you manage to avoid that?\r\n\r\nWe essentially do end up with two computes. But as I hinted at above, we trigger the first compute internally and leave the second one to the user. \r\n\r\nI'm not 100% sure but I think in your case, you may be able to get away with `result.persist().compute()`. ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/573193150/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/576396443",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-576396443",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 576396443,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3NjM5NjQ0Mw==",
        "user": {
            "login": "chrisroat",
            "id": 1053153,
            "node_id": "MDQ6VXNlcjEwNTMxNTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1053153?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/chrisroat",
            "html_url": "https://github.com/chrisroat",
            "followers_url": "https://api.github.com/users/chrisroat/followers",
            "following_url": "https://api.github.com/users/chrisroat/following{/other_user}",
            "gists_url": "https://api.github.com/users/chrisroat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/chrisroat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/chrisroat/subscriptions",
            "organizations_url": "https://api.github.com/users/chrisroat/orgs",
            "repos_url": "https://api.github.com/users/chrisroat/repos",
            "events_url": "https://api.github.com/users/chrisroat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/chrisroat/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-20T19:01:06Z",
        "updated_at": "2020-01-22T06:29:13Z",
        "author_association": "CONTRIBUTOR",
        "body": "In the end, I just decided to return a numpy array directly.  I ran into a lot of trouble getting this working in a distributed setting.  The naive approach of just dropping in da.from_array leads to KilledWorker.  This was a default GKE cluster with n1-highmem-8 machines on the dask helm chart with zarr/h5py/gcsfs as EXTRA_CONDA_PACKAGES.\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/576396443/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/576758958",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-576758958",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 576758958,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3Njc1ODk1OA==",
        "user": {
            "login": "TomAugspurger",
            "id": 1312546,
            "node_id": "MDQ6VXNlcjEzMTI1NDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1312546?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TomAugspurger",
            "html_url": "https://github.com/TomAugspurger",
            "followers_url": "https://api.github.com/users/TomAugspurger/followers",
            "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
            "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
            "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
            "repos_url": "https://api.github.com/users/TomAugspurger/repos",
            "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-21T16:19:33Z",
        "updated_at": "2020-01-21T16:19:39Z",
        "author_association": "MEMBER",
        "body": "What do you recommend for moving forward with this issue @chrisroat?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/576758958/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/577030460",
        "html_url": "https://github.com/dask/dask/issues/5769#issuecomment-577030460",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5769",
        "id": 577030460,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU3NzAzMDQ2MA==",
        "user": {
            "login": "chrisroat",
            "id": 1053153,
            "node_id": "MDQ6VXNlcjEwNTMxNTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1053153?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/chrisroat",
            "html_url": "https://github.com/chrisroat",
            "followers_url": "https://api.github.com/users/chrisroat/followers",
            "following_url": "https://api.github.com/users/chrisroat/following{/other_user}",
            "gists_url": "https://api.github.com/users/chrisroat/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/chrisroat/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/chrisroat/subscriptions",
            "organizations_url": "https://api.github.com/users/chrisroat/orgs",
            "repos_url": "https://api.github.com/users/chrisroat/repos",
            "events_url": "https://api.github.com/users/chrisroat/events{/privacy}",
            "received_events_url": "https://api.github.com/users/chrisroat/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-01-22T06:34:07Z",
        "updated_at": "2020-01-22T06:34:07Z",
        "author_association": "CONTRIBUTOR",
        "body": "All I was able to get working in all contexts (single-threaded up to a kube cluster) was returning a straight numpy array.   I like the idea of a `read_hdf` method which could retain the chunking, but not quite sure how to get at it.\r\n\r\nIt's something that'll eventually make it up my priority list, as it's an inefficiency I'll want to get rid of down the line.  But no guarantees it'll be soon, particularly if it's not seen as a big need.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/577030460/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]