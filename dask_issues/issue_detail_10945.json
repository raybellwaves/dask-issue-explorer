{
    "url": "https://api.github.com/repos/dask/dask/issues/10945",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/10945/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/10945/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/10945/events",
    "html_url": "https://github.com/dask/dask/issues/10945",
    "id": 2147478544,
    "node_id": "I_kwDOAbcwm85__-wQ",
    "number": 10945,
    "title": "Pandas read_sql vs dask read_sql issues",
    "user": {
        "login": "frbelotto",
        "id": 24688087,
        "node_id": "MDQ6VXNlcjI0Njg4MDg3",
        "avatar_url": "https://avatars.githubusercontent.com/u/24688087?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/frbelotto",
        "html_url": "https://github.com/frbelotto",
        "followers_url": "https://api.github.com/users/frbelotto/followers",
        "following_url": "https://api.github.com/users/frbelotto/following{/other_user}",
        "gists_url": "https://api.github.com/users/frbelotto/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/frbelotto/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/frbelotto/subscriptions",
        "organizations_url": "https://api.github.com/users/frbelotto/orgs",
        "repos_url": "https://api.github.com/users/frbelotto/repos",
        "events_url": "https://api.github.com/users/frbelotto/events{/privacy}",
        "received_events_url": "https://api.github.com/users/frbelotto/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 3880424463,
            "node_id": "LA_kwDOAbcwm87nSpQP",
            "url": "https://api.github.com/repos/dask/dask/labels/needs%20triage",
            "name": "needs triage",
            "color": "eeeeee",
            "default": false,
            "description": "Needs a response from a contributor"
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 3,
    "created_at": "2024-02-21T18:57:15Z",
    "updated_at": "2024-05-24T19:06:10Z",
    "closed_at": null,
    "author_association": "NONE",
    "active_lock_reason": null,
    "body": "Hello guys,\r\nHelp here. The same command works on pandas but does not work on dask:\r\n\r\nPandas\r\n\r\n```\r\nimport pandas as pd\r\nsql = \"\"\"SELECT t1.NR_SEQL_SLCT_CPR\r\n        FROM ORANDPOW0000.SLCT_CPR_PRD_PCR t1\r\n        WHERE ROWNUM <= 1000\"\"\"\r\npd.read_sql(sql = sql, con=oracle.uri, index_col = 'nr_seql_slct_cpr')\r\n```\r\nIt does work and return me the table (I don't know why I cant upload pictures here)\r\n\r\nBut if I try with dask, it does not find the target table.\r\n```\r\nimport dask.dataframe as dd\r\nsql = \"\"\"SELECT t1.NR_SEQL_SLCT_CPR\r\n        FROM ORANDPOW0000.SLCT_CPR_PRD_PCR t1\r\n        WHERE ROWNUM <= 1000\"\"\"\r\ndd.read_sql(sql = sql, con=oracle.uri, index_col = 'nr_seql_slct_cpr')\r\n```\r\nGot \"NoSuchTableError\"\r\n```\r\n---------------------------------------------------------------------------\r\nNoSuchTableError                          Traceback (most recent call last)\r\nCell In[134], [line 5](vscode-notebook-cell:?execution_count=134&line=5)\r\n      [1](vscode-notebook-cell:?execution_count=134&line=1) import dask.dataframe as dd\r\n      [2](vscode-notebook-cell:?execution_count=134&line=2) sql = \"\"\"SELECT t1.NR_SEQL_SLCT_CPR\r\n      [3](vscode-notebook-cell:?execution_count=134&line=3)         FROM ORANDPOW0000.SLCT_CPR_PRD_PCR t1\r\n      [4](vscode-notebook-cell:?execution_count=134&line=4)         WHERE ROWNUM <= 1000\"\"\"\r\n----> [5](vscode-notebook-cell:?execution_count=134&line=5) dd.read_sql(sql = sql, con=oracle.uri, index_col = 'nr_seql_slct_cpr')\r\n\r\nFile [c:\\Users\\F3164582\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\dask\\dataframe\\io\\sql.py:393](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:393), in read_sql(sql, con, index_col, **kwargs)\r\n    [360](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:360) \"\"\"\r\n    [361](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:361) Read SQL query or database table into a DataFrame.\r\n    [362](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:362) \r\n   (...)\r\n    [390](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:390) read_sql_query : Read SQL query into a DataFrame.\r\n    [391](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:391) \"\"\"\r\n    [392](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:392) if isinstance(sql, str):\r\n--> [393](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:393)     return read_sql_table(sql, con, index_col, **kwargs)\r\n    [394](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:394) else:\r\n    [395](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:395)     return read_sql_query(sql, con, index_col, **kwargs)\r\n\r\nFile [c:\\Users\\F3164582\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\dask\\dataframe\\io\\sql.py:314](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:314), in read_sql_table(table_name, con, index_col, divisions, npartitions, limits, columns, bytes_per_chunk, head_rows, schema, meta, engine_kwargs, **kwargs)\r\n    [312](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:312) m = sa.MetaData()\r\n    [313](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:313) if isinstance(table_name, str):\r\n--> [314](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/dask/dataframe/io/sql.py:314)     table_name = sa.Table(table_name, m, autoload_with=engine, schema=schema)\r\n...\r\n   [1541](file:///C:/Users/F3164582/AppData/Local/Programs/Python/Python311/Lib/site-packages/sqlalchemy/engine/reflection.py:1541) if _reflect_info.table_options:\r\n\r\nNoSuchTableError: SELECT t1.NR_SEQL_SLCT_CPR\r\n        FROM ORANDPOW0000.SLCT_CPR_PRD_PCR t1\r\n        WHERE ROWNUM <= 1000\r\n```\r\n\r\n\r\n**Environment**:\r\n- Dask version: '2023.11.0'\r\n- Python version: 3.11.7\r\n- Operating System:  Windows 10\r\n- Install method (conda, pip, source): PIP\r\n",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/10945/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/10945/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}