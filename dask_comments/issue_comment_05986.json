[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/595833073",
        "html_url": "https://github.com/dask/dask/issues/5986#issuecomment-595833073",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5986",
        "id": 595833073,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU5NTgzMzA3Mw==",
        "user": {
            "login": "TomAugspurger",
            "id": 1312546,
            "node_id": "MDQ6VXNlcjEzMTI1NDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1312546?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TomAugspurger",
            "html_url": "https://github.com/TomAugspurger",
            "followers_url": "https://api.github.com/users/TomAugspurger/followers",
            "following_url": "https://api.github.com/users/TomAugspurger/following{/other_user}",
            "gists_url": "https://api.github.com/users/TomAugspurger/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/TomAugspurger/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/TomAugspurger/subscriptions",
            "organizations_url": "https://api.github.com/users/TomAugspurger/orgs",
            "repos_url": "https://api.github.com/users/TomAugspurger/repos",
            "events_url": "https://api.github.com/users/TomAugspurger/events{/privacy}",
            "received_events_url": "https://api.github.com/users/TomAugspurger/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-03-06T15:56:55Z",
        "updated_at": "2020-03-06T15:56:55Z",
        "author_association": "MEMBER",
        "body": "Can you provide a snippet with the input data  and expected output? Is this in a groupby context, i.e. the Dask version of\r\n\r\n```python\r\nIn [12]: df = pd.DataFrame({\"A\": ['a', 'a', 'b'], \"B\": [1, 2, 3], \"C\": [4, 5, 4]})\r\n\r\nIn [13]: df.groupby(\"A\").quantile()\r\nOut[13]:\r\n     B    C\r\nA\r\na  1.5  4.5\r\nb  3.0  4.0\r\n```\r\n\r\nOne slight complication is that quantile isn't always an aggregation.\r\n\r\n```python\r\nIn [14]: df.groupby(\"A\").quantile([0.5, 0.75])\r\nOut[14]:\r\n           B     C\r\nA\r\na 0.50  1.50  4.50\r\n  0.75  1.75  4.75\r\nb 0.50  3.00  4.00\r\n  0.75  3.00  4.00\r\n```\r\n\r\nIt may still be doable though.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/595833073/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/595851176",
        "html_url": "https://github.com/dask/dask/issues/5986#issuecomment-595851176",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5986",
        "id": 595851176,
        "node_id": "MDEyOklzc3VlQ29tbWVudDU5NTg1MTE3Ng==",
        "user": {
            "login": "Amyantis",
            "id": 16001402,
            "node_id": "MDQ6VXNlcjE2MDAxNDAy",
            "avatar_url": "https://avatars.githubusercontent.com/u/16001402?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Amyantis",
            "html_url": "https://github.com/Amyantis",
            "followers_url": "https://api.github.com/users/Amyantis/followers",
            "following_url": "https://api.github.com/users/Amyantis/following{/other_user}",
            "gists_url": "https://api.github.com/users/Amyantis/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Amyantis/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Amyantis/subscriptions",
            "organizations_url": "https://api.github.com/users/Amyantis/orgs",
            "repos_url": "https://api.github.com/users/Amyantis/repos",
            "events_url": "https://api.github.com/users/Amyantis/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Amyantis/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-03-06T16:34:39Z",
        "updated_at": "2020-03-06T16:35:08Z",
        "author_association": "NONE",
        "body": "Thank you for your answer.\r\n\r\nCorrect, this is in groupby context.\r\n\r\nHere is a snippet of what I would do using pure Pandas:\r\n```python\r\nIn [3]: import pandas as pd\r\n\r\n    def q25(s):\r\n        return s.quantile(0.25)\r\n\r\n    df_pandas = pd.DataFrame({\"car\": [1, 1, 2, 4, 4, 4], \"speed\": [1, 2, 3, 4, 5, 6]})\r\n    df_pandas.groupby(\"car\").speed.agg([\"mean\", q25])                       \r\n\r\nOut[3]:\r\n     mean   q25\r\ncar\r\n1     1.5  1.25\r\n2     3.0  3.00\r\n4     5.0  4.50\r\n\r\n```",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/595851176/reactions",
            "total_count": 6,
            "+1": 6,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/779369161",
        "html_url": "https://github.com/dask/dask/issues/5986#issuecomment-779369161",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5986",
        "id": 779369161,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc3OTM2OTE2MQ==",
        "user": {
            "login": "leonardokidd",
            "id": 14940941,
            "node_id": "MDQ6VXNlcjE0OTQwOTQx",
            "avatar_url": "https://avatars.githubusercontent.com/u/14940941?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/leonardokidd",
            "html_url": "https://github.com/leonardokidd",
            "followers_url": "https://api.github.com/users/leonardokidd/followers",
            "following_url": "https://api.github.com/users/leonardokidd/following{/other_user}",
            "gists_url": "https://api.github.com/users/leonardokidd/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/leonardokidd/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/leonardokidd/subscriptions",
            "organizations_url": "https://api.github.com/users/leonardokidd/orgs",
            "repos_url": "https://api.github.com/users/leonardokidd/repos",
            "events_url": "https://api.github.com/users/leonardokidd/events{/privacy}",
            "received_events_url": "https://api.github.com/users/leonardokidd/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-15T17:42:00Z",
        "updated_at": "2021-02-15T17:42:00Z",
        "author_association": "NONE",
        "body": "When I used df.groupby(\"A\").quantile(0.5). I got 'column not found quantile' as error.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/779369161/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/783483906",
        "html_url": "https://github.com/dask/dask/issues/5986#issuecomment-783483906",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5986",
        "id": 783483906,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc4MzQ4MzkwNg==",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-22T16:07:42Z",
        "updated_at": "2021-02-22T16:07:42Z",
        "author_association": "MEMBER",
        "body": "@leonardokidd this issue is still open because the feature that it is requesting has not been implemented yet. If you are interested in implementing it please open a Pull Request.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/783483906/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/881960838",
        "html_url": "https://github.com/dask/dask/issues/5986#issuecomment-881960838",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5986",
        "id": 881960838,
        "node_id": "IC_kwDOAbcwm840kaeG",
        "user": {
            "login": "istorch",
            "id": 15793069,
            "node_id": "MDQ6VXNlcjE1NzkzMDY5",
            "avatar_url": "https://avatars.githubusercontent.com/u/15793069?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/istorch",
            "html_url": "https://github.com/istorch",
            "followers_url": "https://api.github.com/users/istorch/followers",
            "following_url": "https://api.github.com/users/istorch/following{/other_user}",
            "gists_url": "https://api.github.com/users/istorch/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/istorch/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/istorch/subscriptions",
            "organizations_url": "https://api.github.com/users/istorch/orgs",
            "repos_url": "https://api.github.com/users/istorch/repos",
            "events_url": "https://api.github.com/users/istorch/events{/privacy}",
            "received_events_url": "https://api.github.com/users/istorch/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-17T21:15:51Z",
        "updated_at": "2021-07-17T21:15:51Z",
        "author_association": "NONE",
        "body": "I came up with a workaround for a particular case. If the groups that you want to calculate quantiles on are relatively small, you can separate them by partition, then use a dask Aggregation. Here is an example:\r\n```python\r\n# this puts different user ids on different partitions\r\ndf = df.set_index(\"user_id\")\r\n\r\nmedian_fun = dd.Aggregation(\r\n    name=\"median\",\r\n    # this computes the median on each partition\r\n    chunk=lambda s: s.median(),\r\n    # this combines results across partitions; the input should just be a list of length 1\r\n    agg=lambda s0: s0.sum(),\r\n)\r\n\r\nmedian_df = df.groupby(\"user_id\")[\"some_column\"].agg(median_fun)\r\n```\r\nIt seemed to work for the data I was working with, but I haven't thoroughly tested it. I am curious to see if anyone finds any issues with it.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/881960838/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/882628290",
        "html_url": "https://github.com/dask/dask/issues/5986#issuecomment-882628290",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/5986",
        "id": 882628290,
        "node_id": "IC_kwDOAbcwm840m9bC",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-07-19T15:10:10Z",
        "updated_at": "2021-07-19T15:10:10Z",
        "author_association": "MEMBER",
        "body": "Yeah that should work as long as all the data for each group is on exactly one partition. Nice!",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/882628290/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]