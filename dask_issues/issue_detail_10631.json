{
    "url": "https://api.github.com/repos/dask/dask/issues/10631",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/10631/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/10631/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/10631/events",
    "html_url": "https://github.com/dask/dask/issues/10631",
    "id": 1994805615,
    "node_id": "I_kwDOAbcwm8525lFv",
    "number": 10631,
    "title": "Improper conversions of object dtype to string[pyarrow]",
    "user": {
        "login": "mrocklin",
        "id": 306380,
        "node_id": "MDQ6VXNlcjMwNjM4MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mrocklin",
        "html_url": "https://github.com/mrocklin",
        "followers_url": "https://api.github.com/users/mrocklin/followers",
        "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
        "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
        "organizations_url": "https://api.github.com/users/mrocklin/orgs",
        "repos_url": "https://api.github.com/users/mrocklin/repos",
        "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
        "received_events_url": "https://api.github.com/users/mrocklin/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 1372867996,
            "node_id": "MDU6TGFiZWwxMzcyODY3OTk2",
            "url": "https://api.github.com/repos/dask/dask/labels/discussion",
            "name": "discussion",
            "color": "bebaf4",
            "default": false,
            "description": "Discussing a topic with no specific actions yet"
        },
        {
            "id": 6137710172,
            "node_id": "LA_kwDOAbcwm88AAAABbdYGXA",
            "url": "https://api.github.com/repos/dask/dask/labels/convert-string",
            "name": "convert-string",
            "color": "d93f0b",
            "default": false,
            "description": ""
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 7,
    "created_at": "2023-11-15T13:43:30Z",
    "updated_at": "2024-01-29T19:31:11Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "I'm really happy about the use of pyarrow string by default for strings.  I think that it solves a lot of performance problems that made things unusable.  \r\n\r\nHowever, it seems like there are also frequent user errors about this feature, probably not enough to warrant turning it off, but enough that we should maybe think about it at a high level.  My sense is that people have various code that creates non-string objects and that we overly eagerly convert those to string[pyarrow] type.  Situations that I've observed:\r\n\r\n- types like \r\n    - decimal\r\n    - list\r\n    - date\r\n    - struct\r\n-  when ...\r\n    - reading parquet\r\n    - specifying `meta=(\"name\", object)`\r\n    - shuffling?\r\n\r\nI suspect/hope that there are ways to reduce some of these errant conversions that don't stop the general benefit of using pyarrow strings.  For example, I suspect that we could add mappings to the arrow type mapper when reading parquet.  I did this in https://github.com/dask-contrib/dask-expr/pull/373 and it worked fine I think?  Probably if the user specifies `object` as a dtype then we should respect it.  \r\n\r\nI'm curious to learn more about what's possible and not possible when solving this problem.  My guess is that that we can improve the situation, even if we don't solve it entirely.\r\n\r\ncc @phofl @jrbourbeau @fjetter ",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/10631/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/10631/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}