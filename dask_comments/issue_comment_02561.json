[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/491839099",
        "html_url": "https://github.com/dask/dask/issues/2561#issuecomment-491839099",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2561",
        "id": 491839099,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTgzOTA5OQ==",
        "user": {
            "login": "pentschev",
            "id": 4398246,
            "node_id": "MDQ6VXNlcjQzOTgyNDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4398246?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pentschev",
            "html_url": "https://github.com/pentschev",
            "followers_url": "https://api.github.com/users/pentschev/followers",
            "following_url": "https://api.github.com/users/pentschev/following{/other_user}",
            "gists_url": "https://api.github.com/users/pentschev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pentschev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pentschev/subscriptions",
            "organizations_url": "https://api.github.com/users/pentschev/orgs",
            "repos_url": "https://api.github.com/users/pentschev/repos",
            "events_url": "https://api.github.com/users/pentschev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pentschev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-13T14:11:27Z",
        "updated_at": "2019-05-13T14:11:27Z",
        "author_association": "MEMBER",
        "body": "Another example:\r\n\r\n```python\r\nIn [1]: import numpy as np\r\n\r\nIn [2]: import dask.array as da\r\n\r\nIn [3]: n = np.random.random((2, 3, 4))\r\n\r\nIn [4]: np.reshape(n, (3, 2, 4))\r\nOut[4]:\r\narray([[[0.17581148, 0.43739375, 0.91312755, 0.10826259],\r\n        [0.27645767, 0.76332953, 0.33347355, 0.3275152 ]],\r\n\r\n       [[0.22073202, 0.32309882, 0.89235911, 0.12772585],\r\n        [0.35609819, 0.28493136, 0.52302273, 0.44864522]],\r\n\r\n       [[0.98484051, 0.69152642, 0.50832536, 0.55934702],\r\n        [0.22349445, 0.67470517, 0.31865274, 0.11967942]]])\r\n\r\nIn [5]: dn = da.from_array(n, chunks=(1, 2, 2), asarray=False)\r\n\r\nIn [6]: da.reshape(dn, (3, 2, 4))\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-6-0a2eadfa678a> in <module>\r\n----> 1 da.reshape(dn, (3, 2, 4))\r\n\r\n~/miniconda3/envs/dask-cuda/lib/python3.7/site-packages/dask/array/reshape.py in reshape(x, shape)\r\n    185\r\n    186     # Logic for how to rechunk\r\n--> 187     inchunks, outchunks = reshape_rechunk(x.shape, shape, x.chunks)\r\n    188     x2 = x.rechunk(inchunks)\r\n    189\r\n\r\n~/miniconda3/envs/dask-cuda/lib/python3.7/site-packages/dask/array/reshape.py in reshape_rechunk(inshape, outshape, inchunks)\r\n     59                 oleft -= 1\r\n     60             if reduce(mul, outshape[oleft:oi + 1]) != din:\r\n---> 61                 raise ValueError(\"Shapes not compatible\")\r\n     62\r\n     63             # TODO: don't coalesce shapes unnecessarily\r\n\r\nValueError: Shapes not compatible\r\n\r\nIn [7]: import dask\r\n\r\nIn [8]: dask.__version__\r\nOut[8]: '1.2.2'\r\n\r\nIn [9]: da.reshape(dn, (2, 3, 4))\r\nOut[9]: dask.array<array, shape=(2, 3, 4), dtype=float64, chunksize=(1, 2, 2)>\r\n\r\nIn [10]: da.reshape(dn, (2, 4, 3))\r\n---------------------------------------------------------------------------\r\nValueError                                Traceback (most recent call last)\r\n<ipython-input-10-9c7a17e88c31> in <module>\r\n----> 1 da.reshape(dn, (2, 4, 3))\r\n\r\n~/miniconda3/envs/dask-cuda/lib/python3.7/site-packages/dask/array/reshape.py in reshape(x, shape)\r\n    185\r\n    186     # Logic for how to rechunk\r\n--> 187     inchunks, outchunks = reshape_rechunk(x.shape, shape, x.chunks)\r\n    188     x2 = x.rechunk(inchunks)\r\n    189\r\n\r\n~/miniconda3/envs/dask-cuda/lib/python3.7/site-packages/dask/array/reshape.py in reshape_rechunk(inshape, outshape, inchunks)\r\n     59                 oleft -= 1\r\n     60             if reduce(mul, outshape[oleft:oi + 1]) != din:\r\n---> 61                 raise ValueError(\"Shapes not compatible\")\r\n     62\r\n     63             # TODO: don't coalesce shapes unnecessarily\r\n\r\nValueError: Shapes not compatible\r\n\r\nIn [11]: dn = da.from_array(n, chunks=(2, 3, 4), asarray=False)\r\n\r\nIn [12]: da.reshape(dn, (2, 4, 3))\r\nOut[12]: dask.array<reshape, shape=(2, 4, 3), dtype=float64, chunksize=(2, 4, 3)>\r\n```\r\n\r\nHere again, using trivial chunks functions properly.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/491839099/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/491840521",
        "html_url": "https://github.com/dask/dask/issues/2561#issuecomment-491840521",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2561",
        "id": 491840521,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTg0MDUyMQ==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-13T14:15:10Z",
        "updated_at": "2019-05-13T14:15:10Z",
        "author_association": "MEMBER",
        "body": "Yes, the reshape function only works in certain situations.  See limitations here: https://docs.dask.org/en/latest/array-api.html#dask.array.reshape",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/491840521/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/491845464",
        "html_url": "https://github.com/dask/dask/issues/2561#issuecomment-491845464",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2561",
        "id": 491845464,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTg0NTQ2NA==",
        "user": {
            "login": "pentschev",
            "id": 4398246,
            "node_id": "MDQ6VXNlcjQzOTgyNDY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4398246?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pentschev",
            "html_url": "https://github.com/pentschev",
            "followers_url": "https://api.github.com/users/pentschev/followers",
            "following_url": "https://api.github.com/users/pentschev/following{/other_user}",
            "gists_url": "https://api.github.com/users/pentschev/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pentschev/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pentschev/subscriptions",
            "organizations_url": "https://api.github.com/users/pentschev/orgs",
            "repos_url": "https://api.github.com/users/pentschev/repos",
            "events_url": "https://api.github.com/users/pentschev/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pentschev/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-13T14:27:30Z",
        "updated_at": "2019-05-13T14:27:30Z",
        "author_association": "MEMBER",
        "body": "Alright, it didn't occur to me checking that before, thanks for the link. Allowing other cases (such as keeping the same number of dimensions) something that we want to tackle in the future? If not, I'd suggest either closing this issue or perhaps adding a few checks in the code to give the user a reason for particular cases.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/491845464/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/491846180",
        "html_url": "https://github.com/dask/dask/issues/2561#issuecomment-491846180",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/2561",
        "id": 491846180,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MTg0NjE4MA==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2019-05-13T14:29:11Z",
        "updated_at": "2019-05-13T14:29:11Z",
        "author_association": "MEMBER",
        "body": "No strong thoughts from me on this",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/491846180/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]