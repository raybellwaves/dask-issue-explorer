{
    "url": "https://api.github.com/repos/dask/dask/issues/4952",
    "repository_url": "https://api.github.com/repos/dask/dask",
    "labels_url": "https://api.github.com/repos/dask/dask/issues/4952/labels{/name}",
    "comments_url": "https://api.github.com/repos/dask/dask/issues/4952/comments",
    "events_url": "https://api.github.com/repos/dask/dask/issues/4952/events",
    "html_url": "https://github.com/dask/dask/issues/4952",
    "id": 456948235,
    "node_id": "MDU6SXNzdWU0NTY5NDgyMzU=",
    "number": 4952,
    "title": "Improve blockwise_meta exception handling",
    "user": {
        "login": "pentschev",
        "id": 4398246,
        "node_id": "MDQ6VXNlcjQzOTgyNDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4398246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pentschev",
        "html_url": "https://github.com/pentschev",
        "followers_url": "https://api.github.com/users/pentschev/followers",
        "following_url": "https://api.github.com/users/pentschev/following{/other_user}",
        "gists_url": "https://api.github.com/users/pentschev/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pentschev/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pentschev/subscriptions",
        "organizations_url": "https://api.github.com/users/pentschev/orgs",
        "repos_url": "https://api.github.com/users/pentschev/repos",
        "events_url": "https://api.github.com/users/pentschev/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pentschev/received_events",
        "type": "User",
        "site_admin": false
    },
    "labels": [
        {
            "id": 242862305,
            "node_id": "MDU6TGFiZWwyNDI4NjIzMDU=",
            "url": "https://api.github.com/repos/dask/dask/labels/array",
            "name": "array",
            "color": "006b75",
            "default": false,
            "description": null
        }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [],
    "milestone": null,
    "comments": 2,
    "created_at": "2019-06-17T13:53:24Z",
    "updated_at": "2019-06-24T21:13:49Z",
    "closed_at": null,
    "author_association": "MEMBER",
    "active_lock_reason": null,
    "body": "Current `blockwise_meta`/`blockwise` implementation defaults to `dtype` construction of `Dask.Array` when an non-trivial exception is raised when computing `_meta`. This is suboptimal for two reasons:\r\n\r\n1. It's difficult to trace that the defaulting happened within `blockwise` for somewhat complex user code;\r\n1. Exceptions that come from the array compute task (with NumPy, CuPy, etc.) are not raised to the user during graph construction.\r\n\r\nIdeally, we would handle all possible exceptions, with all remaining ones assumed to be user's mistake, such as passing `casting` to `cupy.einsum` (which isn't supported), as discussed in https://github.com/dask/dask/pull/4914.\r\n\r\nGiven that `_meta` now exists, Dask has become a universal scheduler, which probably means we can't handle every single possible exception, but we should at least allow developers to know about such cases, as well as letting users know they possibly made a mistake. We should therefore let most exceptions pass back to the user in `blockwise`.\r\n\r\nThis is loosely related to #4951, where we wish to allow users/developers be alerted of conditions that Dask can't handle and should probably be better handled by the library which Dask is using as a backend through `__array_function__`.",
    "closed_by": null,
    "reactions": {
        "url": "https://api.github.com/repos/dask/dask/issues/4952/reactions",
        "total_count": 0,
        "+1": 0,
        "-1": 0,
        "laugh": 0,
        "hooray": 0,
        "confused": 0,
        "heart": 0,
        "rocket": 0,
        "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/dask/dask/issues/4952/timeline",
    "performed_via_github_app": null,
    "state_reason": null
}