[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/395618455",
        "html_url": "https://github.com/dask/dask/issues/3576#issuecomment-395618455",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3576",
        "id": 395618455,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTYxODQ1NQ==",
        "user": {
            "login": "dhirschfeld",
            "id": 881019,
            "node_id": "MDQ6VXNlcjg4MTAxOQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/881019?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dhirschfeld",
            "html_url": "https://github.com/dhirschfeld",
            "followers_url": "https://api.github.com/users/dhirschfeld/followers",
            "following_url": "https://api.github.com/users/dhirschfeld/following{/other_user}",
            "gists_url": "https://api.github.com/users/dhirschfeld/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/dhirschfeld/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/dhirschfeld/subscriptions",
            "organizations_url": "https://api.github.com/users/dhirschfeld/orgs",
            "repos_url": "https://api.github.com/users/dhirschfeld/repos",
            "events_url": "https://api.github.com/users/dhirschfeld/events{/privacy}",
            "received_events_url": "https://api.github.com/users/dhirschfeld/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-06-08T01:39:14Z",
        "updated_at": "2018-06-08T01:39:14Z",
        "author_association": "NONE",
        "body": "It appears the shapes are the same if `full_matrices=False` is passed to `np.linalg.svd`. \r\n\r\nIt also appears that without `full_matrices=False` you can't directly reconstruct the original array `a`from the numpy results:\r\n```\r\n>>> u @ np.diag(s) @ vt\r\nValueError: shapes (20,20) and (10,10) not aligned: 20 (dim 1) != 10 (dim 0)\r\n```\r\n\r\n```\r\n>>> np.abs((d_u @ np.diag(d_s) @ d_vt) - d_a).max().compute()\r\n8.881784197001252e-15\r\n```\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/395618455/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/395622945",
        "html_url": "https://github.com/dask/dask/issues/3576#issuecomment-395622945",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3576",
        "id": 395622945,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM5NTYyMjk0NQ==",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-06-08T02:07:59Z",
        "updated_at": "2018-06-08T02:07:59Z",
        "author_association": "MEMBER",
        "body": "Right, we should rename this to `da.linalg.svd` lacks `full_matrices` argument.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/395622945/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/396083443",
        "html_url": "https://github.com/dask/dask/issues/3576#issuecomment-396083443",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3576",
        "id": 396083443,
        "node_id": "MDEyOklzc3VlQ29tbWVudDM5NjA4MzQ0Mw==",
        "user": {
            "login": "jakirkham",
            "id": 3019665,
            "node_id": "MDQ6VXNlcjMwMTk2NjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3019665?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jakirkham",
            "html_url": "https://github.com/jakirkham",
            "followers_url": "https://api.github.com/users/jakirkham/followers",
            "following_url": "https://api.github.com/users/jakirkham/following{/other_user}",
            "gists_url": "https://api.github.com/users/jakirkham/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jakirkham/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jakirkham/subscriptions",
            "organizations_url": "https://api.github.com/users/jakirkham/orgs",
            "repos_url": "https://api.github.com/users/jakirkham/repos",
            "events_url": "https://api.github.com/users/jakirkham/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jakirkham/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-06-10T21:28:00Z",
        "updated_at": "2018-06-10T21:28:00Z",
        "author_association": "MEMBER",
        "body": "As to the other point you raised, @dhirschfeld, the Dask Arrays were misreporting the actual shape of the results. This was fixed with PR ( https://github.com/dask/dask/pull/3517 ), which should show up in the next release.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/396083443/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/432798587",
        "html_url": "https://github.com/dask/dask/issues/3576#issuecomment-432798587",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3576",
        "id": 432798587,
        "node_id": "MDEyOklzc3VlQ29tbWVudDQzMjc5ODU4Nw==",
        "user": {
            "login": "mrocklin",
            "id": 306380,
            "node_id": "MDQ6VXNlcjMwNjM4MA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/306380?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mrocklin",
            "html_url": "https://github.com/mrocklin",
            "followers_url": "https://api.github.com/users/mrocklin/followers",
            "following_url": "https://api.github.com/users/mrocklin/following{/other_user}",
            "gists_url": "https://api.github.com/users/mrocklin/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mrocklin/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mrocklin/subscriptions",
            "organizations_url": "https://api.github.com/users/mrocklin/orgs",
            "repos_url": "https://api.github.com/users/mrocklin/repos",
            "events_url": "https://api.github.com/users/mrocklin/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mrocklin/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2018-10-24T19:34:25Z",
        "updated_at": "2018-10-24T19:34:25Z",
        "author_association": "MEMBER",
        "body": "@jakirkham is this resolved?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/432798587/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/685924337",
        "html_url": "https://github.com/dask/dask/issues/3576#issuecomment-685924337",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3576",
        "id": 685924337,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY4NTkyNDMzNw==",
        "user": {
            "login": "eric-czech",
            "id": 6130352,
            "node_id": "MDQ6VXNlcjYxMzAzNTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6130352?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/eric-czech",
            "html_url": "https://github.com/eric-czech",
            "followers_url": "https://api.github.com/users/eric-czech/followers",
            "following_url": "https://api.github.com/users/eric-czech/following{/other_user}",
            "gists_url": "https://api.github.com/users/eric-czech/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/eric-czech/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/eric-czech/subscriptions",
            "organizations_url": "https://api.github.com/users/eric-czech/orgs",
            "repos_url": "https://api.github.com/users/eric-czech/repos",
            "events_url": "https://api.github.com/users/eric-czech/events{/privacy}",
            "received_events_url": "https://api.github.com/users/eric-czech/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-02T18:38:38Z",
        "updated_at": "2020-09-02T18:38:38Z",
        "author_association": "MEMBER",
        "body": "Ditto that @jakirkham -- I was interested in helping pick this up after running into https://github.com/dask/dask-ml/issues/732#issuecomment-685922313.  Is there anything big left to be done/tested?",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/685924337/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/689788421",
        "html_url": "https://github.com/dask/dask/issues/3576#issuecomment-689788421",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3576",
        "id": 689788421,
        "node_id": "MDEyOklzc3VlQ29tbWVudDY4OTc4ODQyMQ==",
        "user": {
            "login": "eric-czech",
            "id": 6130352,
            "node_id": "MDQ6VXNlcjYxMzAzNTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6130352?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/eric-czech",
            "html_url": "https://github.com/eric-czech",
            "followers_url": "https://api.github.com/users/eric-czech/followers",
            "following_url": "https://api.github.com/users/eric-czech/following{/other_user}",
            "gists_url": "https://api.github.com/users/eric-czech/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/eric-czech/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/eric-czech/subscriptions",
            "organizations_url": "https://api.github.com/users/eric-czech/orgs",
            "repos_url": "https://api.github.com/users/eric-czech/repos",
            "events_url": "https://api.github.com/users/eric-czech/events{/privacy}",
            "received_events_url": "https://api.github.com/users/eric-czech/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2020-09-09T20:01:21Z",
        "updated_at": "2020-09-10T13:30:38Z",
        "author_association": "MEMBER",
        "body": "I found a little bit more on what the state of this seems to be.  It looks like for an (`M`, `N`) matrix you get the `full_matrices=False` behavior when `M` > `N` and the `full_matrices=True` behavior when `N` > `M`:\r\n\r\n```python\r\ndef shapes(r):\r\n    return [x.shape for x in r]\r\n\r\nx = da.random.random((10, 100))\r\nassert shapes(da.linalg.svd(x)) == shapes(np.linalg.svd(np.asarray(x), full_matrices=True))\r\nx = da.random.random((100, 10))\r\nassert shapes(da.linalg.svd(x)) == shapes(np.linalg.svd(np.asarray(x), full_matrices=False))\r\n```\r\n\r\nIf it was clear how to get the `full_matrices=True` behavior for all inputs from tsqr, I think it would be fairly straightforward to fully support the argument.  Without that though, it would at least be nice if support for `full_matrices=False` was consistent.  This could be one way to do that:\r\n\r\n1. If the array is unchunked, run np.linalg.svd with full_matrices=False\r\n2. If the array has tall-skinny chunking, run tsqr \r\n3. If the array has short-fat chunking, run tsqr on transposed inputs \r\n4. If the arrays has tall-skinny or short-fat chunking but the shape contradicts the chunking, ~~throw an error~~ trim off the extra vectors returned by tsqr\r\n\r\nHow important is `full_matrices=True`?  I came here looking for consistent `full_matrices=False` behavior and I'll happily work on that, but I'm not sure what practical use cases there are for that being true other than the case @dhirschfeld mentioned in complete reconstruction of an input array.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/689788421/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/785459685",
        "html_url": "https://github.com/dask/dask/issues/3576#issuecomment-785459685",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/3576",
        "id": 785459685,
        "node_id": "MDEyOklzc3VlQ29tbWVudDc4NTQ1OTY4NQ==",
        "user": {
            "login": "chkothe",
            "id": 5318120,
            "node_id": "MDQ6VXNlcjUzMTgxMjA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5318120?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/chkothe",
            "html_url": "https://github.com/chkothe",
            "followers_url": "https://api.github.com/users/chkothe/followers",
            "following_url": "https://api.github.com/users/chkothe/following{/other_user}",
            "gists_url": "https://api.github.com/users/chkothe/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/chkothe/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/chkothe/subscriptions",
            "organizations_url": "https://api.github.com/users/chkothe/orgs",
            "repos_url": "https://api.github.com/users/chkothe/repos",
            "events_url": "https://api.github.com/users/chkothe/events{/privacy}",
            "received_events_url": "https://api.github.com/users/chkothe/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-02-24T23:22:39Z",
        "updated_at": "2021-02-25T06:41:20Z",
        "author_association": "NONE",
        "body": "If I understood this right, the above merge achieves behavior that's consistent with `np.linalg.svd(X, full_matrices=False)`. However, one cannot currently invoke `da.linalg.svd(X, full_matrices=False)` since there's no such argument -- i.e. even though you have the right implementation, the API is not yet consistent. \r\n\r\nI guess the simplest fix would be to add that argument without a default value and require that `full_matrices` be passed in as `False` (this would flag users' existing code that may have relied on dask's legacy behavior).\r\n\r\nPlus, if there's interest in back compatibility, one could allow using this with something like `full_matrices='legacy'`, which would invoke dask's old behavior (that some users might depend on?). And if you want to avoid breaking any existing code, one could default to `full_matrices=None`, which would do the same as `'legacy'` but should probably emit a deprecation warning that suggests to use either `'legacy'` or `False` explicitly, and that at some future point the default behavior might flip to match numpy's API (i.e., default to `full_matrices=True`).",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/785459685/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]