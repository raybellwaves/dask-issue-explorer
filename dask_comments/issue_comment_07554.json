[
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/818772956",
        "html_url": "https://github.com/dask/dask/issues/7554#issuecomment-818772956",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7554",
        "id": 818772956,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxODc3Mjk1Ng==",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-13T14:17:29Z",
        "updated_at": "2021-04-13T14:17:29Z",
        "author_association": "MEMBER",
        "body": "I mentioned this to @rjzamora offline, but I am just now finally getting around to writing it up properly.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/818772956/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/818774449",
        "html_url": "https://github.com/dask/dask/issues/7554#issuecomment-818774449",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7554",
        "id": 818774449,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgxODc3NDQ0OQ==",
        "user": {
            "login": "rjzamora",
            "id": 20461013,
            "node_id": "MDQ6VXNlcjIwNDYxMDEz",
            "avatar_url": "https://avatars.githubusercontent.com/u/20461013?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rjzamora",
            "html_url": "https://github.com/rjzamora",
            "followers_url": "https://api.github.com/users/rjzamora/followers",
            "following_url": "https://api.github.com/users/rjzamora/following{/other_user}",
            "gists_url": "https://api.github.com/users/rjzamora/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rjzamora/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rjzamora/subscriptions",
            "organizations_url": "https://api.github.com/users/rjzamora/orgs",
            "repos_url": "https://api.github.com/users/rjzamora/repos",
            "events_url": "https://api.github.com/users/rjzamora/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rjzamora/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-13T14:19:30Z",
        "updated_at": "2021-04-13T14:19:30Z",
        "author_association": "MEMBER",
        "body": "Ah - This is definitely something I'd like to understand. Thanks for formalizing it @jsignell !  ",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/818774449/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/820626601",
        "html_url": "https://github.com/dask/dask/issues/7554#issuecomment-820626601",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7554",
        "id": 820626601,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDYyNjYwMQ==",
        "user": {
            "login": "rjzamora",
            "id": 20461013,
            "node_id": "MDQ6VXNlcjIwNDYxMDEz",
            "avatar_url": "https://avatars.githubusercontent.com/u/20461013?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rjzamora",
            "html_url": "https://github.com/rjzamora",
            "followers_url": "https://api.github.com/users/rjzamora/followers",
            "following_url": "https://api.github.com/users/rjzamora/following{/other_user}",
            "gists_url": "https://api.github.com/users/rjzamora/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/rjzamora/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/rjzamora/subscriptions",
            "organizations_url": "https://api.github.com/users/rjzamora/orgs",
            "repos_url": "https://api.github.com/users/rjzamora/repos",
            "events_url": "https://api.github.com/users/rjzamora/events{/privacy}",
            "received_events_url": "https://api.github.com/users/rjzamora/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-15T18:04:47Z",
        "updated_at": "2021-04-15T18:04:47Z",
        "author_association": "MEMBER",
        "body": "I'm having a bit of trouble working out exactly what the \"correct\" output should be here.  It is clear that the shape should be the same before and after calling `compute`, but it is not clear to me whether the meta shape (`(3, 2)`) or the computed shape (`(1, 6)`) is *correct*.  Perhaps others have more confidence in whether the metadata or result is wrong (cc @jakirkham).\r\n\r\nAs far as I can tell, `da.blockwise(np.outer, 'ji', a, 'i', b, 'j')` is dictating that an outer product should be peformed between the blocks of `a` and `b`, and that the output ordering of the blocks should be transposed (since the output indices are `'ji'` rather than `'ij'`).  It is not clear to me if the `'ji'` ordering has any effect on the ordering of the arguments within the *local* `np.outer` operations.  My understanding is \"no,\" and so the local operations will be `np.outer([0], [10, 50, 100])` and `np.outer([1], [10, 50, 100])` no matter the output indice order, since the first array (`a`) is chunked into [0] and [1], and the second array (`b`) is not effectively chunked at all.  Therefore, I am assuming that the `'ji'` ordering of these two output blocks makes the computed shape `(1, 6)` the *correct* shape.",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/820626601/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/820645938",
        "html_url": "https://github.com/dask/dask/issues/7554#issuecomment-820645938",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7554",
        "id": 820645938,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDY0NTkzOA==",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-15T18:32:54Z",
        "updated_at": "2021-04-15T18:33:31Z",
        "author_association": "MEMBER",
        "body": "Yeah I think the computed value is right. There are other cases that are maybe easier to think about. \r\n\r\n```python\r\nimport dask.array as da\r\nimport operator, numpy as np, dask.array as da\r\nx = da.from_array([[1, 2],\r\n                   [3, 4]], chunks=(1, 2))\r\ny = da.from_array([[10, 20],\r\n                   [0, 0]])\r\nz = da.blockwise(operator.add, 'ij', x, 'ji', y, 'ji')\r\nz.shape\r\n# (2, 2)\r\n\r\nz.compute()\r\n# array([[11, 22,  3,  4]])\r\n\r\nz.compute().shape\r\n# (1, 4)\r\n```\r\n\r\n",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/820645938/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    },
    {
        "url": "https://api.github.com/repos/dask/dask/issues/comments/820727270",
        "html_url": "https://github.com/dask/dask/issues/7554#issuecomment-820727270",
        "issue_url": "https://api.github.com/repos/dask/dask/issues/7554",
        "id": 820727270,
        "node_id": "MDEyOklzc3VlQ29tbWVudDgyMDcyNzI3MA==",
        "user": {
            "login": "jsignell",
            "id": 4806877,
            "node_id": "MDQ6VXNlcjQ4MDY4Nzc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4806877?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jsignell",
            "html_url": "https://github.com/jsignell",
            "followers_url": "https://api.github.com/users/jsignell/followers",
            "following_url": "https://api.github.com/users/jsignell/following{/other_user}",
            "gists_url": "https://api.github.com/users/jsignell/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jsignell/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jsignell/subscriptions",
            "organizations_url": "https://api.github.com/users/jsignell/orgs",
            "repos_url": "https://api.github.com/users/jsignell/repos",
            "events_url": "https://api.github.com/users/jsignell/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jsignell/received_events",
            "type": "User",
            "site_admin": false
        },
        "created_at": "2021-04-15T21:00:33Z",
        "updated_at": "2021-04-15T21:00:33Z",
        "author_association": "MEMBER",
        "body": "I think it should be `z.chunks = ((1,), (2, 2))`",
        "reactions": {
            "url": "https://api.github.com/repos/dask/dask/issues/comments/820727270/reactions",
            "total_count": 0,
            "+1": 0,
            "-1": 0,
            "laugh": 0,
            "hooray": 0,
            "confused": 0,
            "heart": 0,
            "rocket": 0,
            "eyes": 0
        },
        "performed_via_github_app": null
    }
]